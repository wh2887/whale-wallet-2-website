{"version":3,"sources":["webpack:///./node_modules/zrender/lib/core/timsort.js","webpack:///./node_modules/zrender/lib/contain/polygon.js","webpack:///./node_modules/zrender/lib/animation/Animator.js","webpack:///./node_modules/zrender/lib/core/GestureMgr.js","webpack:///./node_modules/zrender/lib/core/arrayDiff2.js","webpack:///./node_modules/zrender/lib/mixin/Transformable.js","webpack:///./node_modules/zrender/lib/graphic/Image.js","webpack:///./node_modules/zrender/lib/core/matrix.js","webpack:///./node_modules/zrender/lib/graphic/Displayable.js","webpack:///./node_modules/zrender/lib/mixin/Eventful.js","webpack:///./node_modules/zrender/lib/core/PathProxy.js","webpack:///./node_modules/zrender/lib/core/env.js","webpack:///./node_modules/zrender/lib/graphic/Style.js","webpack:///./node_modules/zrender/lib/config.js","webpack:///./node_modules/zrender/lib/tool/parseSVG.js","webpack:///./node_modules/zrender/lib/animation/Animation.js","webpack:///./node_modules/zrender/lib/tool/path.js","webpack:///./node_modules/zrender/lib/graphic/IncrementalDisplayable.js","webpack:///./node_modules/zrender/lib/svg/graphic.js","webpack:///./node_modules/zrender/lib/core/vector.js","webpack:///./node_modules/zrender/lib/tool/color.js","webpack:///./node_modules/zrender/lib/graphic/Gradient.js","webpack:///./node_modules/zrender/lib/animation/Clip.js","webpack:///./node_modules/zrender/lib/graphic/shape/Ring.js","webpack:///./node_modules/zrender/lib/graphic/LinearGradient.js","webpack:///./node_modules/zrender/lib/core/log.js","webpack:///./node_modules/zrender/lib/core/curve.js","webpack:///./node_modules/zrender/lib/graphic/shape/Sector.js","webpack:///./node_modules/zrender/lib/svg/helper/Definable.js","webpack:///./node_modules/zrender/lib/graphic/helper/poly.js","webpack:///./node_modules/zrender/lib/graphic/helper/roundRect.js","webpack:///./node_modules/zrender/lib/Layer.js","webpack:///./node_modules/zrender/lib/graphic/helper/image.js","webpack:///./node_modules/zrender/lib/core/event.js","webpack:///./node_modules/zrender/lib/graphic/helper/smoothSpline.js","webpack:///./node_modules/zrender/lib/core/dom.js","webpack:///./node_modules/zrender/lib/contain/quadratic.js","webpack:///./node_modules/zrender/lib/zrender.js","webpack:///./node_modules/zrender/lib/core/util.js","webpack:///./node_modules/zrender/lib/animation/easing.js","webpack:///./node_modules/zrender/lib/graphic/Text.js","webpack:///./node_modules/zrender/lib/graphic/helper/fixShadow.js","webpack:///./node_modules/zrender/lib/graphic/constant.js","webpack:///./node_modules/zrender/lib/core/fourPointsTransform.js","webpack:///./node_modules/zrender/lib/contain/util.js","webpack:///./node_modules/zrender/lib/svg/core.js","webpack:///./node_modules/zrender/lib/contain/windingLine.js","webpack:///./node_modules/zrender/lib/graphic/shape/Polygon.js","webpack:///./node_modules/zrender/lib/graphic/helper/fixClipWithShadow.js","webpack:///./node_modules/zrender/lib/graphic/shape/Arc.js","webpack:///./node_modules/zrender/lib/svg/svg.js","webpack:///./node_modules/zrender/lib/contain/line.js","webpack:///./node_modules/zrender/lib/core/BoundingRect.js","webpack:///./node_modules/zrender/lib/animation/requestAnimationFrame.js","webpack:///./node_modules/zrender/lib/graphic/helper/smoothBezier.js","webpack:///./node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","webpack:///./node_modules/zrender/lib/graphic/mixin/RectText.js","webpack:///./node_modules/zrender/lib/contain/arc.js","webpack:///./node_modules/zrender/lib/svg/helper/ClippathManager.js","webpack:///./node_modules/zrender/lib/graphic/helper/text.js","webpack:///./node_modules/zrender/lib/vml/graphic.js","webpack:///./node_modules/zrender/lib/graphic/shape/BezierCurve.js","webpack:///./node_modules/zrender/lib/graphic/shape/Ellipse.js","webpack:///./node_modules/zrender/lib/Storage.js","webpack:///./node_modules/zrender/lib/svg/helper/GradientManager.js","webpack:///./node_modules/zrender/lib/svg/helper/ShadowManager.js","webpack:///./node_modules/zrender/lib/mixin/Animatable.js","webpack:///./node_modules/zrender/lib/graphic/shape/Rect.js","webpack:///./node_modules/zrender/lib/graphic/shape/Line.js","webpack:///./node_modules/zrender/lib/mixin/Draggable.js","webpack:///./node_modules/zrender/lib/graphic/Path.js","webpack:///./node_modules/zrender/lib/dom/HandlerProxy.js","webpack:///./node_modules/zrender/lib/Handler.js","webpack:///./node_modules/zrender/lib/vml/core.js","webpack:///./node_modules/zrender/lib/graphic/shape/Polyline.js","webpack:///./node_modules/zrender/lib/graphic/CompoundPath.js","webpack:///./node_modules/zrender/lib/core/LRU.js","webpack:///./node_modules/zrender/lib/Element.js","webpack:///./node_modules/zrender/lib/contain/path.js","webpack:///./node_modules/zrender/lib/graphic/shape/Circle.js","webpack:///./node_modules/zrender/lib/svg/Painter.js","webpack:///./node_modules/zrender/lib/graphic/Pattern.js","webpack:///./node_modules/zrender/lib/graphic/RadialGradient.js","webpack:///./node_modules/zrender/lib/core/guid.js","webpack:///./node_modules/zrender/lib/container/Group.js","webpack:///./node_modules/zrender/lib/core/bbox.js","webpack:///./node_modules/zrender/lib/contain/cubic.js","webpack:///./node_modules/zrender/lib/contain/text.js","webpack:///./node_modules/zrender/lib/vml/Painter.js","webpack:///./node_modules/zrender/lib/Painter.js","webpack:///./node_modules/zrender/lib/tool/transformPath.js","webpack:///./node_modules/zrender/lib/vml/vml.js"],"names":["makeAscendingRun","array","lo","hi","compare","runHi","t","reverseRun","binaryInsertionSort","start","mid","pivot","left","right","n","gallopLeft","value","length","hint","lastOffset","maxOffset","offset","tmp","m","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","mergeAt","i","start1","length1","start2","length2","k","cursor1","cursor2","dest","count1","count2","exit","_minGallop","Error","mergeLow","customCursor","customDest","mergeHigh","this","mergeRuns","forceMergeRuns","pushRun","_runStart","_runLength","module","exports","remaining","ts","minRun","r","minRunLength","force","windingLine","isAroundEqual","a","b","Math","abs","contain","points","x","y","w","p","p2","p0","Clip","color","isArrayLike","arraySlice","Array","prototype","slice","defaultGetter","target","key","defaultSetter","interpolateNumber","p1","percent","interpolateString","interpolateArray","out","arrDim","len","len2","j","fillArr","arr0","arr1","arr0Len","arr1Len","push","call","isNaN","isArraySame","catmullRomInterpolateArray","p3","t2","t3","catmullRomInterpolate","v0","v1","cloneValue","ret","rgba2String","rgba","floor","join","createTrackClip","animator","easing","oneTrackDone","keyframes","propName","forceAnimate","getter","_getter","setter","_setter","useSpline","trackLen","trackMaxTime","firstVal","isValueArray","isValueColor","isValueString","lastValue","getArrayDim","sort","time","kfPercents","kfValues","prevValue","isAllValueEqual","colorArray","parse","_target","lastFrame","lastFramePercent","clip","life","loop","_loop","delay","_delay","onframe","frame","min","range","ondestroy","Animator","_tracks","_clipCount","_doneList","_onframeList","_clipList","when","props","tracks","hasOwnProperty","during","callback","pause","_paused","resume","isPaused","_doneCallback","doneList","lastClip","self","clipCount","animation","addClip","oldOnFrame","stop","forwardToLast","clipList","removeClip","done","cb","getClips","_default","eventUtil","GestureMgr","_track","dist","pointPair","dx","dy","sqrt","constructor","recognize","event","root","_doTrack","_recognize","clear","touches","trackItem","touch","pos","clientToLocal","zrX","zrY","eventName","recognizers","gestureInfo","pinch","track","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","type","Diff","buildValues","diff","components","newArr","oldArr","componentPos","componentLen","newPos","oldPos","component","removed","indices","count","added","equals","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","basePath","addPath","removePath","undefined","canAdd","canRemove","path","pushComponent","last","commonCount","tokenize","arrayDiff","matrix","vector","mIdentity","identity","isNotAroundZero","val","Transformable","opts","position","rotation","scale","origin","transformableProto","transform","needLocalTransform","scaleTmp","updateTransform","parent","parentHasTransform","create","getLocalTransform","mul","copy","globalScaleRatio","getGlobalScale","relX","relY","sx","sy","invTransform","invert","setTransform","ctx","dpr","restoreTransform","tmpTransform","originTransform","setLocalTransform","atan2","decomposeTransform","transformCoordToLocal","v2","applyTransform","transformCoordToGlobal","rotate","Displayable","BoundingRect","zrUtil","imageHelper","ZImage","brush","prevEl","style","src","image","bind","_image","createOrUpdateImage","onload","isImageReady","width","height","aspect","sWidth","sHeight","drawImage","text","drawRectText","getBoundingRect","_rect","inherits","ArrayCtor","Float32Array","m1","m2","out0","out1","out2","out3","out4","out5","translate","v","rad","aa","ac","atx","ab","ad","aty","st","sin","ct","cos","vx","vy","det","clone","Style","Element","RectText","name","__clipPaths","__dirty","invisible","z","z2","zlevel","draggable","dragging","silent","culling","cursor","rectHover","progressive","incremental","beforeBrush","afterBrush","rectContain","traverse","context","coord","dirty","__dirtyText","__zr","refresh","animateStyle","animate","attrKV","set","setStyle","useStyle","obj","calculateTextPosition","mixin","arrySlice","Eventful","eventProcessor","_$handlers","_$eventProcessor","on","eventful","query","handler","isOnce","_h","host","normalizeQuery","h","wrap","one","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","splice","isSilent","off","newList","l","trigger","args","arguments","argLen","hItem","filter","apply","afterTrigger","triggerWithContext","curve","vec2","bbox","devicePixelRatio","CMD","M","L","C","Q","A","Z","R","max","min2","max2","mathMin","mathMax","mathCos","mathSin","mathSqrt","mathAbs","hasTypedArray","PathProxy","notSaveData","_saveData","data","_ctx","_xi","_yi","_x0","_y0","_ux","_uy","_len","_lineDash","_dashOffset","_dashIdx","_dashSum","setScale","segmentIgnoreThreshold","getContext","beginPath","moveTo","addData","lineTo","exceedUnit","_needsDash","_dashedLineTo","bezierCurveTo","x1","y1","x2","y2","x3","y3","_dashedBezierTo","quadraticCurveTo","_dashedQuadraticTo","arc","cx","cy","startAngle","endAngle","anticlockwise","arcTo","radius","rect","closePath","x0","y0","fill","toStatic","stroke","setLineDash","lineDash","lineDashSum","setLineDashOffset","setData","appendPath","appendSize","appendPathData","cmd","_expandData","_prevCmd","newData","dash","idx","dashSum","nDash","cubicAt","bezierLen","tmpLen","Number","MAX_VALUE","xi","yi","fromLine","fromCubic","fromQuadratic","rx","ry","fromArc","rebuildPath","d","ux","uy","theta","dTheta","psi","fs","scaleX","scaleY","wx","getSystemInfoSync","browser","os","node","wxa","canvasSupported","svgSupported","touchEventsSupported","domSupported","document","worker","navigator","ua","firefox","match","ie","edge","weChat","test","version","createElement","SVGRect","window","pointerEventsSupported","detect","userAgent","fixShadow","ContextCachedBy","STYLE_COMMON_PROPS","extendFrom","createLinearGradient","global","createRadialGradient","styleProto","opacity","fillOpacity","strokeOpacity","lineDashOffset","shadowBlur","shadowOffsetX","shadowOffsetY","lineWidth","strokeNoScale","font","textFont","fontStyle","fontWeight","fontSize","fontFamily","textTag","textFill","textStroke","textWidth","textHeight","textStrokeWidth","textLineHeight","textPosition","textRect","textOffset","textAlign","textVerticalAlign","textDistance","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","textBoxShadowColor","textBoxShadowBlur","textBoxShadowOffsetX","textBoxShadowOffsetY","transformText","textRotation","textOrigin","textBackgroundColor","textBorderColor","textBorderWidth","textBorderRadius","textPadding","rich","truncate","blend","el","prevStyle","notCheckCache","__attrCachedBy","STYLE_BIND","prop","styleName","fillStyle","strokeStyle","globalAlpha","globalCompositeOperation","hasStroke","getLineScale","hasFill","otherStyle","overwrite","newStyle","getGradient","canvasGradient","colorStops","addColorStop","debugMode","Group","Text","Circle","Rect","Ellipse","Line","Path","Polygon","Polyline","LinearGradient","createFromString","_util","isString","extend","defaults","trim","each","DILIMITER_REG","parseXML","svg","DOMParser","parseFromString","nodeType","firstChild","nodeName","toLowerCase","nextSibling","SVGParser","_defs","_root","_isDefine","_isText","xml","opt","viewBox","getAttribute","parseFloat","parseAttributes","viewBoxRect","viewBoxTransform","child","_parseNode","viewBoxArr","split","makeViewBoxTransform","ignoreViewBox","elRoot","add","ignoreRootClip","setClipPath","shape","xmlNode","parentGroup","parser","defineParsers","def","id","nodeParsers","_parseText","_textX","_textY","textContent","inheritStyle","g","setShape","circle","line","ellipse","parsePoints","polygon","img","parseInt","gradient","indexOf","stopColor","_parseGradientColorStops","__inheritedStyle","pointsString","list","attributesMap","defs","onlyInlineStyle","zrStyle","isTextEl","replace","transformOps","transformRegex","str","console","warn","parseTransformAttribute","result","styleRegResult","styleList","styleRegex","exec","svgAttrName","parseStyleAttribute","attrValue","elFillProp","elStrokeProp","elStyle","getPaint","elPropName","textBaseline","urlRegex","urlMatch","parseSVG","util","Dispatcher","requestAnimationFrame","Animation","options","stage","_clips","_running","_time","_pausedTime","_pauseStart","addAnimator","clips","removeAnimator","_update","Date","getTime","delta","deferredEvents","deferredClips","e","step","_needsRemove","pop","fire","update","_startLoop","isFinished","transformPath","PI","vMag","vRatio","u","vAngle","acos","processArc","fa","psiDeg","xp","yp","lambda","f","cxp","cyp","commandReg","numberReg","createPathOptions","pathProxy","prevCmd","cpx","cpy","subpathX","subpathY","cmdList","cmdText","cmdStr","charAt","pLen","ctlPtx","ctlPty","pathData","createPathProxyFromString","buildPath","extendFromString","mergePath","pathEls","pathList","pathEl","createPathProxy","__dirtyPath","pathBundle","Displayble","IncrementalDisplayble","_displayables","_temporaryDisplayables","_cursor","notClear","clearDisplaybles","addDisplayable","displayable","notPersistent","addDisplayables","displayables","eachPendingDisplayable","Infinity","childRect","union","localPos","textContain","textHelper","arrayJoin","mathRound","round","PI2","degree","round4","isAroundZero","svgEl","attr","setAttribute","bindStyle","isText","pathHasFill","pathHasStroke","lineCap","lineJoin","miterLimit","svgPath","__svgEl","subPixelOptimize","pathStr","dataLength","nData","clockwise","dThetaPositive","isCircle","unifiedTheta","large","pathDataToString","svgTextDrawRectText","removeOldTextNode","svgImage","HTMLImageElement","dw","dh","__imageSrc","setAttributeNS","attrXLink","svgText","_tmpTextHostRect","_tmpTextBoxPos","_tmpTextTransform","TEXT_ALIGN_TO_ANCHRO","center","middle","hostRect","elTransform","needTransformTextByHostEl","normalizeTextStyle","needDrawText","textSvgEl","__textSvgEl","textSvgElStyle","DEFAULT_FONT","computedFont","__computedFont","__styleFont","contentBlock","__textCotentBlock","parsePlainText","outerHeight","lineHeight","getBoxPosition","baseX","baseY","setTextTransform","textX","textY","adjustTextY","getTextXForPadding","canCacheByTextString","tspanList","__tspanList","tspanOriginLen","__canCacheByTextString","__text","updateTextLocation","textLines","lines","nTextLines","tspan","singleLineText","__zrText","innerHTML","appendChild","createTextNode","removeChild","parentNode","lenSquare","lengthSquare","distance","distanceSquare","distSquare","scaleAndAdd","sub","div","dot","s","normalize","negate","lerp","LRU","kCSSColorTable","clampCssByte","clampCssFloat","parseCssInt","parseCssFloat","cssHueToRgb","lerpNumber","setRgba","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","put","cached","get","iv","substr","op","ep","fname","params","alpha","hsla2rgba","hsla","fastLerp","normalizedValue","colors","leftIndex","rightIndex","ceil","leftColor","rightColor","dv","fastMapToColor","fullOutput","stringify","mapToColor","arrColor","lift","level","colorArr","toHex","toString","modifyHSL","H","S","G","B","vMin","vMax","deltaR","deltaG","deltaB","rgba2hsla","modifyAlpha","Gradient","easingFuncs","_life","_initialized","gap","onrestart","globalTime","deltaTime","_startTime","easingFunc","schedule","restart","remainder","eventType","arg","r0","globalCoord","logError","error","_vector","v2Create","v2DistSquare","mathPow","pow","THREE_SQRT","_v0","_v1","_v2","onet","quadraticAt","cubicDerivativeAt","cubicRootAt","roots","c","t1","disc","K","discSqrt","Y1","Y2","T","ASqrt","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","prev","next","d1","d2","interval","_t","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","fixClipWithShadow","unitX","unitY","ZText","_graphic","Definable","zrId","svgRoot","tagNames","markLabel","domName","_zrId","_svgRoot","_tagNames","_markLabel","_domName","nextId","getDefs","isForceCreating","getElementsByTagName","insertBefore","contains","children","element","onUpdate","dom","addDom","removeDom","getDoms","doms","tagName","tags","concat","markAllUnused","that","markUsed","removeUnused","getSvgProxy","getTextSvgElement","getSvgElement","smoothSpline","smoothBezier","smooth","controlPoints","smoothConstraint","cp1","cp2","r1","r2","r3","r4","total","Pattern","returnFalse","createDom","painter","newDom","createCanvas","getWidth","getHeight","newDomStyle","top","Layer","isObject","domStyle","onselectstart","domBack","ctxBack","config","clearColor","motionBlur","lastFrameAlpha","__used","__drawIndex","__startIndex","__endIndex","getElementCount","initContext","createBackBuffer","resize","clearAll","clearColorGradientOrPattern","haveMotionBLur","clearRect","__canvasGradient","getCanvasPattern","save","fillRect","restore","globalImageCache","imageOnLoad","cachedImgObj","__cachedImgObj","onerror","pending","pendingWrap","cbPayload","hostEl","findExistImage","newImageOrSrc","__zrImageSrc","Image","env","_dom","isCanvasEl","transformCoordWithViewport","isDomLevel2","addEventListener","MOUSE_EVENT_REG","_calcOut","calculate","calculateZrXY","layerX","offsetX","layerY","offsetY","getBoundingClientRect","ex","clientX","ey","clientY","box","getNativeEvent","preventDefault","stopPropagation","cancelBubble","returnValue","normalizeEvent","targetTouches","changedTouches","zrDelta","wheelDelta","detail","button","which","attachEvent","removeEventListener","detachEvent","isMiddleOrRightButtonOnMouseUpDown","notLeftMouse","v2Distance","interpolate","isLoop","segs","w2","w3","buildTransformer","inX","inY","inverse","saved","transformer","markers","transformerName","oldSrcCoords","srcCoords","oldCoordTheSame","destCoords","ii","offsetLeft","offsetTop","preparePointerTransformer","propLR","propTB","marker","stl","idxLR","idxTB","cssText","prepareCoordMarkers","toUpperCase","transformLocalCoord","elFrom","elTarget","containStroke","_l","guid","Handler","Storage","Painter","HandlerProxy","useVML","painterCtors","canvas","instances","ZRender","storage","rendererType","renderer","vml","handerProxy","getViewportRoot","flush","_needsRefresh","oldDelFromStorage","delFromStorage","oldAddToStorage","addToStorage","removeSelfFromZr","addSelfToZr","getId","addRoot","remove","delRoot","configLayer","zLevel","setBackgroundColor","backgroundColor","refreshImmediately","_needsRefreshHover","triggerRendered","refreshHoverImmediately","addHover","elMirror","refreshHover","removeHover","clearHover","clearAnimation","pathToImage","setCursorStyle","cursorStyle","findHover","eventHandler","dispose","init","zr","getInstance","registerPainter","Ctor","BUILTIN_OBJECT","TYPED_ARRAY","objToString","Object","arrayProto","nativeForEach","forEach","nativeFilter","nativeSlice","nativeMap","map","nativeReduce","reduce","methods","source","typeStr","isPrimitive","from","isDom","merge","targetProp","sourceProp","isArray","isBuiltInObject","overlay","func","ownerDocument","HashMap","isArr","thisMap","visit","removeKey","$override","fn","mergeAll","targetAndSources","clazz","baseClazz","clazzPrototype","F","superClass","memo","find","curry","isFunction","isTypedArray","eqNaN","retrieve","values","retrieve2","value0","value1","retrieve3","value2","Function","normalizeCssArray","assert","condition","message","setAsPrimitive","createHashMap","concatArray","newArray","noop","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","asin","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","shadowColor","renderText","NONE","getStroke","SHADOW_PROPS","PLAIN_TEXT","WILL_BE_RESTORED","LN2","log","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","subRowMask","subRowStart","sum","colLocalIdx","colTag","mA","vh","srcPointX","srcPointY","pk","normalizeRadian","angle","createElementNS","dir","x_","polyHelper","shadowTemp","orignalBrush","modified","clipPaths","clipPath","_a","lt","rb","lb","rt","v2ApplyTransform","other","maxX","maxY","calculateTransform","intersect","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","plain","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout","v2Min","v2Max","v2Scale","v2Add","v2Clone","v2Sub","constraint","prevPoint","nextPoint","cps","point","d0","cp0","shift","positiveOrNegative","doubledPosition","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimizeRect","originX","originY","originWidth","originHeight","tmpRect","ClippathManager","updateDom","textEl","parentEl","clipPathEl","svgProxy","cloneNode","_textDom","roundRectHelper","_constant","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","bottom","SHADOW_STYLE_COMMON_PROPS","_tmpTextPositionResult","_tmpBoxPositionResult","normalizeStyle","makeFont","applyTextRotation","placeToken","token","lineTop","tokenStyle","isLineHolder","needDrawBackground","drawBackground","setCtx","getFill","strokeText","fillText","isPlainBg","originalGlobalAlpha","onBgImageLoaded","parsePercent","res","maxValue","lastIndexOf","parseRichText","contentWidth","outerWidth","boxPos","boxX","adjustTextX","boxY","xLeft","xRight","tokens","tokenCount","usedWidth","lineXLeft","lineXRight","drawRichText","renderRichText","needDrawBg","checkCache","cachedByMe","styleFont","propItem","styleProp","ctxProp","textStrokeWidthPrev","strokeWidthChanged","strokeChanged","renderPlainText","colorTool","vmlCore","Z2","initRootElStyle","coordsize","coordorigin","rgb2Str","append","getZIndex","setColorAndOpacity","updateFillAndStroke","vmlEl","zrEl","isFill","createNode","gradientType","focus","expansion","rectWidth","rectHeight","dimension","stops","cs1","cs2","colorAndAlphaList","colorAndAlpha","color1","color2","opacity1","opacity2","method","focusposition","updateFillNode","dashstyle","updateStrokeNode","brushVML","vmlRoot","_vmlEl","needTransform","strokeEl","weight","nPoint","zIndex","removeRectText","onRemove","onAdd","appendRectText","ow","oh","_imageSrc","_imageWidth","_imageHeight","imageRuntimeStyle","runtimeStyle","oldRuntimeWidth","oldRuntimeHeight","sw","sh","hasCrop","doc","vmlElStyle","hasRotation","transformFilter","padding","imageTransformPrefix","imageEl","_imageEl","cropEl","_cropEl","imageELStyle","tmpImage","overflow","cropElStyle","filterStr","textMeasureEl","fontStyleCache","fontStyleCacheCount","fontEl","body","offsetWidth","fromTextEl","textLine","align","verticalAlign","fontString","variant","fontVariant","size","family","getFontStyle","textPathEl","skewEl","textVmlEl","_textVmlEl","textpathok","to","coords","textVmlElStyle","toFixed","string","String","proto","_curve","someVectorAt","isTangent","cpx2","cpy2","cpx1","cpy1","pointAt","tangentAt","ox","oy","timsort","shapeCompareFunc","_roots","_displayList","_displayListLen","getDisplayList","includeIgnore","updateDisplayList","displayList","_updateAndAddDisplayable","ignore","beforeUpdate","afterUpdate","userSetClipPath","currentClipPath","parentClipPath","isGroup","_children","__storage","addChildrenToStorage","delChildrenFromStorage","_renderList","displayableSortFunc","GradientManager","addWithoutUpdate","svgElement","fillOrStroke","hex","ShadowManager","hasShadow","_shadowDom","_shadowDomId","domChild","blur","stdDeviation","Animatable","animators","animateTo","animatable","reverse","stopAnimation","animateToShallow","objShallow","propertyCount","setAttrByPath","animatingShape","pathSplitted","animateFrom","subPixelOptimizeOutputShape","Draggable","_dragStart","_drag","_dragEnd","param","topTarget","draggingTarget","_draggingTarget","_x","_y","dispatchToElement","drift","dropTarget","lastDropTarget","_dropTarget","pathContain","pathProxyForDraw","strokeContainThreshold","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","_fillGradient","_strokeGradient","ctxLineDash","shapeCfg","inBundle","needsUpdateRect","rectWithStroke","_rectWithStroke","lineScale","dirtyPath","__clipTarget","animateShape","Sub","defaultShape","thisShape","mouseHandlerNames","pointerEventNameMap","_event","globalEventSupported","localNativeListenerNames","pointerdown","pointerup","pointermove","pointerout","mouse","pointer","nm","globalNativeListenerNames","eventNameFix","isPointerFromTouch","pointerType","markTouch","zrByTouch","isLocalEl","instance","elTmp","isLocal","domBelongToZr","painterRoot","FakeGlobalEvent","currentTarget","fakeGlobalEventProto","stopImmediatePropagation","localDOMHandlers","mousedown","_mayPointerCapture","mousemove","downPoint","togglePointerCapture","mouseup","mouseout","_pointerCapturing","zrEventControl","toElement","relatedTarget","zrIsToLocalDOM","touchstart","_lastTouchMoment","processGesture","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","scope","domHandlers","nativeEventName","mountSingleDOMEventListener","touching","touchTimer","clearTimeout","setTouchTimer","mountGlobalDOMEventListeners","mount","normalizeGlobalEvent","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","isPointerCapturing","globalHandlerScope","_globalHandlerScope","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","handlerDomProxyProto","setCursor","eventTool","stopEvent","EmptyProxy","handlerNames","proxy","_hovered","_lastX","_lastY","_gestureMgr","setHandlerProxy","isHover","isOutsideBoundary","handlerInstance","isOutside","lastHovered","lastHoveredTarget","hovered","hoveredTarget","eventControl","dispatch","eventArgs","targetInfo","eventPacket","eveType","gestureEvent","makeEventPacket","eachOtherLayer","layer","exclude","hoverCheckResult","gestureMgr","_downEl","_downPoint","_upEl","doCreateNode","urn","win","vmlInited","namespaces","zrvml","initVML","styleSheets","createStyleSheet","addRule","paths","_updatePathDirty","LinkedList","head","tail","linkedListProto","insert","entry","Entry","insertEntry","maxSize","_list","_map","_maxSize","_lastRemovedEntry","LRUProto","leastUsedEntry","hide","show","removeClipPath","cubic","quadratic","windingCubic","nRoots","y0_","y1_","nExtrema","unit","windingQuadratic","y_","windingArc","containPath","isStroke","parseInt10","checkParentAvailable","insertAfter","prevSibling","prepend","SVGPainter","_opts","svgDom","bgRoot","gradientManager","clipPathManager","shadowManager","viewport","_svgDom","_backgroundRoot","_viewport","_visibleList","getType","getSvgDom","getSvgRoot","getViewportRootOffset","viewportRoot","_paintList","_backgroundNode","bgNode","visibleList","listLen","newVisibleList","prevSvgElement","item","textSvgElement","_getDefs","display","_getSize","_width","_height","viewportStyle","whIdx","wh","cwh","plt","prb","defaultView","getComputedStyle","toDataURL","encodeURIComponent","outerHTML","repeat","createPattern","RadialGradient","idStart","childAt","childOfName","childCount","_doAdd","addBefore","removeAll","eachChild","includeChildren","tmpMat","end","extremity","xDim","yDim","fromPoints","tx","ty","vec2Min","vec2Max","textWidthCache","textWidthCacheCounter","STYLE_REG","measureText","halfHeight","truncateText","containerWidth","ellipsis","prepareTruncateOptions","truncateSingleLine","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","ellipsisWidth","subLength","estimateLength","charCode","charCodeAt","getLineHeight","truncOuterHeight","truncOuterWidth","matchedIndex","index","pushTokens","substring","contentHeight","pendingList","stlPadding","truncateWidth","truncateHeight","tokenHeight","tokenWidth","tokenWidthNotSpecified","percentWidth","bgImg","paddingW","remianTruncWidth","block","isEmptyStr","strs","tokensLen","getRichTextRect","getPlainTextRect","adjustTextPositionOnRect","VMLPainter","vmlViewport","_vmlRoot","_vmlViewport","_firstPaint","__alreadyNotVisible","_getWidth","_getHeight","vmlViewportStyle","currentStyle","clientWidth","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","viewRect","singleCanvas","_singleCanvas","rootStyle","zlevelList","_zlevelList","layers","_layers","_layerConfig","_needsManuallyCompositing","mainLayer","__builtin__","_domRoot","domRoot","createRoot","_hoverlayer","_hoverElements","isSingleCanvas","paintAll","_redrawId","random","_backgroundColor","hoverStyle","__hoverMir","__from","hoverElements","hoverLayer","getLayer","originalEl","_doPaintEl","getHoverLayer","redrawId","_updateLayerStatus","finished","_doPaintList","_compositeManually","eachBuiltinLayer","virtual","layerList","zi","useTimer","now","startTime","firstEl","prevElClipPaths","draw","currentLayer","forcePaint","isDisplayableCulled","prevClipPaths","isClipPathChanged","doClip","insertLayer","layersMap","prevLayer","isLayerValid","prevDom","eachLayer","getLayers","updatePrevLayer","prevZlevel","incrementalLayerCount","_clearLayer","layerConfig","_zlevel","delLayer","_progressiveLayers","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","renderToCanvas","shadowBlurSize","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","imgShape","mathAtan2"],"mappings":"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","file":"js/npm.zrender.5f2a23fc.js","sourcesContent":["// https://github.com/mziccard/node-timsort\nvar DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nvar DEFAULT_TMP_STORAGE_LENGTH = 256;\n\nfunction minRunLength(n) {\n  var r = 0;\n\n  while (n >= DEFAULT_MIN_MERGE) {\n    r |= n & 1;\n    n >>= 1;\n  }\n\n  return n + r;\n}\n\nfunction makeAscendingRun(array, lo, hi, compare) {\n  var runHi = lo + 1;\n\n  if (runHi === hi) {\n    return 1;\n  }\n\n  if (compare(array[runHi++], array[lo]) < 0) {\n    while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n      runHi++;\n    }\n\n    reverseRun(array, lo, runHi);\n  } else {\n    while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n      runHi++;\n    }\n  }\n\n  return runHi - lo;\n}\n\nfunction reverseRun(array, lo, hi) {\n  hi--;\n\n  while (lo < hi) {\n    var t = array[lo];\n    array[lo++] = array[hi];\n    array[hi--] = t;\n  }\n}\n\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n  if (start === lo) {\n    start++;\n  }\n\n  for (; start < hi; start++) {\n    var pivot = array[start];\n    var left = lo;\n    var right = start;\n    var mid;\n\n    while (left < right) {\n      mid = left + right >>> 1;\n\n      if (compare(pivot, array[mid]) < 0) {\n        right = mid;\n      } else {\n        left = mid + 1;\n      }\n    }\n\n    var n = start - left;\n\n    switch (n) {\n      case 3:\n        array[left + 3] = array[left + 2];\n\n      case 2:\n        array[left + 2] = array[left + 1];\n\n      case 1:\n        array[left + 1] = array[left];\n        break;\n\n      default:\n        while (n > 0) {\n          array[left + n] = array[left + n - 1];\n          n--;\n        }\n\n    }\n\n    array[left] = pivot;\n  }\n}\n\nfunction gallopLeft(value, array, start, length, hint, compare) {\n  var lastOffset = 0;\n  var maxOffset = 0;\n  var offset = 1;\n\n  if (compare(value, array[start + hint]) > 0) {\n    maxOffset = length - hint;\n\n    while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    lastOffset += hint;\n    offset += hint;\n  } else {\n    maxOffset = hint + 1;\n\n    while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    var tmp = lastOffset;\n    lastOffset = hint - offset;\n    offset = hint - tmp;\n  }\n\n  lastOffset++;\n\n  while (lastOffset < offset) {\n    var m = lastOffset + (offset - lastOffset >>> 1);\n\n    if (compare(value, array[start + m]) > 0) {\n      lastOffset = m + 1;\n    } else {\n      offset = m;\n    }\n  }\n\n  return offset;\n}\n\nfunction gallopRight(value, array, start, length, hint, compare) {\n  var lastOffset = 0;\n  var maxOffset = 0;\n  var offset = 1;\n\n  if (compare(value, array[start + hint]) < 0) {\n    maxOffset = hint + 1;\n\n    while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    var tmp = lastOffset;\n    lastOffset = hint - offset;\n    offset = hint - tmp;\n  } else {\n    maxOffset = length - hint;\n\n    while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    lastOffset += hint;\n    offset += hint;\n  }\n\n  lastOffset++;\n\n  while (lastOffset < offset) {\n    var m = lastOffset + (offset - lastOffset >>> 1);\n\n    if (compare(value, array[start + m]) < 0) {\n      offset = m;\n    } else {\n      lastOffset = m + 1;\n    }\n  }\n\n  return offset;\n}\n\nfunction TimSort(array, compare) {\n  var minGallop = DEFAULT_MIN_GALLOPING;\n  var length = 0;\n  var tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n  var stackLength = 0;\n  var runStart;\n  var runLength;\n  var stackSize = 0;\n  length = array.length;\n\n  if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n    tmpStorageLength = length >>> 1;\n  }\n\n  var tmp = [];\n  stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n  runStart = [];\n  runLength = [];\n\n  function pushRun(_runStart, _runLength) {\n    runStart[stackSize] = _runStart;\n    runLength[stackSize] = _runLength;\n    stackSize += 1;\n  }\n\n  function mergeRuns() {\n    while (stackSize > 1) {\n      var n = stackSize - 2;\n\n      if (n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1] || n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1]) {\n        if (runLength[n - 1] < runLength[n + 1]) {\n          n--;\n        }\n      } else if (runLength[n] > runLength[n + 1]) {\n        break;\n      }\n\n      mergeAt(n);\n    }\n  }\n\n  function forceMergeRuns() {\n    while (stackSize > 1) {\n      var n = stackSize - 2;\n\n      if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n        n--;\n      }\n\n      mergeAt(n);\n    }\n  }\n\n  function mergeAt(i) {\n    var start1 = runStart[i];\n    var length1 = runLength[i];\n    var start2 = runStart[i + 1];\n    var length2 = runLength[i + 1];\n    runLength[i] = length1 + length2;\n\n    if (i === stackSize - 3) {\n      runStart[i + 1] = runStart[i + 2];\n      runLength[i + 1] = runLength[i + 2];\n    }\n\n    stackSize--;\n    var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n    start1 += k;\n    length1 -= k;\n\n    if (length1 === 0) {\n      return;\n    }\n\n    length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n\n    if (length2 === 0) {\n      return;\n    }\n\n    if (length1 <= length2) {\n      mergeLow(start1, length1, start2, length2);\n    } else {\n      mergeHigh(start1, length1, start2, length2);\n    }\n  }\n\n  function mergeLow(start1, length1, start2, length2) {\n    var i = 0;\n\n    for (i = 0; i < length1; i++) {\n      tmp[i] = array[start1 + i];\n    }\n\n    var cursor1 = 0;\n    var cursor2 = start2;\n    var dest = start1;\n    array[dest++] = array[cursor2++];\n\n    if (--length2 === 0) {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n\n      return;\n    }\n\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n\n      array[dest + length2] = tmp[cursor1];\n      return;\n    }\n\n    var _minGallop = minGallop;\n    var count1;\n    var count2;\n    var exit;\n\n    while (1) {\n      count1 = 0;\n      count2 = 0;\n      exit = false;\n\n      do {\n        if (compare(array[cursor2], tmp[cursor1]) < 0) {\n          array[dest++] = array[cursor2++];\n          count2++;\n          count1 = 0;\n\n          if (--length2 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest++] = tmp[cursor1++];\n          count1++;\n          count2 = 0;\n\n          if (--length1 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < _minGallop);\n\n      if (exit) {\n        break;\n      }\n\n      do {\n        count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n\n        if (count1 !== 0) {\n          for (i = 0; i < count1; i++) {\n            array[dest + i] = tmp[cursor1 + i];\n          }\n\n          dest += count1;\n          cursor1 += count1;\n          length1 -= count1;\n\n          if (length1 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest++] = array[cursor2++];\n\n        if (--length2 === 0) {\n          exit = true;\n          break;\n        }\n\n        count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n\n        if (count2 !== 0) {\n          for (i = 0; i < count2; i++) {\n            array[dest + i] = array[cursor2 + i];\n          }\n\n          dest += count2;\n          cursor2 += count2;\n          length2 -= count2;\n\n          if (length2 === 0) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest++] = tmp[cursor1++];\n\n        if (--length1 === 1) {\n          exit = true;\n          break;\n        }\n\n        _minGallop--;\n      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n      if (exit) {\n        break;\n      }\n\n      if (_minGallop < 0) {\n        _minGallop = 0;\n      }\n\n      _minGallop += 2;\n    }\n\n    minGallop = _minGallop;\n    minGallop < 1 && (minGallop = 1);\n\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n\n      array[dest + length2] = tmp[cursor1];\n    } else if (length1 === 0) {\n      throw new Error(); // throw new Error('mergeLow preconditions were not respected');\n    } else {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n    }\n  }\n\n  function mergeHigh(start1, length1, start2, length2) {\n    var i = 0;\n\n    for (i = 0; i < length2; i++) {\n      tmp[i] = array[start2 + i];\n    }\n\n    var cursor1 = start1 + length1 - 1;\n    var cursor2 = length2 - 1;\n    var dest = start2 + length2 - 1;\n    var customCursor = 0;\n    var customDest = 0;\n    array[dest--] = array[cursor1--];\n\n    if (--length1 === 0) {\n      customCursor = dest - (length2 - 1);\n\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n\n      return;\n    }\n\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n\n      array[dest] = tmp[cursor2];\n      return;\n    }\n\n    var _minGallop = minGallop;\n\n    while (true) {\n      var count1 = 0;\n      var count2 = 0;\n      var exit = false;\n\n      do {\n        if (compare(tmp[cursor2], array[cursor1]) < 0) {\n          array[dest--] = array[cursor1--];\n          count1++;\n          count2 = 0;\n\n          if (--length1 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest--] = tmp[cursor2--];\n          count2++;\n          count1 = 0;\n\n          if (--length2 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < _minGallop);\n\n      if (exit) {\n        break;\n      }\n\n      do {\n        count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n\n        if (count1 !== 0) {\n          dest -= count1;\n          cursor1 -= count1;\n          length1 -= count1;\n          customDest = dest + 1;\n          customCursor = cursor1 + 1;\n\n          for (i = count1 - 1; i >= 0; i--) {\n            array[customDest + i] = array[customCursor + i];\n          }\n\n          if (length1 === 0) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest--] = tmp[cursor2--];\n\n        if (--length2 === 1) {\n          exit = true;\n          break;\n        }\n\n        count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n\n        if (count2 !== 0) {\n          dest -= count2;\n          cursor2 -= count2;\n          length2 -= count2;\n          customDest = dest + 1;\n          customCursor = cursor2 + 1;\n\n          for (i = 0; i < count2; i++) {\n            array[customDest + i] = tmp[customCursor + i];\n          }\n\n          if (length2 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest--] = array[cursor1--];\n\n        if (--length1 === 0) {\n          exit = true;\n          break;\n        }\n\n        _minGallop--;\n      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n      if (exit) {\n        break;\n      }\n\n      if (_minGallop < 0) {\n        _minGallop = 0;\n      }\n\n      _minGallop += 2;\n    }\n\n    minGallop = _minGallop;\n\n    if (minGallop < 1) {\n      minGallop = 1;\n    }\n\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n\n      array[dest] = tmp[cursor2];\n    } else if (length2 === 0) {\n      throw new Error(); // throw new Error('mergeHigh preconditions were not respected');\n    } else {\n      customCursor = dest - (length2 - 1);\n\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n    }\n  }\n\n  this.mergeRuns = mergeRuns;\n  this.forceMergeRuns = forceMergeRuns;\n  this.pushRun = pushRun;\n}\n\nfunction sort(array, compare, lo, hi) {\n  if (!lo) {\n    lo = 0;\n  }\n\n  if (!hi) {\n    hi = array.length;\n  }\n\n  var remaining = hi - lo;\n\n  if (remaining < 2) {\n    return;\n  }\n\n  var runLength = 0;\n\n  if (remaining < DEFAULT_MIN_MERGE) {\n    runLength = makeAscendingRun(array, lo, hi, compare);\n    binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n    return;\n  }\n\n  var ts = new TimSort(array, compare);\n  var minRun = minRunLength(remaining);\n\n  do {\n    runLength = makeAscendingRun(array, lo, hi, compare);\n\n    if (runLength < minRun) {\n      var force = remaining;\n\n      if (force > minRun) {\n        force = minRun;\n      }\n\n      binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n      runLength = force;\n    }\n\n    ts.pushRun(lo, runLength);\n    ts.mergeRuns();\n    remaining -= runLength;\n    lo += runLength;\n  } while (remaining !== 0);\n\n  ts.forceMergeRuns();\n}\n\nmodule.exports = sort;","var windingLine = require(\"./windingLine\");\n\nvar EPSILON = 1e-8;\n\nfunction isAroundEqual(a, b) {\n  return Math.abs(a - b) < EPSILON;\n}\n\nfunction contain(points, x, y) {\n  var w = 0;\n  var p = points[0];\n\n  if (!p) {\n    return false;\n  }\n\n  for (var i = 1; i < points.length; i++) {\n    var p2 = points[i];\n    w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n    p = p2;\n  } // Close polygon\n\n\n  var p0 = points[0];\n\n  if (!isAroundEqual(p[0], p0[0]) || !isAroundEqual(p[1], p0[1])) {\n    w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n  }\n\n  return w !== 0;\n}\n\nexports.contain = contain;","var Clip = require(\"./Clip\");\n\nvar color = require(\"../tool/color\");\n\nvar _util = require(\"../core/util\");\n\nvar isArrayLike = _util.isArrayLike;\n\n/**\n * @module echarts/animation/Animator\n */\nvar arraySlice = Array.prototype.slice;\n\nfunction defaultGetter(target, key) {\n  return target[key];\n}\n\nfunction defaultSetter(target, key, value) {\n  target[key] = value;\n}\n/**\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} percent\n * @return {number}\n */\n\n\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * @param  {string} p0\n * @param  {string} p1\n * @param  {number} percent\n * @return {string}\n */\n\n\nfunction interpolateString(p0, p1, percent) {\n  return percent > 0.5 ? p1 : p0;\n}\n/**\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {number} percent\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction interpolateArray(p0, p1, percent, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n  } else {\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n      }\n    }\n  }\n} // arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\n\n\nfunction fillArr(arr0, arr1, arrDim) {\n  var arr0Len = arr0.length;\n  var arr1Len = arr1.length;\n\n  if (arr0Len !== arr1Len) {\n    // FIXME Not work for TypedArray\n    var isPreviousLarger = arr0Len > arr1Len;\n\n    if (isPreviousLarger) {\n      // Cut the previous\n      arr0.length = arr1Len;\n    } else {\n      // Fill the previous\n      for (var i = arr0Len; i < arr1Len; i++) {\n        arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n      }\n    }\n  } // Handling NaN value\n\n\n  var len2 = arr0[0] && arr0[0].length;\n\n  for (var i = 0; i < arr0.length; i++) {\n    if (arrDim === 1) {\n      if (isNaN(arr0[i])) {\n        arr0[i] = arr1[i];\n      }\n    } else {\n      for (var j = 0; j < len2; j++) {\n        if (isNaN(arr0[i][j])) {\n          arr0[i][j] = arr1[i][j];\n        }\n      }\n    }\n  }\n}\n/**\n * @param  {Array} arr0\n * @param  {Array} arr1\n * @param  {number} arrDim\n * @return {boolean}\n */\n\n\nfunction isArraySame(arr0, arr1, arrDim) {\n  if (arr0 === arr1) {\n    return true;\n  }\n\n  var len = arr0.length;\n\n  if (len !== arr1.length) {\n    return false;\n  }\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      if (arr0[i] !== arr1[i]) {\n        return false;\n      }\n    }\n  } else {\n    var len2 = arr0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        if (arr0[i][j] !== arr1[i][j]) {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n/**\n * Catmull Rom interpolate array\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {Array} p2\n * @param  {Array} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction catmullRomInterpolateArray(p0, p1, p2, p3, t, t2, t3, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\n    }\n  } else {\n    var len2 = p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\n      }\n    }\n  }\n}\n/**\n * Catmull Rom interpolate number\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @return {number}\n */\n\n\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n\nfunction cloneValue(value) {\n  if (isArrayLike(value)) {\n    var len = value.length;\n\n    if (isArrayLike(value[0])) {\n      var ret = [];\n\n      for (var i = 0; i < len; i++) {\n        ret.push(arraySlice.call(value[i]));\n      }\n\n      return ret;\n    }\n\n    return arraySlice.call(value);\n  }\n\n  return value;\n}\n\nfunction rgba2String(rgba) {\n  rgba[0] = Math.floor(rgba[0]);\n  rgba[1] = Math.floor(rgba[1]);\n  rgba[2] = Math.floor(rgba[2]);\n  return 'rgba(' + rgba.join(',') + ')';\n}\n\nfunction getArrayDim(keyframes) {\n  var lastValue = keyframes[keyframes.length - 1].value;\n  return isArrayLike(lastValue && lastValue[0]) ? 2 : 1;\n}\n\nfunction createTrackClip(animator, easing, oneTrackDone, keyframes, propName, forceAnimate) {\n  var getter = animator._getter;\n  var setter = animator._setter;\n  var useSpline = easing === 'spline';\n  var trackLen = keyframes.length;\n\n  if (!trackLen) {\n    return;\n  } // Guess data type\n\n\n  var firstVal = keyframes[0].value;\n  var isValueArray = isArrayLike(firstVal);\n  var isValueColor = false;\n  var isValueString = false; // For vertices morphing\n\n  var arrDim = isValueArray ? getArrayDim(keyframes) : 0;\n  var trackMaxTime; // Sort keyframe as ascending\n\n  keyframes.sort(function (a, b) {\n    return a.time - b.time;\n  });\n  trackMaxTime = keyframes[trackLen - 1].time; // Percents of each keyframe\n\n  var kfPercents = []; // Value of each keyframe\n\n  var kfValues = [];\n  var prevValue = keyframes[0].value;\n  var isAllValueEqual = true;\n\n  for (var i = 0; i < trackLen; i++) {\n    kfPercents.push(keyframes[i].time / trackMaxTime); // Assume value is a color when it is a string\n\n    var value = keyframes[i].value; // Check if value is equal, deep check if value is array\n\n    if (!(isValueArray && isArraySame(value, prevValue, arrDim) || !isValueArray && value === prevValue)) {\n      isAllValueEqual = false;\n    }\n\n    prevValue = value; // Try converting a string to a color array\n\n    if (typeof value === 'string') {\n      var colorArray = color.parse(value);\n\n      if (colorArray) {\n        value = colorArray;\n        isValueColor = true;\n      } else {\n        isValueString = true;\n      }\n    }\n\n    kfValues.push(value);\n  }\n\n  if (!forceAnimate && isAllValueEqual) {\n    return;\n  }\n\n  var lastValue = kfValues[trackLen - 1]; // Polyfill array and NaN value\n\n  for (var i = 0; i < trackLen - 1; i++) {\n    if (isValueArray) {\n      fillArr(kfValues[i], lastValue, arrDim);\n    } else {\n      if (isNaN(kfValues[i]) && !isNaN(lastValue) && !isValueString && !isValueColor) {\n        kfValues[i] = lastValue;\n      }\n    }\n  }\n\n  isValueArray && fillArr(getter(animator._target, propName), lastValue, arrDim); // Cache the key of last frame to speed up when\n  // animation playback is sequency\n\n  var lastFrame = 0;\n  var lastFramePercent = 0;\n  var start;\n  var w;\n  var p0;\n  var p1;\n  var p2;\n  var p3;\n\n  if (isValueColor) {\n    var rgba = [0, 0, 0, 0];\n  }\n\n  var onframe = function (target, percent) {\n    // Find the range keyframes\n    // kf1-----kf2---------current--------kf3\n    // find kf2 and kf3 and do interpolation\n    var frame; // In the easing function like elasticOut, percent may less than 0\n\n    if (percent < 0) {\n      frame = 0;\n    } else if (percent < lastFramePercent) {\n      // Start from next key\n      // PENDING start from lastFrame ?\n      start = Math.min(lastFrame + 1, trackLen - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (kfPercents[frame] <= percent) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, trackLen - 2);\n    } else {\n      for (frame = lastFrame; frame < trackLen; frame++) {\n        if (kfPercents[frame] > percent) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, trackLen - 2);\n    }\n\n    lastFrame = frame;\n    lastFramePercent = percent;\n    var range = kfPercents[frame + 1] - kfPercents[frame];\n\n    if (range === 0) {\n      return;\n    } else {\n      w = (percent - kfPercents[frame]) / range;\n    }\n\n    if (useSpline) {\n      p1 = kfValues[frame];\n      p0 = kfValues[frame === 0 ? frame : frame - 1];\n      p2 = kfValues[frame > trackLen - 2 ? trackLen - 1 : frame + 1];\n      p3 = kfValues[frame > trackLen - 3 ? trackLen - 1 : frame + 2];\n\n      if (isValueArray) {\n        catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          value = catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(p1, p2, w);\n        } else {\n          value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\n        }\n\n        setter(target, propName, value);\n      }\n    } else {\n      if (isValueArray) {\n        interpolateArray(kfValues[frame], kfValues[frame + 1], w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          interpolateArray(kfValues[frame], kfValues[frame + 1], w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(kfValues[frame], kfValues[frame + 1], w);\n        } else {\n          value = interpolateNumber(kfValues[frame], kfValues[frame + 1], w);\n        }\n\n        setter(target, propName, value);\n      }\n    }\n  };\n\n  var clip = new Clip({\n    target: animator._target,\n    life: trackMaxTime,\n    loop: animator._loop,\n    delay: animator._delay,\n    onframe: onframe,\n    ondestroy: oneTrackDone\n  });\n\n  if (easing && easing !== 'spline') {\n    clip.easing = easing;\n  }\n\n  return clip;\n}\n/**\n * @alias module:zrender/animation/Animator\n * @constructor\n * @param {Object} target\n * @param {boolean} loop\n * @param {Function} getter\n * @param {Function} setter\n */\n\n\nvar Animator = function (target, loop, getter, setter) {\n  this._tracks = {};\n  this._target = target;\n  this._loop = loop || false;\n  this._getter = getter || defaultGetter;\n  this._setter = setter || defaultSetter;\n  this._clipCount = 0;\n  this._delay = 0;\n  this._doneList = [];\n  this._onframeList = [];\n  this._clipList = [];\n};\n\nAnimator.prototype = {\n  /**\n   * Set Animation keyframe\n   * @param  {number} time 关键帧时间，单位是ms\n   * @param  {Object} props 关键帧的属性值，key-value表示\n   * @return {module:zrender/animation/Animator}\n   */\n  when: function (time\n  /* ms */\n  , props) {\n    var tracks = this._tracks;\n\n    for (var propName in props) {\n      if (!props.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      if (!tracks[propName]) {\n        tracks[propName] = []; // Invalid value\n\n        var value = this._getter(this._target, propName);\n\n        if (value == null) {\n          // zrLog('Invalid property ' + propName);\n          continue;\n        } // If time is 0\n        //  Then props is given initialize value\n        // Else\n        //  Initialize value from current prop value\n\n\n        if (time !== 0) {\n          tracks[propName].push({\n            time: 0,\n            value: cloneValue(value)\n          });\n        }\n      }\n\n      tracks[propName].push({\n        time: time,\n        value: props[propName]\n      });\n    }\n\n    return this;\n  },\n\n  /**\n   * 添加动画每一帧的回调函数\n   * @param  {Function} callback\n   * @return {module:zrender/animation/Animator}\n   */\n  during: function (callback) {\n    this._onframeList.push(callback);\n\n    return this;\n  },\n  pause: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].pause();\n    }\n\n    this._paused = true;\n  },\n  resume: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].resume();\n    }\n\n    this._paused = false;\n  },\n  isPaused: function () {\n    return !!this._paused;\n  },\n  _doneCallback: function () {\n    // Clear all tracks\n    this._tracks = {}; // Clear all clips\n\n    this._clipList.length = 0;\n    var doneList = this._doneList;\n    var len = doneList.length;\n\n    for (var i = 0; i < len; i++) {\n      doneList[i].call(this);\n    }\n  },\n\n  /**\n   * Start the animation\n   * @param  {string|Function} [easing]\n   *         动画缓动函数，详见{@link module:zrender/animation/easing}\n   * @param  {boolean} forceAnimate\n   * @return {module:zrender/animation/Animator}\n   */\n  start: function (easing, forceAnimate) {\n    var self = this;\n    var clipCount = 0;\n\n    var oneTrackDone = function () {\n      clipCount--;\n\n      if (!clipCount) {\n        self._doneCallback();\n      }\n    };\n\n    var lastClip;\n\n    for (var propName in this._tracks) {\n      if (!this._tracks.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      var clip = createTrackClip(this, easing, oneTrackDone, this._tracks[propName], propName, forceAnimate);\n\n      if (clip) {\n        this._clipList.push(clip);\n\n        clipCount++; // If start after added to animation\n\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n\n        lastClip = clip;\n      }\n    } // Add during callback on the last clip\n\n\n    if (lastClip) {\n      var oldOnFrame = lastClip.onframe;\n\n      lastClip.onframe = function (target, percent) {\n        oldOnFrame(target, percent);\n\n        for (var i = 0; i < self._onframeList.length; i++) {\n          self._onframeList[i](target, percent);\n        }\n      };\n    } // This optimization will help the case that in the upper application\n    // the view may be refreshed frequently, where animation will be\n    // called repeatly but nothing changed.\n\n\n    if (!clipCount) {\n      this._doneCallback();\n    }\n\n    return this;\n  },\n\n  /**\n   * Stop animation\n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stop: function (forwardToLast) {\n    var clipList = this._clipList;\n    var animation = this.animation;\n\n    for (var i = 0; i < clipList.length; i++) {\n      var clip = clipList[i];\n\n      if (forwardToLast) {\n        // Move to last frame before stop\n        clip.onframe(this._target, 1);\n      }\n\n      animation && animation.removeClip(clip);\n    }\n\n    clipList.length = 0;\n  },\n\n  /**\n   * Set when animation delay starts\n   * @param  {number} time 单位ms\n   * @return {module:zrender/animation/Animator}\n   */\n  delay: function (time) {\n    this._delay = time;\n    return this;\n  },\n\n  /**\n   * Add callback for animation end\n   * @param  {Function} cb\n   * @return {module:zrender/animation/Animator}\n   */\n  done: function (cb) {\n    if (cb) {\n      this._doneList.push(cb);\n    }\n\n    return this;\n  },\n\n  /**\n   * @return {Array.<module:zrender/animation/Clip>}\n   */\n  getClips: function () {\n    return this._clipList;\n  }\n};\nvar _default = Animator;\nmodule.exports = _default;","var eventUtil = require(\"./event\");\n\n/**\n * Only implements needed gestures for mobile.\n */\nvar GestureMgr = function () {\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n  this._track = [];\n};\n\nGestureMgr.prototype = {\n  constructor: GestureMgr,\n  recognize: function (event, target, root) {\n    this._doTrack(event, target, root);\n\n    return this._recognize(event);\n  },\n  clear: function () {\n    this._track.length = 0;\n    return this;\n  },\n  _doTrack: function (event, target, root) {\n    var touches = event.touches;\n\n    if (!touches) {\n      return;\n    }\n\n    var trackItem = {\n      points: [],\n      touches: [],\n      target: target,\n      event: event\n    };\n\n    for (var i = 0, len = touches.length; i < len; i++) {\n      var touch = touches[i];\n      var pos = eventUtil.clientToLocal(root, touch, {});\n      trackItem.points.push([pos.zrX, pos.zrY]);\n      trackItem.touches.push(touch);\n    }\n\n    this._track.push(trackItem);\n  },\n  _recognize: function (event) {\n    for (var eventName in recognizers) {\n      if (recognizers.hasOwnProperty(eventName)) {\n        var gestureInfo = recognizers[eventName](this._track, event);\n\n        if (gestureInfo) {\n          return gestureInfo;\n        }\n      }\n    }\n  }\n};\n\nfunction dist(pointPair) {\n  var dx = pointPair[1][0] - pointPair[0][0];\n  var dy = pointPair[1][1] - pointPair[0][1];\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction center(pointPair) {\n  return [(pointPair[0][0] + pointPair[1][0]) / 2, (pointPair[0][1] + pointPair[1][1]) / 2];\n}\n\nvar recognizers = {\n  pinch: function (track, event) {\n    var trackLen = track.length;\n\n    if (!trackLen) {\n      return;\n    }\n\n    var pinchEnd = (track[trackLen - 1] || {}).points;\n    var pinchPre = (track[trackLen - 2] || {}).points || pinchEnd;\n\n    if (pinchPre && pinchPre.length > 1 && pinchEnd && pinchEnd.length > 1) {\n      var pinchScale = dist(pinchEnd) / dist(pinchPre);\n      !isFinite(pinchScale) && (pinchScale = 1);\n      event.pinchScale = pinchScale;\n      var pinchCenter = center(pinchEnd);\n      event.pinchX = pinchCenter[0];\n      event.pinchY = pinchCenter[1];\n      return {\n        type: 'pinch',\n        target: track[0].target,\n        event: event\n      };\n    }\n  } // Only pinch currently.\n\n};\nvar _default = GestureMgr;\nmodule.exports = _default;","// Myers' Diff Algorithm\n// Modified from https://github.com/kpdecker/jsdiff/blob/master/src/diff/base.js\nfunction Diff() {}\n\nDiff.prototype = {\n  diff: function (oldArr, newArr, equals) {\n    if (!equals) {\n      equals = function (a, b) {\n        return a === b;\n      };\n    }\n\n    this.equals = equals;\n    var self = this;\n    oldArr = oldArr.slice();\n    newArr = newArr.slice(); // Allow subclasses to massage the input prior to running\n\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n    var bestPath = [{\n      newPos: -1,\n      components: []\n    }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n    var oldPos = this.extractCommon(bestPath[0], newArr, oldArr, 0);\n\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      var indices = [];\n\n      for (var i = 0; i < newArr.length; i++) {\n        indices.push(i);\n      } // Identity per the equality and tokenizer\n\n\n      return [{\n        indices: indices,\n        count: newArr.length\n      }];\n    } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n    function execEditLength() {\n      for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        var basePath;\n        var addPath = bestPath[diagonalPath - 1];\n        var removePath = bestPath[diagonalPath + 1];\n        var oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        var canAdd = addPath && addPath.newPos + 1 < newLen;\n        var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        } // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n\n\n        if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        oldPos = self.extractCommon(basePath, newArr, oldArr, diagonalPath); // If we have hit the end of both strings, then we are done\n\n        if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n          return buildValues(self, basePath.components, newArr, oldArr);\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    }\n\n    while (editLength <= maxEditLength) {\n      var ret = execEditLength();\n\n      if (ret) {\n        return ret;\n      }\n    }\n  },\n  pushComponent: function (components, added, removed) {\n    var last = components[components.length - 1];\n\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {\n        count: last.count + 1,\n        added: added,\n        removed: removed\n      };\n    } else {\n      components.push({\n        count: 1,\n        added: added,\n        removed: removed\n      });\n    }\n  },\n  extractCommon: function (basePath, newArr, oldArr, diagonalPath) {\n    var newLen = newArr.length;\n    var oldLen = oldArr.length;\n    var newPos = basePath.newPos;\n    var oldPos = newPos - diagonalPath;\n    var commonCount = 0;\n\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newArr[newPos + 1], oldArr[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({\n        count: commonCount\n      });\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n  tokenize: function (value) {\n    return value.slice();\n  },\n  join: function (value) {\n    return value.slice();\n  }\n};\n\nfunction buildValues(diff, components, newArr, oldArr) {\n  var componentPos = 0;\n  var componentLen = components.length;\n  var newPos = 0;\n  var oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      var indices = [];\n\n      for (var i = newPos; i < newPos + component.count; i++) {\n        indices.push(i);\n      }\n\n      component.indices = indices;\n      newPos += component.count; // Common case\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      var indices = [];\n\n      for (var i = oldPos; i < oldPos + component.count; i++) {\n        indices.push(i);\n      }\n\n      component.indices = indices;\n      oldPos += component.count;\n    }\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return {\n    newPos: path.newPos,\n    components: path.components.slice(0)\n  };\n}\n\nvar arrayDiff = new Diff();\n\nfunction _default(oldArr, newArr, callback) {\n  return arrayDiff.diff(oldArr, newArr, callback);\n}\n\nmodule.exports = _default;","var matrix = require(\"../core/matrix\");\n\nvar vector = require(\"../core/vector\");\n\n/**\n * 提供变换扩展\n * @module zrender/mixin/Transformable\n * @author pissang (https://www.github.com/pissang)\n */\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\n\nfunction isNotAroundZero(val) {\n  return val > EPSILON || val < -EPSILON;\n}\n/**\n * @alias module:zrender/mixin/Transformable\n * @constructor\n */\n\n\nvar Transformable = function (opts) {\n  opts = opts || {}; // If there are no given position, rotation, scale\n\n  if (!opts.position) {\n    /**\n     * 平移\n     * @type {Array.<number>}\n     * @default [0, 0]\n     */\n    this.position = [0, 0];\n  }\n\n  if (opts.rotation == null) {\n    /**\n     * 旋转\n     * @type {Array.<number>}\n     * @default 0\n     */\n    this.rotation = 0;\n  }\n\n  if (!opts.scale) {\n    /**\n     * 缩放\n     * @type {Array.<number>}\n     * @default [1, 1]\n     */\n    this.scale = [1, 1];\n  }\n  /**\n   * 旋转和缩放的原点\n   * @type {Array.<number>}\n   * @default null\n   */\n\n\n  this.origin = this.origin || null;\n};\n\nvar transformableProto = Transformable.prototype;\ntransformableProto.transform = null;\n/**\n * 判断是否需要有坐标变换\n * 如果有坐标变换, 则从position, rotation, scale以及父节点的transform计算出自身的transform矩阵\n */\n\ntransformableProto.needLocalTransform = function () {\n  return isNotAroundZero(this.rotation) || isNotAroundZero(this.position[0]) || isNotAroundZero(this.position[1]) || isNotAroundZero(this.scale[0] - 1) || isNotAroundZero(this.scale[1] - 1);\n};\n\nvar scaleTmp = [];\n\ntransformableProto.updateTransform = function () {\n  var parent = this.parent;\n  var parentHasTransform = parent && parent.transform;\n  var needLocalTransform = this.needLocalTransform();\n  var m = this.transform;\n\n  if (!(needLocalTransform || parentHasTransform)) {\n    m && mIdentity(m);\n    return;\n  }\n\n  m = m || matrix.create();\n\n  if (needLocalTransform) {\n    this.getLocalTransform(m);\n  } else {\n    mIdentity(m);\n  } // 应用父节点变换\n\n\n  if (parentHasTransform) {\n    if (needLocalTransform) {\n      matrix.mul(m, parent.transform, m);\n    } else {\n      matrix.copy(m, parent.transform);\n    }\n  } // 保存这个变换矩阵\n\n\n  this.transform = m;\n  var globalScaleRatio = this.globalScaleRatio;\n\n  if (globalScaleRatio != null && globalScaleRatio !== 1) {\n    this.getGlobalScale(scaleTmp);\n    var relX = scaleTmp[0] < 0 ? -1 : 1;\n    var relY = scaleTmp[1] < 0 ? -1 : 1;\n    var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n    var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n    m[0] *= sx;\n    m[1] *= sx;\n    m[2] *= sy;\n    m[3] *= sy;\n  }\n\n  this.invTransform = this.invTransform || matrix.create();\n  matrix.invert(this.invTransform, m);\n};\n\ntransformableProto.getLocalTransform = function (m) {\n  return Transformable.getLocalTransform(this, m);\n};\n/**\n * 将自己的transform应用到context上\n * @param {CanvasRenderingContext2D} ctx\n */\n\n\ntransformableProto.setTransform = function (ctx) {\n  var m = this.transform;\n  var dpr = ctx.dpr || 1;\n\n  if (m) {\n    ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n  } else {\n    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n  }\n};\n\ntransformableProto.restoreTransform = function (ctx) {\n  var dpr = ctx.dpr || 1;\n  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n};\n\nvar tmpTransform = [];\nvar originTransform = matrix.create();\n\ntransformableProto.setLocalTransform = function (m) {\n  if (!m) {\n    // TODO return or set identity?\n    return;\n  }\n\n  var sx = m[0] * m[0] + m[1] * m[1];\n  var sy = m[2] * m[2] + m[3] * m[3];\n  var position = this.position;\n  var scale = this.scale;\n\n  if (isNotAroundZero(sx - 1)) {\n    sx = Math.sqrt(sx);\n  }\n\n  if (isNotAroundZero(sy - 1)) {\n    sy = Math.sqrt(sy);\n  }\n\n  if (m[0] < 0) {\n    sx = -sx;\n  }\n\n  if (m[3] < 0) {\n    sy = -sy;\n  }\n\n  position[0] = m[4];\n  position[1] = m[5];\n  scale[0] = sx;\n  scale[1] = sy;\n  this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\n};\n/**\n * 分解`transform`矩阵到`position`, `rotation`, `scale`\n */\n\n\ntransformableProto.decomposeTransform = function () {\n  if (!this.transform) {\n    return;\n  }\n\n  var parent = this.parent;\n  var m = this.transform;\n\n  if (parent && parent.transform) {\n    // Get local transform and decompose them to position, scale, rotation\n    matrix.mul(tmpTransform, parent.invTransform, m);\n    m = tmpTransform;\n  }\n\n  var origin = this.origin;\n\n  if (origin && (origin[0] || origin[1])) {\n    originTransform[4] = origin[0];\n    originTransform[5] = origin[1];\n    matrix.mul(tmpTransform, m, originTransform);\n    tmpTransform[4] -= origin[0];\n    tmpTransform[5] -= origin[1];\n    m = tmpTransform;\n  }\n\n  this.setLocalTransform(m);\n};\n/**\n * Get global scale\n * @return {Array.<number>}\n */\n\n\ntransformableProto.getGlobalScale = function (out) {\n  var m = this.transform;\n  out = out || [];\n\n  if (!m) {\n    out[0] = 1;\n    out[1] = 1;\n    return out;\n  }\n\n  out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n  out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n\n  if (m[0] < 0) {\n    out[0] = -out[0];\n  }\n\n  if (m[3] < 0) {\n    out[1] = -out[1];\n  }\n\n  return out;\n};\n/**\n * 变换坐标位置到 shape 的局部坐标空间\n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\n\n\ntransformableProto.transformCoordToLocal = function (x, y) {\n  var v2 = [x, y];\n  var invTransform = this.invTransform;\n\n  if (invTransform) {\n    vector.applyTransform(v2, v2, invTransform);\n  }\n\n  return v2;\n};\n/**\n * 变换局部坐标位置到全局坐标空间\n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\n\n\ntransformableProto.transformCoordToGlobal = function (x, y) {\n  var v2 = [x, y];\n  var transform = this.transform;\n\n  if (transform) {\n    vector.applyTransform(v2, v2, transform);\n  }\n\n  return v2;\n};\n/**\n * @static\n * @param {Object} target\n * @param {Array.<number>} target.origin\n * @param {number} target.rotation\n * @param {Array.<number>} target.position\n * @param {Array.<number>} [m]\n */\n\n\nTransformable.getLocalTransform = function (target, m) {\n  m = m || [];\n  mIdentity(m);\n  var origin = target.origin;\n  var scale = target.scale || [1, 1];\n  var rotation = target.rotation || 0;\n  var position = target.position || [0, 0];\n\n  if (origin) {\n    // Translate to origin\n    m[4] -= origin[0];\n    m[5] -= origin[1];\n  }\n\n  matrix.scale(m, m, scale);\n\n  if (rotation) {\n    matrix.rotate(m, m, rotation);\n  }\n\n  if (origin) {\n    // Translate back from origin\n    m[4] += origin[0];\n    m[5] += origin[1];\n  }\n\n  m[4] += position[0];\n  m[5] += position[1];\n  return m;\n};\n\nvar _default = Transformable;\nmodule.exports = _default;","var Displayable = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar imageHelper = require(\"./helper/image\");\n\n/**\n * @alias zrender/graphic/Image\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nfunction ZImage(opts) {\n  Displayable.call(this, opts);\n}\n\nZImage.prototype = {\n  constructor: ZImage,\n  type: 'image',\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var src = style.image; // Must bind each time\n\n    style.bind(ctx, this, prevEl);\n    var image = this._image = imageHelper.createOrUpdateImage(src, this._image, this, this.onload);\n\n    if (!image || !imageHelper.isImageReady(image)) {\n      return;\n    } // 图片已经加载完成\n    // if (image.nodeName.toUpperCase() == 'IMG') {\n    //     if (!image.complete) {\n    //         return;\n    //     }\n    // }\n    // Else is canvas\n\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = style.width;\n    var height = style.height;\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      // Keep image/height ratio\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    } // 设置transform\n\n\n    this.setTransform(ctx);\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    } // Draw rect text\n\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  getBoundingRect: function () {\n    var style = this.style;\n\n    if (!this._rect) {\n      this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(ZImage, Displayable);\nvar _default = ZImage;\nmodule.exports = _default;","/**\n * 3x2矩阵操作类\n * @exports zrender/tool/matrix\n */\n\n/* global Float32Array */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * Create a identity matrix.\n * @return {Float32Array|Array.<number>}\n */\n\nfunction create() {\n  var out = new ArrayCtor(6);\n  identity(out);\n  return out;\n}\n/**\n * 设置矩阵为单位矩阵\n * @param {Float32Array|Array.<number>} out\n */\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * 复制矩阵\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m\n */\n\n\nfunction copy(out, m) {\n  out[0] = m[0];\n  out[1] = m[1];\n  out[2] = m[2];\n  out[3] = m[3];\n  out[4] = m[4];\n  out[5] = m[5];\n  return out;\n}\n/**\n * 矩阵相乘\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m1\n * @param {Float32Array|Array.<number>} m2\n */\n\n\nfunction mul(out, m1, m2) {\n  // Consider matrix.mul(m, m2, m);\n  // where out is the same as m2.\n  // So use temp variable to escape error.\n  var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n  var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n  var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n  var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n  var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n  var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = out3;\n  out[4] = out4;\n  out[5] = out5;\n  return out;\n}\n/**\n * 平移变换\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction translate(out, a, v) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4] + v[0];\n  out[5] = a[5] + v[1];\n  return out;\n}\n/**\n * 旋转变换\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {number} rad\n */\n\n\nfunction rotate(out, a, rad) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var st = Math.sin(rad);\n  var ct = Math.cos(rad);\n  out[0] = aa * ct + ab * st;\n  out[1] = -aa * st + ab * ct;\n  out[2] = ac * ct + ad * st;\n  out[3] = -ac * st + ct * ad;\n  out[4] = ct * atx + st * aty;\n  out[5] = ct * aty - st * atx;\n  return out;\n}\n/**\n * 缩放变换\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction scale(out, a, v) {\n  var vx = v[0];\n  var vy = v[1];\n  out[0] = a[0] * vx;\n  out[1] = a[1] * vy;\n  out[2] = a[2] * vx;\n  out[3] = a[3] * vy;\n  out[4] = a[4] * vx;\n  out[5] = a[5] * vy;\n  return out;\n}\n/**\n * 求逆矩阵\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n */\n\n\nfunction invert(out, a) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\n * Clone a new matrix.\n * @param {Float32Array|Array.<number>} a\n */\n\n\nfunction clone(a) {\n  var b = create();\n  copy(b, a);\n  return b;\n}\n\nexports.create = create;\nexports.identity = identity;\nexports.copy = copy;\nexports.mul = mul;\nexports.translate = translate;\nexports.rotate = rotate;\nexports.scale = scale;\nexports.invert = invert;\nexports.clone = clone;","var zrUtil = require(\"../core/util\");\n\nvar Style = require(\"./Style\");\n\nvar Element = require(\"../Element\");\n\nvar RectText = require(\"./mixin/RectText\");\n\n/**\n * Base class of all displayable graphic objects\n * @module zrender/graphic/Displayable\n */\n\n/**\n * @alias module:zrender/graphic/Displayable\n * @extends module:zrender/Element\n * @extends module:zrender/graphic/mixin/RectText\n */\nfunction Displayable(opts) {\n  opts = opts || {};\n  Element.call(this, opts); // Extend properties\n\n  for (var name in opts) {\n    if (opts.hasOwnProperty(name) && name !== 'style') {\n      this[name] = opts[name];\n    }\n  }\n  /**\n   * @type {module:zrender/graphic/Style}\n   */\n\n\n  this.style = new Style(opts.style, this);\n  this._rect = null; // Shapes for cascade clipping.\n  // Can only be `null`/`undefined` or an non-empty array, MUST NOT be an empty array.\n  // because it is easy to only using null to check whether clipPaths changed.\n\n  this.__clipPaths = null; // FIXME Stateful must be mixined after style is setted\n  // Stateful.call(this, opts);\n}\n\nDisplayable.prototype = {\n  constructor: Displayable,\n  type: 'displayable',\n\n  /**\n   * Dirty flag. From which painter will determine if this displayable object needs brush.\n   * @name module:zrender/graphic/Displayable#__dirty\n   * @type {boolean}\n   */\n  __dirty: true,\n\n  /**\n   * Whether the displayable object is visible. when it is true, the displayable object\n   * is not drawn, but the mouse event can still trigger the object.\n   * @name module:/zrender/graphic/Displayable#invisible\n   * @type {boolean}\n   * @default false\n   */\n  invisible: false,\n\n  /**\n   * @name module:/zrender/graphic/Displayable#z\n   * @type {number}\n   * @default 0\n   */\n  z: 0,\n\n  /**\n   * @name module:/zrender/graphic/Displayable#z\n   * @type {number}\n   * @default 0\n   */\n  z2: 0,\n\n  /**\n   * The z level determines the displayable object can be drawn in which layer canvas.\n   * @name module:/zrender/graphic/Displayable#zlevel\n   * @type {number}\n   * @default 0\n   */\n  zlevel: 0,\n\n  /**\n   * Whether it can be dragged.\n   * @name module:/zrender/graphic/Displayable#draggable\n   * @type {boolean}\n   * @default false\n   */\n  draggable: false,\n\n  /**\n   * Whether is it dragging.\n   * @name module:/zrender/graphic/Displayable#draggable\n   * @type {boolean}\n   * @default false\n   */\n  dragging: false,\n\n  /**\n   * Whether to respond to mouse events.\n   * @name module:/zrender/graphic/Displayable#silent\n   * @type {boolean}\n   * @default false\n   */\n  silent: false,\n\n  /**\n   * If enable culling\n   * @type {boolean}\n   * @default false\n   */\n  culling: false,\n\n  /**\n   * Mouse cursor when hovered\n   * @name module:/zrender/graphic/Displayable#cursor\n   * @type {string}\n   */\n  cursor: 'pointer',\n\n  /**\n   * If hover area is bounding rect\n   * @name module:/zrender/graphic/Displayable#rectHover\n   * @type {string}\n   */\n  rectHover: false,\n\n  /**\n   * Render the element progressively when the value >= 0,\n   * usefull for large data.\n   * @type {boolean}\n   */\n  progressive: false,\n\n  /**\n   * @type {boolean}\n   */\n  incremental: false,\n\n  /**\n   * Scale ratio for global scale.\n   * @type {boolean}\n   */\n  globalScaleRatio: 1,\n  beforeBrush: function (ctx) {},\n  afterBrush: function (ctx) {},\n\n  /**\n   * Graphic drawing method.\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  // Interface\n  brush: function (ctx, prevEl) {},\n\n  /**\n   * Get the minimum bounding box.\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // Interface\n  getBoundingRect: function () {},\n\n  /**\n   * If displayable element contain coord x, y\n   * @param  {number} x\n   * @param  {number} y\n   * @return {boolean}\n   */\n  contain: function (x, y) {\n    return this.rectContain(x, y);\n  },\n\n  /**\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {\n    cb.call(context, this);\n  },\n\n  /**\n   * If bounding rect of element contain coord x, y\n   * @param  {number} x\n   * @param  {number} y\n   * @return {boolean}\n   */\n  rectContain: function (x, y) {\n    var coord = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    return rect.contain(coord[0], coord[1]);\n  },\n\n  /**\n   * Mark displayable element dirty and refresh next frame\n   */\n  dirty: function () {\n    this.__dirty = this.__dirtyText = true;\n    this._rect = null;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * If displayable object binded any event\n   * @return {boolean}\n   */\n  // TODO, events bound by bind\n  // isSilent: function () {\n  //     return !(\n  //         this.hoverable || this.draggable\n  //         || this.onmousemove || this.onmouseover || this.onmouseout\n  //         || this.onmousedown || this.onmouseup || this.onclick\n  //         || this.ondragenter || this.ondragover || this.ondragleave\n  //         || this.ondrop\n  //     );\n  // },\n\n  /**\n   * Alias for animate('style')\n   * @param {boolean} loop\n   */\n  animateStyle: function (loop) {\n    return this.animate('style', loop);\n  },\n  attrKV: function (key, value) {\n    if (key !== 'style') {\n      Element.prototype.attrKV.call(this, key, value);\n    } else {\n      this.style.set(value);\n    }\n  },\n\n  /**\n   * @param {Object|string} key\n   * @param {*} value\n   */\n  setStyle: function (key, value) {\n    this.style.set(key, value);\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * Use given style object\n   * @param  {Object} obj\n   */\n  useStyle: function (obj) {\n    this.style = new Style(obj, this);\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * The string value of `textPosition` needs to be calculated to a real postion.\n   * For example, `'inside'` is calculated to `[rect.width/2, rect.height/2]`\n   * by default. See `contain/text.js#calculateTextPosition` for more details.\n   * But some coutom shapes like \"pin\", \"flag\" have center that is not exactly\n   * `[width/2, height/2]`. So we provide this hook to customize the calculation\n   * for those shapes. It will be called if the `style.textPosition` is a string.\n   * @param {Obejct} [out] Prepared out object. If not provided, this method should\n   *        be responsible for creating one.\n   * @param {module:zrender/graphic/Style} style\n   * @param {Object} rect {x, y, width, height}\n   * @return {Obejct} out The same as the input out.\n   *         {\n   *             x: number. mandatory.\n   *             y: number. mandatory.\n   *             textAlign: string. optional. use style.textAlign by default.\n   *             textVerticalAlign: string. optional. use style.textVerticalAlign by default.\n   *         }\n   */\n  calculateTextPosition: null\n};\nzrUtil.inherits(Displayable, Element);\nzrUtil.mixin(Displayable, RectText); // zrUtil.mixin(Displayable, Stateful);\n\nvar _default = Displayable;\nmodule.exports = _default;","/**\n * Event Mixin\n * @module zrender/mixin/Eventful\n * @author Kener (@Kener-林峰, kener.linfeng@gmail.com)\n *         pissang (https://www.github.com/pissang)\n */\nvar arrySlice = Array.prototype.slice;\n/**\n * Event dispatcher.\n *\n * @alias module:zrender/mixin/Eventful\n * @constructor\n * @param {Object} [eventProcessor] The object eventProcessor is the scope when\n *        `eventProcessor.xxx` called.\n * @param {Function} [eventProcessor.normalizeQuery]\n *        param: {string|Object} Raw query.\n *        return: {string|Object} Normalized query.\n * @param {Function} [eventProcessor.filter] Event will be dispatched only\n *        if it returns `true`.\n *        param: {string} eventType\n *        param: {string|Object} query\n *        return: {boolean}\n * @param {Function} [eventProcessor.afterTrigger] Called after all handlers called.\n *        param: {string} eventType\n */\n\nvar Eventful = function (eventProcessor) {\n  this._$handlers = {};\n  this._$eventProcessor = eventProcessor;\n};\n\nEventful.prototype = {\n  constructor: Eventful,\n\n  /**\n   * The handler can only be triggered once, then removed.\n   *\n   * @param {string} event The event name.\n   * @param {string|Object} [query] Condition used on event filter.\n   * @param {Function} handler The event handler.\n   * @param {Object} context\n   */\n  one: function (event, query, handler, context) {\n    return on(this, event, query, handler, context, true);\n  },\n\n  /**\n   * Bind a handler.\n   *\n   * @param {string} event The event name.\n   * @param {string|Object} [query] Condition used on event filter.\n   * @param {Function} handler The event handler.\n   * @param {Object} [context]\n   */\n  on: function (event, query, handler, context) {\n    return on(this, event, query, handler, context, false);\n  },\n\n  /**\n   * Whether any handler has bound.\n   *\n   * @param  {string}  event\n   * @return {boolean}\n   */\n  isSilent: function (event) {\n    var _h = this._$handlers;\n    return !_h[event] || !_h[event].length;\n  },\n\n  /**\n   * Unbind a event.\n   *\n   * @param {string} [event] The event name.\n   *        If no `event` input, \"off\" all listeners.\n   * @param {Function} [handler] The event handler.\n   *        If no `handler` input, \"off\" all listeners of the `event`.\n   */\n  off: function (event, handler) {\n    var _h = this._$handlers;\n\n    if (!event) {\n      this._$handlers = {};\n      return this;\n    }\n\n    if (handler) {\n      if (_h[event]) {\n        var newList = [];\n\n        for (var i = 0, l = _h[event].length; i < l; i++) {\n          if (_h[event][i].h !== handler) {\n            newList.push(_h[event][i]);\n          }\n        }\n\n        _h[event] = newList;\n      }\n\n      if (_h[event] && _h[event].length === 0) {\n        delete _h[event];\n      }\n    } else {\n      delete _h[event];\n    }\n\n    return this;\n  },\n\n  /**\n   * Dispatch a event.\n   *\n   * @param {string} type The event name.\n   */\n  trigger: function (type) {\n    var _h = this._$handlers[type];\n    var eventProcessor = this._$eventProcessor;\n\n    if (_h) {\n      var args = arguments;\n      var argLen = args.length;\n\n      if (argLen > 3) {\n        args = arrySlice.call(args, 1);\n      }\n\n      var len = _h.length;\n\n      for (var i = 0; i < len;) {\n        var hItem = _h[i];\n\n        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {\n          i++;\n          continue;\n        } // Optimize advise from backbone\n\n\n        switch (argLen) {\n          case 1:\n            hItem.h.call(hItem.ctx);\n            break;\n\n          case 2:\n            hItem.h.call(hItem.ctx, args[1]);\n            break;\n\n          case 3:\n            hItem.h.call(hItem.ctx, args[1], args[2]);\n            break;\n\n          default:\n            // have more than 2 given arguments\n            hItem.h.apply(hItem.ctx, args);\n            break;\n        }\n\n        if (hItem.one) {\n          _h.splice(i, 1);\n\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n\n    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);\n    return this;\n  },\n\n  /**\n   * Dispatch a event with context, which is specified at the last parameter.\n   *\n   * @param {string} type The event name.\n   */\n  triggerWithContext: function (type) {\n    var _h = this._$handlers[type];\n    var eventProcessor = this._$eventProcessor;\n\n    if (_h) {\n      var args = arguments;\n      var argLen = args.length;\n\n      if (argLen > 4) {\n        args = arrySlice.call(args, 1, args.length - 1);\n      }\n\n      var ctx = args[args.length - 1];\n      var len = _h.length;\n\n      for (var i = 0; i < len;) {\n        var hItem = _h[i];\n\n        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {\n          i++;\n          continue;\n        } // Optimize advise from backbone\n\n\n        switch (argLen) {\n          case 1:\n            hItem.h.call(ctx);\n            break;\n\n          case 2:\n            hItem.h.call(ctx, args[1]);\n            break;\n\n          case 3:\n            hItem.h.call(ctx, args[1], args[2]);\n            break;\n\n          default:\n            // have more than 2 given arguments\n            hItem.h.apply(ctx, args);\n            break;\n        }\n\n        if (hItem.one) {\n          _h.splice(i, 1);\n\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n\n    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);\n    return this;\n  }\n};\n\nfunction normalizeQuery(host, query) {\n  var eventProcessor = host._$eventProcessor;\n\n  if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n    query = eventProcessor.normalizeQuery(query);\n  }\n\n  return query;\n}\n\nfunction on(eventful, event, query, handler, context, isOnce) {\n  var _h = eventful._$handlers;\n\n  if (typeof query === 'function') {\n    context = handler;\n    handler = query;\n    query = null;\n  }\n\n  if (!handler || !event) {\n    return eventful;\n  }\n\n  query = normalizeQuery(eventful, query);\n\n  if (!_h[event]) {\n    _h[event] = [];\n  }\n\n  for (var i = 0; i < _h[event].length; i++) {\n    if (_h[event][i].h === handler) {\n      return eventful;\n    }\n  }\n\n  var wrap = {\n    h: handler,\n    one: isOnce,\n    query: query,\n    ctx: context || eventful,\n    // FIXME\n    // Do not publish this feature util it is proved that it makes sense.\n    callAtLast: handler.zrEventfulCallAtLast\n  };\n  var lastIndex = _h[event].length - 1;\n  var lastWrap = _h[event][lastIndex];\n  lastWrap && lastWrap.callAtLast ? _h[event].splice(lastIndex, 0, wrap) : _h[event].push(wrap);\n  return eventful;\n} // ----------------------\n// The events in zrender\n// ----------------------\n\n/**\n * @event module:zrender/mixin/Eventful#onclick\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseover\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseout\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousemove\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousewheel\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousedown\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseup\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondrag\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragstart\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragend\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragenter\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragleave\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragover\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondrop\n * @type {Function}\n * @default null\n */\n\n\nvar _default = Eventful;\nmodule.exports = _default;","var curve = require(\"./curve\");\n\nvar vec2 = require(\"./vector\");\n\nvar bbox = require(\"./bbox\");\n\nvar BoundingRect = require(\"./BoundingRect\");\n\nvar _config = require(\"../config\");\n\nvar dpr = _config.devicePixelRatio;\n\n/**\n * Path 代理，可以在`buildPath`中用于替代`ctx`, 会保存每个path操作的命令到pathCommands属性中\n * 可以用于 isInsidePath 判断以及获取boundingRect\n *\n * @module zrender/core/PathProxy\n * @author Yi Shen (http://www.github.com/pissang)\n */\n// TODO getTotalLength, getPointAtLength\n\n/* global Float32Array */\nvar CMD = {\n  M: 1,\n  L: 2,\n  C: 3,\n  Q: 4,\n  A: 5,\n  Z: 6,\n  // Rect\n  R: 7\n}; // var CMD_MEM_SIZE = {\n//     M: 3,\n//     L: 3,\n//     C: 7,\n//     Q: 5,\n//     A: 9,\n//     R: 5,\n//     Z: 1\n// };\n\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathSqrt = Math.sqrt;\nvar mathAbs = Math.abs;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\n/**\n * @alias module:zrender/core/PathProxy\n * @constructor\n */\n\nvar PathProxy = function (notSaveData) {\n  this._saveData = !(notSaveData || false);\n\n  if (this._saveData) {\n    /**\n     * Path data. Stored as flat array\n     * @type {Array.<Object>}\n     */\n    this.data = [];\n  }\n\n  this._ctx = null;\n};\n/**\n * 快速计算Path包围盒（并不是最小包围盒）\n * @return {Object}\n */\n\n\nPathProxy.prototype = {\n  constructor: PathProxy,\n  _xi: 0,\n  _yi: 0,\n  _x0: 0,\n  _y0: 0,\n  // Unit x, Unit y. Provide for avoiding drawing that too short line segment\n  _ux: 0,\n  _uy: 0,\n  _len: 0,\n  _lineDash: null,\n  _dashOffset: 0,\n  _dashIdx: 0,\n  _dashSum: 0,\n\n  /**\n   * @readOnly\n   */\n  setScale: function (sx, sy, segmentIgnoreThreshold) {\n    // Compat. Previously there is no segmentIgnoreThreshold.\n    segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n    this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n    this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n  },\n  getContext: function () {\n    return this._ctx;\n  },\n\n  /**\n   * @param  {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  beginPath: function (ctx) {\n    this._ctx = ctx;\n    ctx && ctx.beginPath();\n    ctx && (this.dpr = ctx.dpr); // Reset\n\n    if (this._saveData) {\n      this._len = 0;\n    }\n\n    if (this._lineDash) {\n      this._lineDash = null;\n      this._dashOffset = 0;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param  {number} x\n   * @param  {number} y\n   * @return {module:zrender/core/PathProxy}\n   */\n  moveTo: function (x, y) {\n    this.addData(CMD.M, x, y);\n    this._ctx && this._ctx.moveTo(x, y); // x0, y0, xi, yi 是记录在 _dashedXXXXTo 方法中使用\n    // xi, yi 记录当前点, x0, y0 在 closePath 的时候回到起始点。\n    // 有可能在 beginPath 之后直接调用 lineTo，这时候 x0, y0 需要\n    // 在 lineTo 方法中记录，这里先不考虑这种情况，dashed line 也只在 IE10- 中不支持\n\n    this._x0 = x;\n    this._y0 = y;\n    this._xi = x;\n    this._yi = y;\n    return this;\n  },\n\n  /**\n   * @param  {number} x\n   * @param  {number} y\n   * @return {module:zrender/core/PathProxy}\n   */\n  lineTo: function (x, y) {\n    var exceedUnit = mathAbs(x - this._xi) > this._ux || mathAbs(y - this._yi) > this._uy // Force draw the first segment\n    || this._len < 5;\n    this.addData(CMD.L, x, y);\n\n    if (this._ctx && exceedUnit) {\n      this._needsDash() ? this._dashedLineTo(x, y) : this._ctx.lineTo(x, y);\n    }\n\n    if (exceedUnit) {\n      this._xi = x;\n      this._yi = y;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param  {number} x1\n   * @param  {number} y1\n   * @param  {number} x2\n   * @param  {number} y2\n   * @param  {number} x3\n   * @param  {number} y3\n   * @return {module:zrender/core/PathProxy}\n   */\n  bezierCurveTo: function (x1, y1, x2, y2, x3, y3) {\n    this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n\n    if (this._ctx) {\n      this._needsDash() ? this._dashedBezierTo(x1, y1, x2, y2, x3, y3) : this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n    }\n\n    this._xi = x3;\n    this._yi = y3;\n    return this;\n  },\n\n  /**\n   * @param  {number} x1\n   * @param  {number} y1\n   * @param  {number} x2\n   * @param  {number} y2\n   * @return {module:zrender/core/PathProxy}\n   */\n  quadraticCurveTo: function (x1, y1, x2, y2) {\n    this.addData(CMD.Q, x1, y1, x2, y2);\n\n    if (this._ctx) {\n      this._needsDash() ? this._dashedQuadraticTo(x1, y1, x2, y2) : this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n    }\n\n    this._xi = x2;\n    this._yi = y2;\n    return this;\n  },\n\n  /**\n   * @param  {number} cx\n   * @param  {number} cy\n   * @param  {number} r\n   * @param  {number} startAngle\n   * @param  {number} endAngle\n   * @param  {boolean} anticlockwise\n   * @return {module:zrender/core/PathProxy}\n   */\n  arc: function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n    this.addData(CMD.A, cx, cy, r, r, startAngle, endAngle - startAngle, 0, anticlockwise ? 0 : 1);\n    this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n    this._xi = mathCos(endAngle) * r + cx;\n    this._yi = mathSin(endAngle) * r + cy;\n    return this;\n  },\n  // TODO\n  arcTo: function (x1, y1, x2, y2, radius) {\n    if (this._ctx) {\n      this._ctx.arcTo(x1, y1, x2, y2, radius);\n    }\n\n    return this;\n  },\n  // TODO\n  rect: function (x, y, w, h) {\n    this._ctx && this._ctx.rect(x, y, w, h);\n    this.addData(CMD.R, x, y, w, h);\n    return this;\n  },\n\n  /**\n   * @return {module:zrender/core/PathProxy}\n   */\n  closePath: function () {\n    this.addData(CMD.Z);\n    var ctx = this._ctx;\n    var x0 = this._x0;\n    var y0 = this._y0;\n\n    if (ctx) {\n      this._needsDash() && this._dashedLineTo(x0, y0);\n      ctx.closePath();\n    }\n\n    this._xi = x0;\n    this._yi = y0;\n    return this;\n  },\n\n  /**\n   * Context 从外部传入，因为有可能是 rebuildPath 完之后再 fill。\n   * stroke 同样\n   * @param {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  fill: function (ctx) {\n    ctx && ctx.fill();\n    this.toStatic();\n  },\n\n  /**\n   * @param {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  stroke: function (ctx) {\n    ctx && ctx.stroke();\n    this.toStatic();\n  },\n\n  /**\n   * 必须在其它绘制命令前调用\n   * Must be invoked before all other path drawing methods\n   * @return {module:zrender/core/PathProxy}\n   */\n  setLineDash: function (lineDash) {\n    if (lineDash instanceof Array) {\n      this._lineDash = lineDash;\n      this._dashIdx = 0;\n      var lineDashSum = 0;\n\n      for (var i = 0; i < lineDash.length; i++) {\n        lineDashSum += lineDash[i];\n      }\n\n      this._dashSum = lineDashSum;\n    }\n\n    return this;\n  },\n\n  /**\n   * 必须在其它绘制命令前调用\n   * Must be invoked before all other path drawing methods\n   * @return {module:zrender/core/PathProxy}\n   */\n  setLineDashOffset: function (offset) {\n    this._dashOffset = offset;\n    return this;\n  },\n\n  /**\n   *\n   * @return {boolean}\n   */\n  len: function () {\n    return this._len;\n  },\n\n  /**\n   * 直接设置 Path 数据\n   */\n  setData: function (data) {\n    var len = data.length;\n\n    if (!(this.data && this.data.length === len) && hasTypedArray) {\n      this.data = new Float32Array(len);\n    }\n\n    for (var i = 0; i < len; i++) {\n      this.data[i] = data[i];\n    }\n\n    this._len = len;\n  },\n\n  /**\n   * 添加子路径\n   * @param {module:zrender/core/PathProxy|Array.<module:zrender/core/PathProxy>} path\n   */\n  appendPath: function (path) {\n    if (!(path instanceof Array)) {\n      path = [path];\n    }\n\n    var len = path.length;\n    var appendSize = 0;\n    var offset = this._len;\n\n    for (var i = 0; i < len; i++) {\n      appendSize += path[i].len();\n    }\n\n    if (hasTypedArray && this.data instanceof Float32Array) {\n      this.data = new Float32Array(offset + appendSize);\n    }\n\n    for (var i = 0; i < len; i++) {\n      var appendPathData = path[i].data;\n\n      for (var k = 0; k < appendPathData.length; k++) {\n        this.data[offset++] = appendPathData[k];\n      }\n    }\n\n    this._len = offset;\n  },\n\n  /**\n   * 填充 Path 数据。\n   * 尽量复用而不申明新的数组。大部分图形重绘的指令数据长度都是不变的。\n   */\n  addData: function (cmd) {\n    if (!this._saveData) {\n      return;\n    }\n\n    var data = this.data;\n\n    if (this._len + arguments.length > data.length) {\n      // 因为之前的数组已经转换成静态的 Float32Array\n      // 所以不够用时需要扩展一个新的动态数组\n      this._expandData();\n\n      data = this.data;\n    }\n\n    for (var i = 0; i < arguments.length; i++) {\n      data[this._len++] = arguments[i];\n    }\n\n    this._prevCmd = cmd;\n  },\n  _expandData: function () {\n    // Only if data is Float32Array\n    if (!(this.data instanceof Array)) {\n      var newData = [];\n\n      for (var i = 0; i < this._len; i++) {\n        newData[i] = this.data[i];\n      }\n\n      this.data = newData;\n    }\n  },\n\n  /**\n   * If needs js implemented dashed line\n   * @return {boolean}\n   * @private\n   */\n  _needsDash: function () {\n    return this._lineDash;\n  },\n  _dashedLineTo: function (x1, y1) {\n    var dashSum = this._dashSum;\n    var offset = this._dashOffset;\n    var lineDash = this._lineDash;\n    var ctx = this._ctx;\n    var x0 = this._xi;\n    var y0 = this._yi;\n    var dx = x1 - x0;\n    var dy = y1 - y0;\n    var dist = mathSqrt(dx * dx + dy * dy);\n    var x = x0;\n    var y = y0;\n    var dash;\n    var nDash = lineDash.length;\n    var idx;\n    dx /= dist;\n    dy /= dist;\n\n    if (offset < 0) {\n      // Convert to positive offset\n      offset = dashSum + offset;\n    }\n\n    offset %= dashSum;\n    x -= offset * dx;\n    y -= offset * dy;\n\n    while (dx > 0 && x <= x1 || dx < 0 && x >= x1 || dx === 0 && (dy > 0 && y <= y1 || dy < 0 && y >= y1)) {\n      idx = this._dashIdx;\n      dash = lineDash[idx];\n      x += dx * dash;\n      y += dy * dash;\n      this._dashIdx = (idx + 1) % nDash; // Skip positive offset\n\n      if (dx > 0 && x < x0 || dx < 0 && x > x0 || dy > 0 && y < y0 || dy < 0 && y > y0) {\n        continue;\n      }\n\n      ctx[idx % 2 ? 'moveTo' : 'lineTo'](dx >= 0 ? mathMin(x, x1) : mathMax(x, x1), dy >= 0 ? mathMin(y, y1) : mathMax(y, y1));\n    } // Offset for next lineTo\n\n\n    dx = x - x1;\n    dy = y - y1;\n    this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n  },\n  // Not accurate dashed line to\n  _dashedBezierTo: function (x1, y1, x2, y2, x3, y3) {\n    var dashSum = this._dashSum;\n    var offset = this._dashOffset;\n    var lineDash = this._lineDash;\n    var ctx = this._ctx;\n    var x0 = this._xi;\n    var y0 = this._yi;\n    var t;\n    var dx;\n    var dy;\n    var cubicAt = curve.cubicAt;\n    var bezierLen = 0;\n    var idx = this._dashIdx;\n    var nDash = lineDash.length;\n    var x;\n    var y;\n    var tmpLen = 0;\n\n    if (offset < 0) {\n      // Convert to positive offset\n      offset = dashSum + offset;\n    }\n\n    offset %= dashSum; // Bezier approx length\n\n    for (t = 0; t < 1; t += 0.1) {\n      dx = cubicAt(x0, x1, x2, x3, t + 0.1) - cubicAt(x0, x1, x2, x3, t);\n      dy = cubicAt(y0, y1, y2, y3, t + 0.1) - cubicAt(y0, y1, y2, y3, t);\n      bezierLen += mathSqrt(dx * dx + dy * dy);\n    } // Find idx after add offset\n\n\n    for (; idx < nDash; idx++) {\n      tmpLen += lineDash[idx];\n\n      if (tmpLen > offset) {\n        break;\n      }\n    }\n\n    t = (tmpLen - offset) / bezierLen;\n\n    while (t <= 1) {\n      x = cubicAt(x0, x1, x2, x3, t);\n      y = cubicAt(y0, y1, y2, y3, t); // Use line to approximate dashed bezier\n      // Bad result if dash is long\n\n      idx % 2 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);\n      t += lineDash[idx] / bezierLen;\n      idx = (idx + 1) % nDash;\n    } // Finish the last segment and calculate the new offset\n\n\n    idx % 2 !== 0 && ctx.lineTo(x3, y3);\n    dx = x3 - x;\n    dy = y3 - y;\n    this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n  },\n  _dashedQuadraticTo: function (x1, y1, x2, y2) {\n    // Convert quadratic to cubic using degree elevation\n    var x3 = x2;\n    var y3 = y2;\n    x2 = (x2 + 2 * x1) / 3;\n    y2 = (y2 + 2 * y1) / 3;\n    x1 = (this._xi + 2 * x1) / 3;\n    y1 = (this._yi + 2 * y1) / 3;\n\n    this._dashedBezierTo(x1, y1, x2, y2, x3, y3);\n  },\n\n  /**\n   * 转成静态的 Float32Array 减少堆内存占用\n   * Convert dynamic array to static Float32Array\n   */\n  toStatic: function () {\n    var data = this.data;\n\n    if (data instanceof Array) {\n      data.length = this._len;\n\n      if (hasTypedArray) {\n        this.data = new Float32Array(data);\n      }\n    }\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function () {\n    min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n    max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n    var data = this.data;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n\n      if (i === 1) {\n        // 如果第一个命令是 L, C, Q\n        // 则 previous point 同绘制命令的第一个 point\n        //\n        // 第一个命令为 Arc 的情况下会在后面特殊处理\n        xi = data[i];\n        yi = data[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD.M:\n          // moveTo 命令重新创建一个新的 subpath, 并且更新新的起点\n          // 在 closePath 的时候使用\n          x0 = data[i++];\n          y0 = data[i++];\n          xi = x0;\n          yi = y0;\n          min2[0] = x0;\n          min2[1] = y0;\n          max2[0] = x0;\n          max2[1] = y0;\n          break;\n\n        case CMD.L:\n          bbox.fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.C:\n          bbox.fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.Q:\n          bbox.fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.A:\n          // TODO Arc 判断的开销比较大\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var startAngle = data[i++];\n          var endAngle = data[i++] + startAngle; // TODO Arc 旋转\n\n          i += 1;\n          var anticlockwise = 1 - data[i++];\n\n          if (i === 1) {\n            // 直接使用 arc 命令\n            // 第一个命令起点还未定义\n            x0 = mathCos(startAngle) * rx + cx;\n            y0 = mathSin(startAngle) * ry + cy;\n          }\n\n          bbox.fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n          xi = mathCos(endAngle) * rx + cx;\n          yi = mathSin(endAngle) * ry + cy;\n          break;\n\n        case CMD.R:\n          x0 = xi = data[i++];\n          y0 = yi = data[i++];\n          var width = data[i++];\n          var height = data[i++]; // Use fromLine\n\n          bbox.fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n          break;\n\n        case CMD.Z:\n          xi = x0;\n          yi = y0;\n          break;\n      } // Union\n\n\n      vec2.min(min, min, min2);\n      vec2.max(max, max, max2);\n    } // No data\n\n\n    if (i === 0) {\n      min[0] = min[1] = max[0] = max[1] = 0;\n    }\n\n    return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n  },\n\n  /**\n   * Rebuild path from current data\n   * Rebuild path will not consider javascript implemented line dash.\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  rebuildPath: function (ctx) {\n    var d = this.data;\n    var x0;\n    var y0;\n    var xi;\n    var yi;\n    var x;\n    var y;\n    var ux = this._ux;\n    var uy = this._uy;\n    var len = this._len;\n\n    for (var i = 0; i < len;) {\n      var cmd = d[i++];\n\n      if (i === 1) {\n        // 如果第一个命令是 L, C, Q\n        // 则 previous point 同绘制命令的第一个 point\n        //\n        // 第一个命令为 Arc 的情况下会在后面特殊处理\n        xi = d[i];\n        yi = d[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = xi = d[i++];\n          y0 = yi = d[i++];\n          ctx.moveTo(xi, yi);\n          break;\n\n        case CMD.L:\n          x = d[i++];\n          y = d[i++]; // Not draw too small seg between\n\n          if (mathAbs(x - xi) > ux || mathAbs(y - yi) > uy || i === len - 1) {\n            ctx.lineTo(x, y);\n            xi = x;\n            yi = y;\n          }\n\n          break;\n\n        case CMD.C:\n          ctx.bezierCurveTo(d[i++], d[i++], d[i++], d[i++], d[i++], d[i++]);\n          xi = d[i - 2];\n          yi = d[i - 1];\n          break;\n\n        case CMD.Q:\n          ctx.quadraticCurveTo(d[i++], d[i++], d[i++], d[i++]);\n          xi = d[i - 2];\n          yi = d[i - 1];\n          break;\n\n        case CMD.A:\n          var cx = d[i++];\n          var cy = d[i++];\n          var rx = d[i++];\n          var ry = d[i++];\n          var theta = d[i++];\n          var dTheta = d[i++];\n          var psi = d[i++];\n          var fs = d[i++];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          var isEllipse = Math.abs(rx - ry) > 1e-3;\n          var endAngle = theta + dTheta;\n\n          if (isEllipse) {\n            ctx.translate(cx, cy);\n            ctx.rotate(psi);\n            ctx.scale(scaleX, scaleY);\n            ctx.arc(0, 0, r, theta, endAngle, 1 - fs);\n            ctx.scale(1 / scaleX, 1 / scaleY);\n            ctx.rotate(-psi);\n            ctx.translate(-cx, -cy);\n          } else {\n            ctx.arc(cx, cy, r, theta, endAngle, 1 - fs);\n          }\n\n          if (i === 1) {\n            // 直接使用 arc 命令\n            // 第一个命令起点还未定义\n            x0 = mathCos(theta) * rx + cx;\n            y0 = mathSin(theta) * ry + cy;\n          }\n\n          xi = mathCos(endAngle) * rx + cx;\n          yi = mathSin(endAngle) * ry + cy;\n          break;\n\n        case CMD.R:\n          x0 = xi = d[i];\n          y0 = yi = d[i + 1];\n          ctx.rect(d[i++], d[i++], d[i++], d[i++]);\n          break;\n\n        case CMD.Z:\n          ctx.closePath();\n          xi = x0;\n          yi = y0;\n      }\n    }\n  }\n};\nPathProxy.CMD = CMD;\nvar _default = PathProxy;\nmodule.exports = _default;","/**\n * echarts设备环境识别\n *\n * @desc echarts基于Canvas，纯Javascript图表库，提供直观，生动，可交互，可个性化定制的数据统计图表。\n * @author firede[firede@firede.us]\n * @desc thanks zepto.\n */\n\n/* global wx */\nvar env = {};\n\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n  // In Weixin Application\n  env = {\n    browser: {},\n    os: {},\n    node: false,\n    wxa: true,\n    // Weixin Application\n    canvasSupported: true,\n    svgSupported: false,\n    touchEventsSupported: true,\n    domSupported: false\n  };\n} else if (typeof document === 'undefined' && typeof self !== 'undefined') {\n  // In worker\n  env = {\n    browser: {},\n    os: {},\n    node: false,\n    worker: true,\n    canvasSupported: true,\n    domSupported: false\n  };\n} else if (typeof navigator === 'undefined') {\n  // In node\n  env = {\n    browser: {},\n    os: {},\n    node: true,\n    worker: false,\n    // Assume canvas is supported\n    canvasSupported: true,\n    svgSupported: true,\n    domSupported: false\n  };\n} else {\n  env = detect(navigator.userAgent);\n}\n\nvar _default = env; // Zepto.js\n// (c) 2010-2013 Thomas Fuchs\n// Zepto.js may be freely distributed under the MIT license.\n\nfunction detect(ua) {\n  var os = {};\n  var browser = {}; // var webkit = ua.match(/Web[kK]it[\\/]{0,1}([\\d.]+)/);\n  // var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n  // var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n  // var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n  // var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n  // var webos = ua.match(/(webOS|hpwOS)[\\s\\/]([\\d.]+)/);\n  // var touchpad = webos && ua.match(/TouchPad/);\n  // var kindle = ua.match(/Kindle\\/([\\d.]+)/);\n  // var silk = ua.match(/Silk\\/([\\d._]+)/);\n  // var blackberry = ua.match(/(BlackBerry).*Version\\/([\\d.]+)/);\n  // var bb10 = ua.match(/(BB10).*Version\\/([\\d.]+)/);\n  // var rimtabletos = ua.match(/(RIM\\sTablet\\sOS)\\s([\\d.]+)/);\n  // var playbook = ua.match(/PlayBook/);\n  // var chrome = ua.match(/Chrome\\/([\\d.]+)/) || ua.match(/CriOS\\/([\\d.]+)/);\n\n  var firefox = ua.match(/Firefox\\/([\\d.]+)/); // var safari = webkit && ua.match(/Mobile\\//) && !chrome;\n  // var webview = ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/) && !chrome;\n\n  var ie = ua.match(/MSIE\\s([\\d.]+)/) // IE 11 Trident/7.0; rv:11.0\n  || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n  var edge = ua.match(/Edge\\/([\\d.]+)/); // IE 12 and 12+\n\n  var weChat = /micromessenger/i.test(ua); // Todo: clean this up with a better OS/browser seperation:\n  // - discern (more) between multiple browsers on android\n  // - decide if kindle fire in silk mode is android or not\n  // - Firefox on Android doesn't specify the Android version\n  // - possibly devide in os, device and browser hashes\n  // if (browser.webkit = !!webkit) browser.version = webkit[1];\n  // if (android) os.android = true, os.version = android[2];\n  // if (iphone && !ipod) os.ios = os.iphone = true, os.version = iphone[2].replace(/_/g, '.');\n  // if (ipad) os.ios = os.ipad = true, os.version = ipad[2].replace(/_/g, '.');\n  // if (ipod) os.ios = os.ipod = true, os.version = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n  // if (webos) os.webos = true, os.version = webos[2];\n  // if (touchpad) os.touchpad = true;\n  // if (blackberry) os.blackberry = true, os.version = blackberry[2];\n  // if (bb10) os.bb10 = true, os.version = bb10[2];\n  // if (rimtabletos) os.rimtabletos = true, os.version = rimtabletos[2];\n  // if (playbook) browser.playbook = true;\n  // if (kindle) os.kindle = true, os.version = kindle[1];\n  // if (silk) browser.silk = true, browser.version = silk[1];\n  // if (!silk && os.android && ua.match(/Kindle Fire/)) browser.silk = true;\n  // if (chrome) browser.chrome = true, browser.version = chrome[1];\n\n  if (firefox) {\n    browser.firefox = true;\n    browser.version = firefox[1];\n  } // if (safari && (ua.match(/Safari/) || !!os.ios)) browser.safari = true;\n  // if (webview) browser.webview = true;\n\n\n  if (ie) {\n    browser.ie = true;\n    browser.version = ie[1];\n  }\n\n  if (edge) {\n    browser.edge = true;\n    browser.version = edge[1];\n  } // It is difficult to detect WeChat in Win Phone precisely, because ua can\n  // not be set on win phone. So we do not consider Win Phone.\n\n\n  if (weChat) {\n    browser.weChat = true;\n  } // os.tablet = !!(ipad || playbook || (android && !ua.match(/Mobile/)) ||\n  //     (firefox && ua.match(/Tablet/)) || (ie && !ua.match(/Phone/) && ua.match(/Touch/)));\n  // os.phone  = !!(!os.tablet && !os.ipod && (android || iphone || webos ||\n  //     (chrome && ua.match(/Android/)) || (chrome && ua.match(/CriOS\\/([\\d.]+)/)) ||\n  //     (firefox && ua.match(/Mobile/)) || (ie && ua.match(/Touch/))));\n\n\n  return {\n    browser: browser,\n    os: os,\n    node: false,\n    // 原生canvas支持，改极端点了\n    // canvasSupported : !(browser.ie && parseFloat(browser.version) < 9)\n    canvasSupported: !!document.createElement('canvas').getContext,\n    svgSupported: typeof SVGRect !== 'undefined',\n    // works on most browsers\n    // IE10/11 does not support touch event, and MS Edge supports them but not by\n    // default, so we dont check navigator.maxTouchPoints for them here.\n    touchEventsSupported: 'ontouchstart' in window && !browser.ie && !browser.edge,\n    // <http://caniuse.com/#search=pointer%20event>.\n    pointerEventsSupported: // (1) Firefox supports pointer but not by default, only MS browsers are reliable on pointer\n    // events currently. So we dont use that on other browsers unless tested sufficiently.\n    // For example, in iOS 13 Mobile Chromium 78, if the touching behavior starts page\n    // scroll, the `pointermove` event can not be fired any more. That will break some\n    // features like \"pan horizontally to move something and pan vertically to page scroll\".\n    // The horizontal pan probably be interrupted by the casually triggered page scroll.\n    // (2) Although IE 10 supports pointer event, it use old style and is different from the\n    // standard. So we exclude that. (IE 10 is hardly used on touch device)\n    'onpointerdown' in window && (browser.edge || browser.ie && browser.version >= 11),\n    // passiveSupported: detectPassiveSupport()\n    domSupported: typeof document !== 'undefined'\n  };\n} // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n// function detectPassiveSupport() {\n//     // Test via a getter in the options object to see if the passive property is accessed\n//     var supportsPassive = false;\n//     try {\n//         var opts = Object.defineProperty({}, 'passive', {\n//             get: function() {\n//                 supportsPassive = true;\n//             }\n//         });\n//         window.addEventListener('testPassive', function() {}, opts);\n//     } catch (e) {\n//     }\n//     return supportsPassive;\n// }\n\n\nmodule.exports = _default;","var fixShadow = require(\"./helper/fixShadow\");\n\nvar _constant = require(\"./constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\nvar STYLE_COMMON_PROPS = [['shadowBlur', 0], ['shadowOffsetX', 0], ['shadowOffsetY', 0], ['shadowColor', '#000'], ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]]; // var SHADOW_PROPS = STYLE_COMMON_PROPS.slice(0, 4);\n// var LINE_PROPS = STYLE_COMMON_PROPS.slice(4);\n\nvar Style = function (opts) {\n  this.extendFrom(opts, false);\n};\n\nfunction createLinearGradient(ctx, obj, rect) {\n  var x = obj.x == null ? 0 : obj.x;\n  var x2 = obj.x2 == null ? 1 : obj.x2;\n  var y = obj.y == null ? 0 : obj.y;\n  var y2 = obj.y2 == null ? 0 : obj.y2;\n\n  if (!obj.global) {\n    x = x * rect.width + rect.x;\n    x2 = x2 * rect.width + rect.x;\n    y = y * rect.height + rect.y;\n    y2 = y2 * rect.height + rect.y;\n  } // Fix NaN when rect is Infinity\n\n\n  x = isNaN(x) ? 0 : x;\n  x2 = isNaN(x2) ? 1 : x2;\n  y = isNaN(y) ? 0 : y;\n  y2 = isNaN(y2) ? 0 : y2;\n  var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n  return canvasGradient;\n}\n\nfunction createRadialGradient(ctx, obj, rect) {\n  var width = rect.width;\n  var height = rect.height;\n  var min = Math.min(width, height);\n  var x = obj.x == null ? 0.5 : obj.x;\n  var y = obj.y == null ? 0.5 : obj.y;\n  var r = obj.r == null ? 0.5 : obj.r;\n\n  if (!obj.global) {\n    x = x * width + rect.x;\n    y = y * height + rect.y;\n    r = r * min;\n  }\n\n  var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n  return canvasGradient;\n}\n\nStyle.prototype = {\n  constructor: Style,\n\n  /**\n   * @type {string}\n   */\n  fill: '#000',\n\n  /**\n   * @type {string}\n   */\n  stroke: null,\n\n  /**\n   * @type {number}\n   */\n  opacity: 1,\n\n  /**\n   * @type {number}\n   */\n  fillOpacity: null,\n\n  /**\n   * @type {number}\n   */\n  strokeOpacity: null,\n\n  /**\n   * `true` is not supported.\n   * `false`/`null`/`undefined` are the same.\n   * `false` is used to remove lineDash in some\n   * case that `null`/`undefined` can not be set.\n   * (e.g., emphasis.lineStyle in echarts)\n   * @type {Array.<number>|boolean}\n   */\n  lineDash: null,\n\n  /**\n   * @type {number}\n   */\n  lineDashOffset: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowOffsetY: 0,\n\n  /**\n   * @type {number}\n   */\n  lineWidth: 1,\n\n  /**\n   * If stroke ignore scale\n   * @type {Boolean}\n   */\n  strokeNoScale: false,\n  // Bounding rect text configuration\n  // Not affected by element transform\n\n  /**\n   * @type {string}\n   */\n  text: null,\n\n  /**\n   * If `fontSize` or `fontFamily` exists, `font` will be reset by\n   * `fontSize`, `fontStyle`, `fontWeight`, `fontFamily`.\n   * So do not visit it directly in upper application (like echarts),\n   * but use `contain/text#makeFont` instead.\n   * @type {string}\n   */\n  font: null,\n\n  /**\n   * The same as font. Use font please.\n   * @deprecated\n   * @type {string}\n   */\n  textFont: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontStyle: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontWeight: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * Should be 12 but not '12px'.\n   * @type {number}\n   */\n  fontSize: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontFamily: null,\n\n  /**\n   * Reserved for special functinality, like 'hr'.\n   * @type {string}\n   */\n  textTag: null,\n\n  /**\n   * @type {string}\n   */\n  textFill: '#000',\n\n  /**\n   * @type {string}\n   */\n  textStroke: null,\n\n  /**\n   * @type {number}\n   */\n  textWidth: null,\n\n  /**\n   * Only for textBackground.\n   * @type {number}\n   */\n  textHeight: null,\n\n  /**\n   * textStroke may be set as some color as a default\n   * value in upper applicaion, where the default value\n   * of textStrokeWidth should be 0 to make sure that\n   * user can choose to do not use text stroke.\n   * @type {number}\n   */\n  textStrokeWidth: 0,\n\n  /**\n   * @type {number}\n   */\n  textLineHeight: null,\n\n  /**\n   * 'inside', 'left', 'right', 'top', 'bottom'\n   * [x, y]\n   * Based on x, y of rect.\n   * @type {string|Array.<number>}\n   * @default 'inside'\n   */\n  textPosition: 'inside',\n\n  /**\n   * If not specified, use the boundingRect of a `displayable`.\n   * @type {Object}\n   */\n  textRect: null,\n\n  /**\n   * [x, y]\n   * @type {Array.<number>}\n   */\n  textOffset: null,\n\n  /**\n   * @type {string}\n   */\n  textAlign: null,\n\n  /**\n   * @type {string}\n   */\n  textVerticalAlign: null,\n\n  /**\n   * @type {number}\n   */\n  textDistance: 5,\n\n  /**\n   * @type {string}\n   */\n  textShadowColor: 'transparent',\n\n  /**\n   * @type {number}\n   */\n  textShadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  textShadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  textShadowOffsetY: 0,\n\n  /**\n   * @type {string}\n   */\n  textBoxShadowColor: 'transparent',\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowOffsetY: 0,\n\n  /**\n   * Whether transform text.\n   * Only available in Path and Image element,\n   * where the text is called as `RectText`.\n   * @type {boolean}\n   */\n  transformText: false,\n\n  /**\n   * Text rotate around position of Path or Image.\n   * The origin of the rotation can be specified by `textOrigin`.\n   * Only available in Path and Image element,\n   * where the text is called as `RectText`.\n   */\n  textRotation: 0,\n\n  /**\n   * Text origin of text rotation.\n   * Useful in the case like label rotation of circular symbol.\n   * Only available in Path and Image element, where the text is called\n   * as `RectText` and the element is called as \"host element\".\n   * The value can be:\n   * + If specified as a coordinate like `[10, 40]`, it is the `[x, y]`\n   * base on the left-top corner of the rect of its host element.\n   * + If specified as a string `center`, it is the center of the rect of\n   * its host element.\n   * + By default, this origin is the `textPosition`.\n   * @type {string|Array.<number>}\n   */\n  textOrigin: null,\n\n  /**\n   * @type {string}\n   */\n  textBackgroundColor: null,\n\n  /**\n   * @type {string}\n   */\n  textBorderColor: null,\n\n  /**\n   * @type {number}\n   */\n  textBorderWidth: 0,\n\n  /**\n   * @type {number}\n   */\n  textBorderRadius: 0,\n\n  /**\n   * Can be `2` or `[2, 4]` or `[2, 3, 4, 5]`\n   * @type {number|Array.<number>}\n   */\n  textPadding: null,\n\n  /**\n   * Text styles for rich text.\n   * @type {Object}\n   */\n  rich: null,\n\n  /**\n   * {outerWidth, outerHeight, ellipsis, placeholder}\n   * @type {Object}\n   */\n  truncate: null,\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n   * @type {string}\n   */\n  blend: null,\n\n  /**\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  bind: function (ctx, el, prevEl) {\n    var style = this;\n    var prevStyle = prevEl && prevEl.style; // If no prevStyle, it means first draw.\n    // Only apply cache if the last time cachced by this function.\n\n    var notCheckCache = !prevStyle || ctx.__attrCachedBy !== ContextCachedBy.STYLE_BIND;\n    ctx.__attrCachedBy = ContextCachedBy.STYLE_BIND;\n\n    for (var i = 0; i < STYLE_COMMON_PROPS.length; i++) {\n      var prop = STYLE_COMMON_PROPS[i];\n      var styleName = prop[0];\n\n      if (notCheckCache || style[styleName] !== prevStyle[styleName]) {\n        // FIXME Invalid property value will cause style leak from previous element.\n        ctx[styleName] = fixShadow(ctx, styleName, style[styleName] || prop[1]);\n      }\n    }\n\n    if (notCheckCache || style.fill !== prevStyle.fill) {\n      ctx.fillStyle = style.fill;\n    }\n\n    if (notCheckCache || style.stroke !== prevStyle.stroke) {\n      ctx.strokeStyle = style.stroke;\n    }\n\n    if (notCheckCache || style.opacity !== prevStyle.opacity) {\n      ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n\n    if (notCheckCache || style.blend !== prevStyle.blend) {\n      ctx.globalCompositeOperation = style.blend || 'source-over';\n    }\n\n    if (this.hasStroke()) {\n      var lineWidth = style.lineWidth;\n      ctx.lineWidth = lineWidth / (this.strokeNoScale && el && el.getLineScale ? el.getLineScale() : 1);\n    }\n  },\n  hasFill: function () {\n    var fill = this.fill;\n    return fill != null && fill !== 'none';\n  },\n  hasStroke: function () {\n    var stroke = this.stroke;\n    return stroke != null && stroke !== 'none' && this.lineWidth > 0;\n  },\n\n  /**\n   * Extend from other style\n   * @param {zrender/graphic/Style} otherStyle\n   * @param {boolean} overwrite true: overwrirte any way.\n   *                            false: overwrite only when !target.hasOwnProperty\n   *                            others: overwrite when property is not null/undefined.\n   */\n  extendFrom: function (otherStyle, overwrite) {\n    if (otherStyle) {\n      for (var name in otherStyle) {\n        if (otherStyle.hasOwnProperty(name) && (overwrite === true || (overwrite === false ? !this.hasOwnProperty(name) : otherStyle[name] != null))) {\n          this[name] = otherStyle[name];\n        }\n      }\n    }\n  },\n\n  /**\n   * Batch setting style with a given object\n   * @param {Object|string} obj\n   * @param {*} [obj]\n   */\n  set: function (obj, value) {\n    if (typeof obj === 'string') {\n      this[obj] = value;\n    } else {\n      this.extendFrom(obj, true);\n    }\n  },\n\n  /**\n   * Clone\n   * @return {zrender/graphic/Style} [description]\n   */\n  clone: function () {\n    var newStyle = new this.constructor();\n    newStyle.extendFrom(this, true);\n    return newStyle;\n  },\n  getGradient: function (ctx, obj, rect) {\n    var method = obj.type === 'radial' ? createRadialGradient : createLinearGradient;\n    var canvasGradient = method(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n\n    for (var i = 0; i < colorStops.length; i++) {\n      canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n\n    return canvasGradient;\n  }\n};\nvar styleProto = Style.prototype;\n\nfor (var i = 0; i < STYLE_COMMON_PROPS.length; i++) {\n  var prop = STYLE_COMMON_PROPS[i];\n\n  if (!(prop[0] in styleProto)) {\n    styleProto[prop[0]] = prop[1];\n  }\n} // Provide for others\n\n\nStyle.getGradient = styleProto.getGradient;\nvar _default = Style;\nmodule.exports = _default;","var dpr = 1; // If in browser environment\n\nif (typeof window !== 'undefined') {\n  dpr = Math.max(window.devicePixelRatio || 1, 1);\n}\n/**\n * config默认配置项\n * @exports zrender/config\n * @author Kener (@Kener-林峰, kener.linfeng@gmail.com)\n */\n\n/**\n * Debug log mode:\n * 0: Do nothing, for release.\n * 1: console.error, for debug.\n */\n\n\nvar debugMode = 0; // retina 屏幕优化\n\nvar devicePixelRatio = dpr;\nexports.debugMode = debugMode;\nexports.devicePixelRatio = devicePixelRatio;","var Group = require(\"../container/Group\");\n\nvar ZImage = require(\"../graphic/Image\");\n\nvar Text = require(\"../graphic/Text\");\n\nvar Circle = require(\"../graphic/shape/Circle\");\n\nvar Rect = require(\"../graphic/shape/Rect\");\n\nvar Ellipse = require(\"../graphic/shape/Ellipse\");\n\nvar Line = require(\"../graphic/shape/Line\");\n\nvar Path = require(\"../graphic/Path\");\n\nvar Polygon = require(\"../graphic/shape/Polygon\");\n\nvar Polyline = require(\"../graphic/shape/Polyline\");\n\nvar LinearGradient = require(\"../graphic/LinearGradient\");\n\nvar Style = require(\"../graphic/Style\");\n\nvar matrix = require(\"../core/matrix\");\n\nvar _path = require(\"./path\");\n\nvar createFromString = _path.createFromString;\n\nvar _util = require(\"../core/util\");\n\nvar isString = _util.isString;\nvar extend = _util.extend;\nvar defaults = _util.defaults;\nvar trim = _util.trim;\nvar each = _util.each;\n// import RadialGradient from '../graphic/RadialGradient';\n// import Pattern from '../graphic/Pattern';\n// import * as vector from '../core/vector';\n// Most of the values can be separated by comma and/or white space.\nvar DILIMITER_REG = /[\\s,]+/;\n/**\n * For big svg string, this method might be time consuming.\n *\n * @param {string} svg xml string\n * @return {Object} xml root.\n */\n\nfunction parseXML(svg) {\n  if (isString(svg)) {\n    var parser = new DOMParser();\n    svg = parser.parseFromString(svg, 'text/xml');\n  } // Document node. If using $.get, doc node may be input.\n\n\n  if (svg.nodeType === 9) {\n    svg = svg.firstChild;\n  } // nodeName of <!DOCTYPE svg> is also 'svg'.\n\n\n  while (svg.nodeName.toLowerCase() !== 'svg' || svg.nodeType !== 1) {\n    svg = svg.nextSibling;\n  }\n\n  return svg;\n}\n\nfunction SVGParser() {\n  this._defs = {};\n  this._root = null;\n  this._isDefine = false;\n  this._isText = false;\n}\n\nSVGParser.prototype.parse = function (xml, opt) {\n  opt = opt || {};\n  var svg = parseXML(xml);\n\n  if (!svg) {\n    throw new Error('Illegal svg');\n  }\n\n  var root = new Group();\n  this._root = root; // parse view port\n\n  var viewBox = svg.getAttribute('viewBox') || ''; // If width/height not specified, means \"100%\" of `opt.width/height`.\n  // TODO: Other percent value not supported yet.\n\n  var width = parseFloat(svg.getAttribute('width') || opt.width);\n  var height = parseFloat(svg.getAttribute('height') || opt.height); // If width/height not specified, set as null for output.\n\n  isNaN(width) && (width = null);\n  isNaN(height) && (height = null); // Apply inline style on svg element.\n\n  parseAttributes(svg, root, null, true);\n  var child = svg.firstChild;\n\n  while (child) {\n    this._parseNode(child, root);\n\n    child = child.nextSibling;\n  }\n\n  var viewBoxRect;\n  var viewBoxTransform;\n\n  if (viewBox) {\n    var viewBoxArr = trim(viewBox).split(DILIMITER_REG); // Some invalid case like viewBox: 'none'.\n\n    if (viewBoxArr.length >= 4) {\n      viewBoxRect = {\n        x: parseFloat(viewBoxArr[0] || 0),\n        y: parseFloat(viewBoxArr[1] || 0),\n        width: parseFloat(viewBoxArr[2]),\n        height: parseFloat(viewBoxArr[3])\n      };\n    }\n  }\n\n  if (viewBoxRect && width != null && height != null) {\n    viewBoxTransform = makeViewBoxTransform(viewBoxRect, width, height);\n\n    if (!opt.ignoreViewBox) {\n      // If set transform on the output group, it probably bring trouble when\n      // some users only intend to show the clipped content inside the viewBox,\n      // but not intend to transform the output group. So we keep the output\n      // group no transform. If the user intend to use the viewBox as a\n      // camera, just set `opt.ignoreViewBox` as `true` and set transfrom\n      // manually according to the viewBox info in the output of this method.\n      var elRoot = root;\n      root = new Group();\n      root.add(elRoot);\n      elRoot.scale = viewBoxTransform.scale.slice();\n      elRoot.position = viewBoxTransform.position.slice();\n    }\n  } // Some shapes might be overflow the viewport, which should be\n  // clipped despite whether the viewBox is used, as the SVG does.\n\n\n  if (!opt.ignoreRootClip && width != null && height != null) {\n    root.setClipPath(new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: width,\n        height: height\n      }\n    }));\n  } // Set width/height on group just for output the viewport size.\n\n\n  return {\n    root: root,\n    width: width,\n    height: height,\n    viewBoxRect: viewBoxRect,\n    viewBoxTransform: viewBoxTransform\n  };\n};\n\nSVGParser.prototype._parseNode = function (xmlNode, parentGroup) {\n  var nodeName = xmlNode.nodeName.toLowerCase(); // TODO\n  // support <style>...</style> in svg, where nodeName is 'style',\n  // CSS classes is defined globally wherever the style tags are declared.\n\n  if (nodeName === 'defs') {\n    // define flag\n    this._isDefine = true;\n  } else if (nodeName === 'text') {\n    this._isText = true;\n  }\n\n  var el;\n\n  if (this._isDefine) {\n    var parser = defineParsers[nodeName];\n\n    if (parser) {\n      var def = parser.call(this, xmlNode);\n      var id = xmlNode.getAttribute('id');\n\n      if (id) {\n        this._defs[id] = def;\n      }\n    }\n  } else {\n    var parser = nodeParsers[nodeName];\n\n    if (parser) {\n      el = parser.call(this, xmlNode, parentGroup);\n      parentGroup.add(el);\n    }\n  }\n\n  var child = xmlNode.firstChild;\n\n  while (child) {\n    if (child.nodeType === 1) {\n      this._parseNode(child, el);\n    } // Is text\n\n\n    if (child.nodeType === 3 && this._isText) {\n      this._parseText(child, el);\n    }\n\n    child = child.nextSibling;\n  } // Quit define\n\n\n  if (nodeName === 'defs') {\n    this._isDefine = false;\n  } else if (nodeName === 'text') {\n    this._isText = false;\n  }\n};\n\nSVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n  if (xmlNode.nodeType === 1) {\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    this._textX += parseFloat(dx);\n    this._textY += parseFloat(dy);\n  }\n\n  var text = new Text({\n    style: {\n      text: xmlNode.textContent,\n      transformText: true\n    },\n    position: [this._textX || 0, this._textY || 0]\n  });\n  inheritStyle(parentGroup, text);\n  parseAttributes(xmlNode, text, this._defs);\n  var fontSize = text.style.fontSize;\n\n  if (fontSize && fontSize < 9) {\n    // PENDING\n    text.style.fontSize = 9;\n    text.scale = text.scale || [1, 1];\n    text.scale[0] *= fontSize / 9;\n    text.scale[1] *= fontSize / 9;\n  }\n\n  var rect = text.getBoundingRect();\n  this._textX += rect.width;\n  parentGroup.add(text);\n  return text;\n};\n\nvar nodeParsers = {\n  'g': function (xmlNode, parentGroup) {\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    return g;\n  },\n  'rect': function (xmlNode, parentGroup) {\n    var rect = new Rect();\n    inheritStyle(parentGroup, rect);\n    parseAttributes(xmlNode, rect, this._defs);\n    rect.setShape({\n      x: parseFloat(xmlNode.getAttribute('x') || 0),\n      y: parseFloat(xmlNode.getAttribute('y') || 0),\n      width: parseFloat(xmlNode.getAttribute('width') || 0),\n      height: parseFloat(xmlNode.getAttribute('height') || 0)\n    }); // console.log(xmlNode.getAttribute('transform'));\n    // console.log(rect.transform);\n\n    return rect;\n  },\n  'circle': function (xmlNode, parentGroup) {\n    var circle = new Circle();\n    inheritStyle(parentGroup, circle);\n    parseAttributes(xmlNode, circle, this._defs);\n    circle.setShape({\n      cx: parseFloat(xmlNode.getAttribute('cx') || 0),\n      cy: parseFloat(xmlNode.getAttribute('cy') || 0),\n      r: parseFloat(xmlNode.getAttribute('r') || 0)\n    });\n    return circle;\n  },\n  'line': function (xmlNode, parentGroup) {\n    var line = new Line();\n    inheritStyle(parentGroup, line);\n    parseAttributes(xmlNode, line, this._defs);\n    line.setShape({\n      x1: parseFloat(xmlNode.getAttribute('x1') || 0),\n      y1: parseFloat(xmlNode.getAttribute('y1') || 0),\n      x2: parseFloat(xmlNode.getAttribute('x2') || 0),\n      y2: parseFloat(xmlNode.getAttribute('y2') || 0)\n    });\n    return line;\n  },\n  'ellipse': function (xmlNode, parentGroup) {\n    var ellipse = new Ellipse();\n    inheritStyle(parentGroup, ellipse);\n    parseAttributes(xmlNode, ellipse, this._defs);\n    ellipse.setShape({\n      cx: parseFloat(xmlNode.getAttribute('cx') || 0),\n      cy: parseFloat(xmlNode.getAttribute('cy') || 0),\n      rx: parseFloat(xmlNode.getAttribute('rx') || 0),\n      ry: parseFloat(xmlNode.getAttribute('ry') || 0)\n    });\n    return ellipse;\n  },\n  'polygon': function (xmlNode, parentGroup) {\n    var points = xmlNode.getAttribute('points');\n\n    if (points) {\n      points = parsePoints(points);\n    }\n\n    var polygon = new Polygon({\n      shape: {\n        points: points || []\n      }\n    });\n    inheritStyle(parentGroup, polygon);\n    parseAttributes(xmlNode, polygon, this._defs);\n    return polygon;\n  },\n  'polyline': function (xmlNode, parentGroup) {\n    var path = new Path();\n    inheritStyle(parentGroup, path);\n    parseAttributes(xmlNode, path, this._defs);\n    var points = xmlNode.getAttribute('points');\n\n    if (points) {\n      points = parsePoints(points);\n    }\n\n    var polyline = new Polyline({\n      shape: {\n        points: points || []\n      }\n    });\n    return polyline;\n  },\n  'image': function (xmlNode, parentGroup) {\n    var img = new ZImage();\n    inheritStyle(parentGroup, img);\n    parseAttributes(xmlNode, img, this._defs);\n    img.setStyle({\n      image: xmlNode.getAttribute('xlink:href'),\n      x: xmlNode.getAttribute('x'),\n      y: xmlNode.getAttribute('y'),\n      width: xmlNode.getAttribute('width'),\n      height: xmlNode.getAttribute('height')\n    });\n    return img;\n  },\n  'text': function (xmlNode, parentGroup) {\n    var x = xmlNode.getAttribute('x') || 0;\n    var y = xmlNode.getAttribute('y') || 0;\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    this._textX = parseFloat(x) + parseFloat(dx);\n    this._textY = parseFloat(y) + parseFloat(dy);\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    return g;\n  },\n  'tspan': function (xmlNode, parentGroup) {\n    var x = xmlNode.getAttribute('x');\n    var y = xmlNode.getAttribute('y');\n\n    if (x != null) {\n      // new offset x\n      this._textX = parseFloat(x);\n    }\n\n    if (y != null) {\n      // new offset y\n      this._textY = parseFloat(y);\n    }\n\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    this._textX += dx;\n    this._textY += dy;\n    return g;\n  },\n  'path': function (xmlNode, parentGroup) {\n    // TODO svg fill rule\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule\n    // path.style.globalCompositeOperation = 'xor';\n    var d = xmlNode.getAttribute('d') || ''; // Performance sensitive.\n\n    var path = createFromString(d);\n    inheritStyle(parentGroup, path);\n    parseAttributes(xmlNode, path, this._defs);\n    return path;\n  }\n};\nvar defineParsers = {\n  'lineargradient': function (xmlNode) {\n    var x1 = parseInt(xmlNode.getAttribute('x1') || 0, 10);\n    var y1 = parseInt(xmlNode.getAttribute('y1') || 0, 10);\n    var x2 = parseInt(xmlNode.getAttribute('x2') || 10, 10);\n    var y2 = parseInt(xmlNode.getAttribute('y2') || 0, 10);\n    var gradient = new LinearGradient(x1, y1, x2, y2);\n\n    _parseGradientColorStops(xmlNode, gradient);\n\n    return gradient;\n  },\n  'radialgradient': function (xmlNode) {}\n};\n\nfunction _parseGradientColorStops(xmlNode, gradient) {\n  var stop = xmlNode.firstChild;\n\n  while (stop) {\n    if (stop.nodeType === 1) {\n      var offset = stop.getAttribute('offset');\n\n      if (offset.indexOf('%') > 0) {\n        // percentage\n        offset = parseInt(offset, 10) / 100;\n      } else if (offset) {\n        // number from 0 to 1\n        offset = parseFloat(offset);\n      } else {\n        offset = 0;\n      }\n\n      var stopColor = stop.getAttribute('stop-color') || '#000000';\n      gradient.addColorStop(offset, stopColor);\n    }\n\n    stop = stop.nextSibling;\n  }\n}\n\nfunction inheritStyle(parent, child) {\n  if (parent && parent.__inheritedStyle) {\n    if (!child.__inheritedStyle) {\n      child.__inheritedStyle = {};\n    }\n\n    defaults(child.__inheritedStyle, parent.__inheritedStyle);\n  }\n}\n\nfunction parsePoints(pointsString) {\n  var list = trim(pointsString).split(DILIMITER_REG);\n  var points = [];\n\n  for (var i = 0; i < list.length; i += 2) {\n    var x = parseFloat(list[i]);\n    var y = parseFloat(list[i + 1]);\n    points.push([x, y]);\n  }\n\n  return points;\n}\n\nvar attributesMap = {\n  'fill': 'fill',\n  'stroke': 'stroke',\n  'stroke-width': 'lineWidth',\n  'opacity': 'opacity',\n  'fill-opacity': 'fillOpacity',\n  'stroke-opacity': 'strokeOpacity',\n  'stroke-dasharray': 'lineDash',\n  'stroke-dashoffset': 'lineDashOffset',\n  'stroke-linecap': 'lineCap',\n  'stroke-linejoin': 'lineJoin',\n  'stroke-miterlimit': 'miterLimit',\n  'font-family': 'fontFamily',\n  'font-size': 'fontSize',\n  'font-style': 'fontStyle',\n  'font-weight': 'fontWeight',\n  'text-align': 'textAlign',\n  'alignment-baseline': 'textBaseline'\n};\n\nfunction parseAttributes(xmlNode, el, defs, onlyInlineStyle) {\n  var zrStyle = el.__inheritedStyle || {};\n  var isTextEl = el.type === 'text'; // TODO Shadow\n\n  if (xmlNode.nodeType === 1) {\n    parseTransformAttribute(xmlNode, el);\n    extend(zrStyle, parseStyleAttribute(xmlNode));\n\n    if (!onlyInlineStyle) {\n      for (var svgAttrName in attributesMap) {\n        if (attributesMap.hasOwnProperty(svgAttrName)) {\n          var attrValue = xmlNode.getAttribute(svgAttrName);\n\n          if (attrValue != null) {\n            zrStyle[attributesMap[svgAttrName]] = attrValue;\n          }\n        }\n      }\n    }\n  }\n\n  var elFillProp = isTextEl ? 'textFill' : 'fill';\n  var elStrokeProp = isTextEl ? 'textStroke' : 'stroke';\n  el.style = el.style || new Style();\n  var elStyle = el.style;\n  zrStyle.fill != null && elStyle.set(elFillProp, getPaint(zrStyle.fill, defs));\n  zrStyle.stroke != null && elStyle.set(elStrokeProp, getPaint(zrStyle.stroke, defs));\n  each(['lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'], function (propName) {\n    var elPropName = propName === 'lineWidth' && isTextEl ? 'textStrokeWidth' : propName;\n    zrStyle[propName] != null && elStyle.set(elPropName, parseFloat(zrStyle[propName]));\n  });\n\n  if (!zrStyle.textBaseline || zrStyle.textBaseline === 'auto') {\n    zrStyle.textBaseline = 'alphabetic';\n  }\n\n  if (zrStyle.textBaseline === 'alphabetic') {\n    zrStyle.textBaseline = 'bottom';\n  }\n\n  if (zrStyle.textAlign === 'start') {\n    zrStyle.textAlign = 'left';\n  }\n\n  if (zrStyle.textAlign === 'end') {\n    zrStyle.textAlign = 'right';\n  }\n\n  each(['lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign', 'textBaseline'], function (propName) {\n    zrStyle[propName] != null && elStyle.set(propName, zrStyle[propName]);\n  });\n\n  if (zrStyle.lineDash) {\n    el.style.lineDash = trim(zrStyle.lineDash).split(DILIMITER_REG);\n  }\n\n  if (elStyle[elStrokeProp] && elStyle[elStrokeProp] !== 'none') {\n    // enable stroke\n    el[elStrokeProp] = true;\n  }\n\n  el.__inheritedStyle = zrStyle;\n}\n\nvar urlRegex = /url\\(\\s*#(.*?)\\)/;\n\nfunction getPaint(str, defs) {\n  // if (str === 'none') {\n  //     return;\n  // }\n  var urlMatch = defs && str && str.match(urlRegex);\n\n  if (urlMatch) {\n    var url = trim(urlMatch[1]);\n    var def = defs[url];\n    return def;\n  }\n\n  return str;\n}\n\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.e,]*)\\)/g;\n\nfunction parseTransformAttribute(xmlNode, node) {\n  var transform = xmlNode.getAttribute('transform');\n\n  if (transform) {\n    transform = transform.replace(/,/g, ' ');\n    var m = null;\n    var transformOps = [];\n    transform.replace(transformRegex, function (str, type, value) {\n      transformOps.push(type, value);\n    });\n\n    for (var i = transformOps.length - 1; i > 0; i -= 2) {\n      var value = transformOps[i];\n      var type = transformOps[i - 1];\n      m = m || matrix.create();\n\n      switch (type) {\n        case 'translate':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.translate(m, m, [parseFloat(value[0]), parseFloat(value[1] || 0)]);\n          break;\n\n        case 'scale':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.scale(m, m, [parseFloat(value[0]), parseFloat(value[1] || value[0])]);\n          break;\n\n        case 'rotate':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.rotate(m, m, parseFloat(value[0]));\n          break;\n\n        case 'skew':\n          value = trim(value).split(DILIMITER_REG);\n          console.warn('Skew transform is not supported yet');\n          break;\n\n        case 'matrix':\n          var value = trim(value).split(DILIMITER_REG);\n          m[0] = parseFloat(value[0]);\n          m[1] = parseFloat(value[1]);\n          m[2] = parseFloat(value[2]);\n          m[3] = parseFloat(value[3]);\n          m[4] = parseFloat(value[4]);\n          m[5] = parseFloat(value[5]);\n          break;\n      }\n    }\n\n    node.setLocalTransform(m);\n  }\n} // Value may contain space.\n\n\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\n\nfunction parseStyleAttribute(xmlNode) {\n  var style = xmlNode.getAttribute('style');\n  var result = {};\n\n  if (!style) {\n    return result;\n  }\n\n  var styleList = {};\n  styleRegex.lastIndex = 0;\n  var styleRegResult;\n\n  while ((styleRegResult = styleRegex.exec(style)) != null) {\n    styleList[styleRegResult[1]] = styleRegResult[2];\n  }\n\n  for (var svgAttrName in attributesMap) {\n    if (attributesMap.hasOwnProperty(svgAttrName) && styleList[svgAttrName] != null) {\n      result[attributesMap[svgAttrName]] = styleList[svgAttrName];\n    }\n  }\n\n  return result;\n}\n/**\n * @param {Array.<number>} viewBoxRect\n * @param {number} width\n * @param {number} height\n * @return {Object} {scale, position}\n */\n\n\nfunction makeViewBoxTransform(viewBoxRect, width, height) {\n  var scaleX = width / viewBoxRect.width;\n  var scaleY = height / viewBoxRect.height;\n  var scale = Math.min(scaleX, scaleY); // preserveAspectRatio 'xMidYMid'\n\n  var viewBoxScale = [scale, scale];\n  var viewBoxPosition = [-(viewBoxRect.x + viewBoxRect.width / 2) * scale + width / 2, -(viewBoxRect.y + viewBoxRect.height / 2) * scale + height / 2];\n  return {\n    scale: viewBoxScale,\n    position: viewBoxPosition\n  };\n}\n/**\n * @param {string|XMLElement} xml\n * @param {Object} [opt]\n * @param {number} [opt.width] Default width if svg width not specified or is a percent value.\n * @param {number} [opt.height] Default height if svg height not specified or is a percent value.\n * @param {boolean} [opt.ignoreViewBox]\n * @param {boolean} [opt.ignoreRootClip]\n * @return {Object} result:\n * {\n *     root: Group, The root of the the result tree of zrender shapes,\n *     width: number, the viewport width of the SVG,\n *     height: number, the viewport height of the SVG,\n *     viewBoxRect: {x, y, width, height}, the declared viewBox rect of the SVG, if exists,\n *     viewBoxTransform: the {scale, position} calculated by viewBox and viewport, is exists.\n * }\n */\n\n\nfunction parseSVG(xml, opt) {\n  var parser = new SVGParser();\n  return parser.parse(xml, opt);\n}\n\nexports.parseXML = parseXML;\nexports.makeViewBoxTransform = makeViewBoxTransform;\nexports.parseSVG = parseSVG;","var util = require(\"../core/util\");\n\nvar _event = require(\"../core/event\");\n\nvar Dispatcher = _event.Dispatcher;\n\nvar requestAnimationFrame = require(\"./requestAnimationFrame\");\n\nvar Animator = require(\"./Animator\");\n\n/**\n * Animation main class, dispatch and manage all animation controllers\n *\n * @module zrender/animation/Animation\n * @author pissang(https://github.com/pissang)\n */\n// TODO Additive animation\n// http://iosoteric.com/additive-animations-animatewithduration-in-ios-8/\n// https://developer.apple.com/videos/wwdc2014/#236\n\n/**\n * @typedef {Object} IZRenderStage\n * @property {Function} update\n */\n\n/**\n * @alias module:zrender/animation/Animation\n * @constructor\n * @param {Object} [options]\n * @param {Function} [options.onframe]\n * @param {IZRenderStage} [options.stage]\n * @example\n *     var animation = new Animation();\n *     var obj = {\n *         x: 100,\n *         y: 100\n *     };\n *     animation.animate(node.position)\n *         .when(1000, {\n *             x: 500,\n *             y: 500\n *         })\n *         .when(2000, {\n *             x: 100,\n *             y: 100\n *         })\n *         .start('spline');\n */\nvar Animation = function (options) {\n  options = options || {};\n  this.stage = options.stage || {};\n\n  this.onframe = options.onframe || function () {}; // private properties\n\n\n  this._clips = [];\n  this._running = false;\n  this._time;\n  this._pausedTime;\n  this._pauseStart;\n  this._paused = false;\n  Dispatcher.call(this);\n};\n\nAnimation.prototype = {\n  constructor: Animation,\n\n  /**\n   * Add clip\n   * @param {module:zrender/animation/Clip} clip\n   */\n  addClip: function (clip) {\n    this._clips.push(clip);\n  },\n\n  /**\n   * Add animator\n   * @param {module:zrender/animation/Animator} animator\n   */\n  addAnimator: function (animator) {\n    animator.animation = this;\n    var clips = animator.getClips();\n\n    for (var i = 0; i < clips.length; i++) {\n      this.addClip(clips[i]);\n    }\n  },\n\n  /**\n   * Delete animation clip\n   * @param {module:zrender/animation/Clip} clip\n   */\n  removeClip: function (clip) {\n    var idx = util.indexOf(this._clips, clip);\n\n    if (idx >= 0) {\n      this._clips.splice(idx, 1);\n    }\n  },\n\n  /**\n   * Delete animation clip\n   * @param {module:zrender/animation/Animator} animator\n   */\n  removeAnimator: function (animator) {\n    var clips = animator.getClips();\n\n    for (var i = 0; i < clips.length; i++) {\n      this.removeClip(clips[i]);\n    }\n\n    animator.animation = null;\n  },\n  _update: function () {\n    var time = new Date().getTime() - this._pausedTime;\n\n    var delta = time - this._time;\n    var clips = this._clips;\n    var len = clips.length;\n    var deferredEvents = [];\n    var deferredClips = [];\n\n    for (var i = 0; i < len; i++) {\n      var clip = clips[i];\n      var e = clip.step(time, delta); // Throw out the events need to be called after\n      // stage.update, like destroy\n\n      if (e) {\n        deferredEvents.push(e);\n        deferredClips.push(clip);\n      }\n    } // Remove the finished clip\n\n\n    for (var i = 0; i < len;) {\n      if (clips[i]._needsRemove) {\n        clips[i] = clips[len - 1];\n        clips.pop();\n        len--;\n      } else {\n        i++;\n      }\n    }\n\n    len = deferredEvents.length;\n\n    for (var i = 0; i < len; i++) {\n      deferredClips[i].fire(deferredEvents[i]);\n    }\n\n    this._time = time;\n    this.onframe(delta); // 'frame' should be triggered before stage, because upper application\n    // depends on the sequence (e.g., echarts-stream and finish\n    // event judge)\n\n    this.trigger('frame', delta);\n\n    if (this.stage.update) {\n      this.stage.update();\n    }\n  },\n  _startLoop: function () {\n    var self = this;\n    this._running = true;\n\n    function step() {\n      if (self._running) {\n        requestAnimationFrame(step);\n        !self._paused && self._update();\n      }\n    }\n\n    requestAnimationFrame(step);\n  },\n\n  /**\n   * Start animation.\n   */\n  start: function () {\n    this._time = new Date().getTime();\n    this._pausedTime = 0;\n\n    this._startLoop();\n  },\n\n  /**\n   * Stop animation.\n   */\n  stop: function () {\n    this._running = false;\n  },\n\n  /**\n   * Pause animation.\n   */\n  pause: function () {\n    if (!this._paused) {\n      this._pauseStart = new Date().getTime();\n      this._paused = true;\n    }\n  },\n\n  /**\n   * Resume animation.\n   */\n  resume: function () {\n    if (this._paused) {\n      this._pausedTime += new Date().getTime() - this._pauseStart;\n      this._paused = false;\n    }\n  },\n\n  /**\n   * Clear animation.\n   */\n  clear: function () {\n    this._clips = [];\n  },\n\n  /**\n   * Whether animation finished.\n   */\n  isFinished: function () {\n    return !this._clips.length;\n  },\n\n  /**\n   * Creat animator for a target, whose props can be animated.\n   *\n   * @param  {Object} target\n   * @param  {Object} options\n   * @param  {boolean} [options.loop=false] Whether loop animation.\n   * @param  {Function} [options.getter=null] Get value from target.\n   * @param  {Function} [options.setter=null] Set value to target.\n   * @return {module:zrender/animation/Animation~Animator}\n   */\n  // TODO Gap\n  animate: function (target, options) {\n    options = options || {};\n    var animator = new Animator(target, options.loop, options.getter, options.setter);\n    this.addAnimator(animator);\n    return animator;\n  }\n};\nutil.mixin(Animation, Dispatcher);\nvar _default = Animation;\nmodule.exports = _default;","var Path = require(\"../graphic/Path\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar transformPath = require(\"./transformPath\");\n\n// command chars\n// var cc = [\n//     'm', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z',\n//     'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'\n// ];\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\n\nvar vMag = function (v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n};\n\nvar vRatio = function (u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n};\n\nvar vAngle = function (u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n};\n\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n  var psi = psiDeg * (PI / 180.0);\n  var xp = mathCos(psi) * (x1 - x2) / 2.0 + mathSin(psi) * (y1 - y2) / 2.0;\n  var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0 + mathCos(psi) * (y1 - y2) / 2.0;\n  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n  if (lambda > 1) {\n    rx *= mathSqrt(lambda);\n    ry *= mathSqrt(lambda);\n  }\n\n  var f = (fa === fs ? -1 : 1) * mathSqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp))) || 0;\n  var cxp = f * rx * yp / ry;\n  var cyp = f * -ry * xp / rx;\n  var cx = (x1 + x2) / 2.0 + mathCos(psi) * cxp - mathSin(psi) * cyp;\n  var cy = (y1 + y2) / 2.0 + mathSin(psi) * cxp + mathCos(psi) * cyp;\n  var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n  var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  var dTheta = vAngle(u, v);\n\n  if (vRatio(u, v) <= -1) {\n    dTheta = PI;\n  }\n\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n\n  if (fs === 0 && dTheta > 0) {\n    dTheta = dTheta - 2 * PI;\n  }\n\n  if (fs === 1 && dTheta < 0) {\n    dTheta = dTheta + 2 * PI;\n  }\n\n  path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\n\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig; // Consider case:\n// (1) delimiter can be comma or space, where continuous commas\n// or spaces should be seen as one comma.\n// (2) value can be like:\n// '2e-4', 'l.5.9' (ignore 0), 'M-10-10', 'l-2.43e-1,34.9983',\n// 'l-.5E1,54', '121-23-44-11' (no delimiter)\n\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g; // var valueSplitReg = /[\\s,]+/;\n\nfunction createPathProxyFromString(data) {\n  if (!data) {\n    return new PathProxy();\n  } // var data = data.replace(/-/g, ' -')\n  //     .replace(/  /g, ' ')\n  //     .replace(/ /g, ',')\n  //     .replace(/,,/g, ',');\n  // var n;\n  // create pipes so that we can split the data\n  // for (n = 0; n < cc.length; n++) {\n  //     cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n  // }\n  // data = data.replace(/-/g, ',-');\n  // create array\n  // var arr = cs.split('|');\n  // init context point\n\n\n  var cpx = 0;\n  var cpy = 0;\n  var subpathX = cpx;\n  var subpathY = cpy;\n  var prevCmd;\n  var path = new PathProxy();\n  var CMD = PathProxy.CMD; // commandReg.lastIndex = 0;\n  // var cmdResult;\n  // while ((cmdResult = commandReg.exec(data)) != null) {\n  //     var cmdStr = cmdResult[1];\n  //     var cmdContent = cmdResult[2];\n\n  var cmdList = data.match(commandReg);\n\n  for (var l = 0; l < cmdList.length; l++) {\n    var cmdText = cmdList[l];\n    var cmdStr = cmdText.charAt(0);\n    var cmd; // String#split is faster a little bit than String#replace or RegExp#exec.\n    // var p = cmdContent.split(valueSplitReg);\n    // var pLen = 0;\n    // for (var i = 0; i < p.length; i++) {\n    //     // '' and other invalid str => NaN\n    //     var val = parseFloat(p[i]);\n    //     !isNaN(val) && (p[pLen++] = val);\n    // }\n\n    var p = cmdText.match(numberReg) || [];\n    var pLen = p.length;\n\n    for (var i = 0; i < pLen; i++) {\n      p[i] = parseFloat(p[i]);\n    }\n\n    var off = 0;\n\n    while (off < pLen) {\n      var ctlPtx;\n      var ctlPty;\n      var rx;\n      var ry;\n      var psi;\n      var fa;\n      var fs;\n      var x1 = cpx;\n      var y1 = cpy; // convert l, H, h, V, and v to L\n\n      switch (cmdStr) {\n        case 'l':\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'L':\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'm':\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.M;\n          path.addData(cmd, cpx, cpy);\n          subpathX = cpx;\n          subpathY = cpy;\n          cmdStr = 'l';\n          break;\n\n        case 'M':\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.M;\n          path.addData(cmd, cpx, cpy);\n          subpathX = cpx;\n          subpathY = cpy;\n          cmdStr = 'L';\n          break;\n\n        case 'h':\n          cpx += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'H':\n          cpx = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'v':\n          cpy += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'V':\n          cpy = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'C':\n          cmd = CMD.C;\n          path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n          cpx = p[off - 2];\n          cpy = p[off - 1];\n          break;\n\n        case 'c':\n          cmd = CMD.C;\n          path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n          cpx += p[off - 2];\n          cpy += p[off - 1];\n          break;\n\n        case 'S':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.C) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cmd = CMD.C;\n          x1 = p[off++];\n          y1 = p[off++];\n          cpx = p[off++];\n          cpy = p[off++];\n          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n          break;\n\n        case 's':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.C) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cmd = CMD.C;\n          x1 = cpx + p[off++];\n          y1 = cpy + p[off++];\n          cpx += p[off++];\n          cpy += p[off++];\n          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n          break;\n\n        case 'Q':\n          x1 = p[off++];\n          y1 = p[off++];\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, x1, y1, cpx, cpy);\n          break;\n\n        case 'q':\n          x1 = p[off++] + cpx;\n          y1 = p[off++] + cpy;\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, x1, y1, cpx, cpy);\n          break;\n\n        case 'T':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.Q) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case 't':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.Q) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case 'A':\n          rx = p[off++];\n          ry = p[off++];\n          psi = p[off++];\n          fa = p[off++];\n          fs = p[off++];\n          x1 = cpx, y1 = cpy;\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.A;\n          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n          break;\n\n        case 'a':\n          rx = p[off++];\n          ry = p[off++];\n          psi = p[off++];\n          fa = p[off++];\n          fs = p[off++];\n          x1 = cpx, y1 = cpy;\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.A;\n          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n          break;\n      }\n    }\n\n    if (cmdStr === 'z' || cmdStr === 'Z') {\n      cmd = CMD.Z;\n      path.addData(cmd); // z may be in the middle of the path.\n\n      cpx = subpathX;\n      cpy = subpathY;\n    }\n\n    prevCmd = cmd;\n  }\n\n  path.toStatic();\n  return path;\n} // TODO Optimize double memory cost problem\n\n\nfunction createPathOptions(str, opts) {\n  var pathProxy = createPathProxyFromString(str);\n  opts = opts || {};\n\n  opts.buildPath = function (path) {\n    if (path.setData) {\n      path.setData(pathProxy.data); // Svg and vml renderer don't have context\n\n      var ctx = path.getContext();\n\n      if (ctx) {\n        path.rebuildPath(ctx);\n      }\n    } else {\n      var ctx = path;\n      pathProxy.rebuildPath(ctx);\n    }\n  };\n\n  opts.applyTransform = function (m) {\n    transformPath(pathProxy, m);\n    this.dirty(true);\n  };\n\n  return opts;\n}\n/**\n * Create a Path object from path string data\n * http://www.w3.org/TR/SVG/paths.html#PathData\n * @param  {Object} opts Other options\n */\n\n\nfunction createFromString(str, opts) {\n  return new Path(createPathOptions(str, opts));\n}\n/**\n * Create a Path class from path string data\n * @param  {string} str\n * @param  {Object} opts Other options\n */\n\n\nfunction extendFromString(str, opts) {\n  return Path.extend(createPathOptions(str, opts));\n}\n/**\n * Merge multiple paths\n */\n// TODO Apply transform\n// TODO stroke dash\n// TODO Optimize double memory cost problem\n\n\nfunction mergePath(pathEls, opts) {\n  var pathList = [];\n  var len = pathEls.length;\n\n  for (var i = 0; i < len; i++) {\n    var pathEl = pathEls[i];\n\n    if (!pathEl.path) {\n      pathEl.createPathProxy();\n    }\n\n    if (pathEl.__dirtyPath) {\n      pathEl.buildPath(pathEl.path, pathEl.shape, true);\n    }\n\n    pathList.push(pathEl.path);\n  }\n\n  var pathBundle = new Path(opts); // Need path proxy.\n\n  pathBundle.createPathProxy();\n\n  pathBundle.buildPath = function (path) {\n    path.appendPath(pathList); // Svg and vml renderer don't have context\n\n    var ctx = path.getContext();\n\n    if (ctx) {\n      path.rebuildPath(ctx);\n    }\n  };\n\n  return pathBundle;\n}\n\nexports.createFromString = createFromString;\nexports.extendFromString = extendFromString;\nexports.mergePath = mergePath;","var _util = require(\"../core/util\");\n\nvar inherits = _util.inherits;\n\nvar Displayble = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\n/**\n * Displayable for incremental rendering. It will be rendered in a separate layer\n * IncrementalDisplay have two main methods. `clearDisplayables` and `addDisplayables`\n * addDisplayables will render the added displayables incremetally.\n *\n * It use a not clearFlag to tell the painter don't clear the layer if it's the first element.\n */\n// TODO Style override ?\nfunction IncrementalDisplayble(opts) {\n  Displayble.call(this, opts);\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.notClear = true;\n}\n\nIncrementalDisplayble.prototype.incremental = true;\n\nIncrementalDisplayble.prototype.clearDisplaybles = function () {\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.dirty();\n  this.notClear = false;\n};\n\nIncrementalDisplayble.prototype.addDisplayable = function (displayable, notPersistent) {\n  if (notPersistent) {\n    this._temporaryDisplayables.push(displayable);\n  } else {\n    this._displayables.push(displayable);\n  }\n\n  this.dirty();\n};\n\nIncrementalDisplayble.prototype.addDisplayables = function (displayables, notPersistent) {\n  notPersistent = notPersistent || false;\n\n  for (var i = 0; i < displayables.length; i++) {\n    this.addDisplayable(displayables[i], notPersistent);\n  }\n};\n\nIncrementalDisplayble.prototype.eachPendingDisplayable = function (cb) {\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    cb && cb(this._displayables[i]);\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    cb && cb(this._temporaryDisplayables[i]);\n  }\n};\n\nIncrementalDisplayble.prototype.update = function () {\n  this.updateTransform();\n\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n};\n\nIncrementalDisplayble.prototype.brush = function (ctx, prevEl) {\n  // Render persistant displayables.\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === this._cursor ? null : this._displayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._cursor = i; // Render temporary displayables.\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === 0 ? null : this._temporaryDisplayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._temporaryDisplayables = [];\n  this.notClear = true;\n};\n\nvar m = [];\n\nIncrementalDisplayble.prototype.getBoundingRect = function () {\n  if (!this._rect) {\n    var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n      var childRect = displayable.getBoundingRect().clone();\n\n      if (displayable.needLocalTransform()) {\n        childRect.applyTransform(displayable.getLocalTransform(m));\n      }\n\n      rect.union(childRect);\n    }\n\n    this._rect = rect;\n  }\n\n  return this._rect;\n};\n\nIncrementalDisplayble.prototype.contain = function (x, y) {\n  var localPos = this.transformCoordToLocal(x, y);\n  var rect = this.getBoundingRect();\n\n  if (rect.contain(localPos[0], localPos[1])) {\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n\n      if (displayable.contain(x, y)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\ninherits(IncrementalDisplayble, Displayble);\nvar _default = IncrementalDisplayble;\nmodule.exports = _default;","var _core = require(\"./core\");\n\nvar createElement = _core.createElement;\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar matrix = require(\"../core/matrix\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"../graphic/helper/text\");\n\nvar Text = require(\"../graphic/Text\");\n\n// TODO\n// 1. shadow\n// 2. Image: sx, sy, sw, sh\nvar CMD = PathProxy.CMD;\nvar arrayJoin = Array.prototype.join;\nvar NONE = 'none';\nvar mathRound = Math.round;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar EPSILON = 1e-4;\n\nfunction round4(val) {\n  return mathRound(val * 1e4) / 1e4;\n}\n\nfunction isAroundZero(val) {\n  return val < EPSILON && val > -EPSILON;\n}\n\nfunction pathHasFill(style, isText) {\n  var fill = isText ? style.textFill : style.fill;\n  return fill != null && fill !== NONE;\n}\n\nfunction pathHasStroke(style, isText) {\n  var stroke = isText ? style.textStroke : style.stroke;\n  return stroke != null && stroke !== NONE;\n}\n\nfunction setTransform(svgEl, m) {\n  if (m) {\n    attr(svgEl, 'transform', 'matrix(' + arrayJoin.call(m, ',') + ')');\n  }\n}\n\nfunction attr(el, key, val) {\n  if (!val || val.type !== 'linear' && val.type !== 'radial') {\n    // Don't set attribute for gradient, since it need new dom nodes\n    el.setAttribute(key, val);\n  }\n}\n\nfunction attrXLink(el, key, val) {\n  el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\n}\n\nfunction bindStyle(svgEl, style, isText, el) {\n  if (pathHasFill(style, isText)) {\n    var fill = isText ? style.textFill : style.fill;\n    fill = fill === 'transparent' ? NONE : fill;\n    attr(svgEl, 'fill', fill);\n    attr(svgEl, 'fill-opacity', style.fillOpacity != null ? style.fillOpacity * style.opacity : style.opacity);\n  } else {\n    attr(svgEl, 'fill', NONE);\n  }\n\n  if (pathHasStroke(style, isText)) {\n    var stroke = isText ? style.textStroke : style.stroke;\n    stroke = stroke === 'transparent' ? NONE : stroke;\n    attr(svgEl, 'stroke', stroke);\n    var strokeWidth = isText ? style.textStrokeWidth : style.lineWidth;\n    var strokeScale = !isText && style.strokeNoScale ? el.getLineScale() : 1;\n    attr(svgEl, 'stroke-width', strokeWidth / strokeScale); // stroke then fill for text; fill then stroke for others\n\n    attr(svgEl, 'paint-order', isText ? 'stroke' : 'fill');\n    attr(svgEl, 'stroke-opacity', style.strokeOpacity != null ? style.strokeOpacity : style.opacity);\n    var lineDash = style.lineDash;\n\n    if (lineDash) {\n      attr(svgEl, 'stroke-dasharray', style.lineDash.join(','));\n      attr(svgEl, 'stroke-dashoffset', mathRound(style.lineDashOffset || 0));\n    } else {\n      attr(svgEl, 'stroke-dasharray', '');\n    } // PENDING\n\n\n    style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\n    style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\n    style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit);\n  } else {\n    attr(svgEl, 'stroke', NONE);\n  }\n}\n/***************************************************\n * PATH\n **************************************************/\n\n\nfunction pathDataToString(path) {\n  var str = [];\n  var data = path.data;\n  var dataLength = path.len();\n\n  for (var i = 0; i < dataLength;) {\n    var cmd = data[i++];\n    var cmdStr = '';\n    var nData = 0;\n\n    switch (cmd) {\n      case CMD.M:\n        cmdStr = 'M';\n        nData = 2;\n        break;\n\n      case CMD.L:\n        cmdStr = 'L';\n        nData = 2;\n        break;\n\n      case CMD.Q:\n        cmdStr = 'Q';\n        nData = 4;\n        break;\n\n      case CMD.C:\n        cmdStr = 'C';\n        nData = 6;\n        break;\n\n      case CMD.A:\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++];\n        var psi = data[i++];\n        var clockwise = data[i++];\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2) || (clockwise ? dTheta >= PI2 : -dTheta >= PI2); // Mapping to 0~2PI\n\n        var unifiedTheta = dTheta > 0 ? dTheta % PI2 : dTheta % PI2 + PI2;\n        var large = false;\n\n        if (isCircle) {\n          large = true;\n        } else if (isAroundZero(dThetaPositive)) {\n          large = false;\n        } else {\n          large = unifiedTheta >= PI === !!clockwise;\n        }\n\n        var x0 = round4(cx + rx * mathCos(theta));\n        var y0 = round4(cy + ry * mathSin(theta)); // It will not draw if start point and end point are exactly the same\n        // We need to shift the end point with a small value\n        // FIXME A better way to draw circle ?\n\n        if (isCircle) {\n          if (clockwise) {\n            dTheta = PI2 - 1e-4;\n          } else {\n            dTheta = -PI2 + 1e-4;\n          }\n\n          large = true;\n\n          if (i === 9) {\n            // Move to (x0, y0) only when CMD.A comes at the\n            // first position of a shape.\n            // For instance, when drawing a ring, CMD.A comes\n            // after CMD.M, so it's unnecessary to move to\n            // (x0, y0).\n            str.push('M', x0, y0);\n          }\n        }\n\n        var x = round4(cx + rx * mathCos(theta + dTheta));\n        var y = round4(cy + ry * mathSin(theta + dTheta)); // FIXME Ellipse\n\n        str.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\n        break;\n\n      case CMD.Z:\n        cmdStr = 'Z';\n        break;\n\n      case CMD.R:\n        var x = round4(data[i++]);\n        var y = round4(data[i++]);\n        var w = round4(data[i++]);\n        var h = round4(data[i++]);\n        str.push('M', x, y, 'L', x + w, y, 'L', x + w, y + h, 'L', x, y + h, 'L', x, y);\n        break;\n    }\n\n    cmdStr && str.push(cmdStr);\n\n    for (var j = 0; j < nData; j++) {\n      // PENDING With scale\n      str.push(round4(data[i++]));\n    }\n  }\n\n  return str.join(' ');\n}\n\nvar svgPath = {};\n\nsvgPath.brush = function (el) {\n  var style = el.style;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('path');\n    el.__svgEl = svgEl;\n  }\n\n  if (!el.path) {\n    el.createPathProxy();\n  }\n\n  var path = el.path;\n\n  if (el.__dirtyPath) {\n    path.beginPath();\n    path.subPixelOptimize = false;\n    el.buildPath(path, el.shape);\n    el.__dirtyPath = false;\n    var pathStr = pathDataToString(path);\n\n    if (pathStr.indexOf('NaN') < 0) {\n      // Ignore illegal path, which may happen such in out-of-range\n      // data in Calendar series.\n      attr(svgEl, 'd', pathStr);\n    }\n  }\n\n  bindStyle(svgEl, style, false, el);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  } else {\n    removeOldTextNode(el);\n  }\n};\n/***************************************************\n * IMAGE\n **************************************************/\n\n\nvar svgImage = {};\n\nsvgImage.brush = function (el) {\n  var style = el.style;\n  var image = style.image;\n\n  if (image instanceof HTMLImageElement) {\n    var src = image.src;\n    image = src;\n  }\n\n  if (!image) {\n    return;\n  }\n\n  var x = style.x || 0;\n  var y = style.y || 0;\n  var dw = style.width;\n  var dh = style.height;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('image');\n    el.__svgEl = svgEl;\n  }\n\n  if (image !== el.__imageSrc) {\n    attrXLink(svgEl, 'href', image); // Caching image src\n\n    el.__imageSrc = image;\n  }\n\n  attr(svgEl, 'width', dw);\n  attr(svgEl, 'height', dh);\n  attr(svgEl, 'x', x);\n  attr(svgEl, 'y', y);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  } else {\n    removeOldTextNode(el);\n  }\n};\n/***************************************************\n * TEXT\n **************************************************/\n\n\nvar svgText = {};\n\nvar _tmpTextHostRect = new BoundingRect();\n\nvar _tmpTextBoxPos = {};\nvar _tmpTextTransform = [];\nvar TEXT_ALIGN_TO_ANCHRO = {\n  left: 'start',\n  right: 'end',\n  center: 'middle',\n  middle: 'middle'\n};\n/**\n * @param {module:zrender/Element} el\n * @param {Object|boolean} [hostRect] {x, y, width, height}\n *        If set false, rect text is not used.\n */\n\nvar svgTextDrawRectText = function (el, hostRect) {\n  var style = el.style;\n  var elTransform = el.transform;\n  var needTransformTextByHostEl = el instanceof Text || style.transformText;\n  el.__dirty && textHelper.normalizeTextStyle(style, true);\n  var text = style.text; // Convert to string\n\n  text != null && (text += '');\n\n  if (!textHelper.needDrawText(text, style)) {\n    return;\n  } // render empty text for svg if no text but need draw text.\n\n\n  text == null && (text = ''); // Follow the setting in the canvas renderer, if not transform the\n  // text, transform the hostRect, by which the text is located.\n\n  if (!needTransformTextByHostEl && elTransform) {\n    _tmpTextHostRect.copy(hostRect);\n\n    _tmpTextHostRect.applyTransform(elTransform);\n\n    hostRect = _tmpTextHostRect;\n  }\n\n  var textSvgEl = el.__textSvgEl;\n\n  if (!textSvgEl) {\n    textSvgEl = createElement('text');\n    el.__textSvgEl = textSvgEl;\n  } // style.font has been normalized by `normalizeTextStyle`.\n\n\n  var textSvgElStyle = textSvgEl.style;\n  var font = style.font || textContain.DEFAULT_FONT;\n  var computedFont = textSvgEl.__computedFont;\n\n  if (font !== textSvgEl.__styleFont) {\n    textSvgElStyle.font = textSvgEl.__styleFont = font; // The computedFont might not be the orginal font if it is illegal font.\n\n    computedFont = textSvgEl.__computedFont = textSvgElStyle.font;\n  }\n\n  var textPadding = style.textPadding;\n  var textLineHeight = style.textLineHeight;\n  var contentBlock = el.__textCotentBlock;\n\n  if (!contentBlock || el.__dirtyText) {\n    contentBlock = el.__textCotentBlock = textContain.parsePlainText(text, computedFont, textPadding, textLineHeight, style.truncate);\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var lineHeight = contentBlock.lineHeight;\n  textHelper.getBoxPosition(_tmpTextBoxPos, el, style, hostRect);\n  var baseX = _tmpTextBoxPos.baseX;\n  var baseY = _tmpTextBoxPos.baseY;\n  var textAlign = _tmpTextBoxPos.textAlign || 'left';\n  var textVerticalAlign = _tmpTextBoxPos.textVerticalAlign;\n  setTextTransform(textSvgEl, needTransformTextByHostEl, elTransform, style, hostRect, baseX, baseY);\n  var boxY = textContain.adjustTextY(baseY, outerHeight, textVerticalAlign);\n  var textX = baseX;\n  var textY = boxY; // TODO needDrawBg\n\n  if (textPadding) {\n    textX = getTextXForPadding(baseX, textAlign, textPadding);\n    textY += textPadding[0];\n  } // `textBaseline` is set as 'middle'.\n\n\n  textY += lineHeight / 2;\n  bindStyle(textSvgEl, style, true, el); // FIXME\n  // Add a <style> to reset all of the text font as inherit?\n  // otherwise the outer <style> may set the unexpected style.\n  // Font may affect position of each tspan elements\n\n  var canCacheByTextString = contentBlock.canCacheByTextString;\n  var tspanList = el.__tspanList || (el.__tspanList = []);\n  var tspanOriginLen = tspanList.length; // Optimize for most cases, just compare text string to determine change.\n\n  if (canCacheByTextString && el.__canCacheByTextString && el.__text === text) {\n    if (el.__dirtyText && tspanOriginLen) {\n      for (var idx = 0; idx < tspanOriginLen; ++idx) {\n        updateTextLocation(tspanList[idx], textAlign, textX, textY + idx * lineHeight);\n      }\n    }\n  } else {\n    el.__text = text;\n    el.__canCacheByTextString = canCacheByTextString;\n    var textLines = contentBlock.lines;\n    var nTextLines = textLines.length;\n    var idx = 0;\n\n    for (; idx < nTextLines; idx++) {\n      // Using cached tspan elements\n      var tspan = tspanList[idx];\n      var singleLineText = textLines[idx];\n\n      if (!tspan) {\n        tspan = tspanList[idx] = createElement('tspan');\n        textSvgEl.appendChild(tspan);\n        tspan.appendChild(document.createTextNode(singleLineText));\n      } else if (tspan.__zrText !== singleLineText) {\n        tspan.innerHTML = '';\n        tspan.appendChild(document.createTextNode(singleLineText));\n      }\n\n      updateTextLocation(tspan, textAlign, textX, textY + idx * lineHeight);\n    } // Remove unused tspan elements\n\n\n    if (tspanOriginLen > nTextLines) {\n      for (; idx < tspanOriginLen; idx++) {\n        textSvgEl.removeChild(tspanList[idx]);\n      }\n\n      tspanList.length = nTextLines;\n    }\n  }\n};\n\nfunction setTextTransform(textSvgEl, needTransformTextByHostEl, elTransform, style, hostRect, baseX, baseY) {\n  matrix.identity(_tmpTextTransform);\n\n  if (needTransformTextByHostEl && elTransform) {\n    matrix.copy(_tmpTextTransform, elTransform);\n  } // textRotation only apply in RectText.\n\n\n  var textRotation = style.textRotation;\n\n  if (hostRect && textRotation) {\n    var origin = style.textOrigin;\n\n    if (origin === 'center') {\n      baseX = hostRect.width / 2 + hostRect.x;\n      baseY = hostRect.height / 2 + hostRect.y;\n    } else if (origin) {\n      baseX = origin[0] + hostRect.x;\n      baseY = origin[1] + hostRect.y;\n    }\n\n    _tmpTextTransform[4] -= baseX;\n    _tmpTextTransform[5] -= baseY; // Positive: anticlockwise\n\n    matrix.rotate(_tmpTextTransform, _tmpTextTransform, textRotation);\n    _tmpTextTransform[4] += baseX;\n    _tmpTextTransform[5] += baseY;\n  } // See the definition in `Style.js#textOrigin`, the default\n  // origin is from the result of `getBoxPosition`.\n\n\n  setTransform(textSvgEl, _tmpTextTransform);\n} // FIXME merge the same code with `helper/text.js#getTextXForPadding`;\n\n\nfunction getTextXForPadding(x, textAlign, textPadding) {\n  return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n}\n\nfunction updateTextLocation(tspan, textAlign, x, y) {\n  // Consider different font display differently in vertial align, we always\n  // set vertialAlign as 'middle', and use 'y' to locate text vertically.\n  attr(tspan, 'dominant-baseline', 'middle');\n  attr(tspan, 'text-anchor', TEXT_ALIGN_TO_ANCHRO[textAlign]);\n  attr(tspan, 'x', x);\n  attr(tspan, 'y', y);\n}\n\nfunction removeOldTextNode(el) {\n  if (el && el.__textSvgEl) {\n    // textSvgEl may has no parentNode if el has been removed temporary.\n    if (el.__textSvgEl.parentNode) {\n      el.__textSvgEl.parentNode.removeChild(el.__textSvgEl);\n    }\n\n    el.__textSvgEl = null;\n    el.__tspanList = [];\n    el.__text = null;\n  }\n}\n\nsvgText.drawRectText = svgTextDrawRectText;\n\nsvgText.brush = function (el) {\n  var style = el.style;\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, false);\n  } else {\n    removeOldTextNode(el);\n  }\n};\n\nexports.path = svgPath;\nexports.image = svgImage;\nexports.text = svgText;","/* global Float32Array */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * 创建一个向量\n * @param {number} [x=0]\n * @param {number} [y=0]\n * @return {Vector2}\n */\n\nfunction create(x, y) {\n  var out = new ArrayCtor(2);\n\n  if (x == null) {\n    x = 0;\n  }\n\n  if (y == null) {\n    y = 0;\n  }\n\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * 复制向量数据\n * @param {Vector2} out\n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction copy(out, v) {\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * 克隆一个向量\n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction clone(v) {\n  var out = new ArrayCtor(2);\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * 设置向量的两个项\n * @param {Vector2} out\n * @param {number} a\n * @param {number} b\n * @return {Vector2} 结果\n */\n\n\nfunction set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n/**\n * 向量相加\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction add(out, v1, v2) {\n  out[0] = v1[0] + v2[0];\n  out[1] = v1[1] + v2[1];\n  return out;\n}\n/**\n * 向量缩放后相加\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} a\n */\n\n\nfunction scaleAndAdd(out, v1, v2, a) {\n  out[0] = v1[0] + v2[0] * a;\n  out[1] = v1[1] + v2[1] * a;\n  return out;\n}\n/**\n * 向量相减\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction sub(out, v1, v2) {\n  out[0] = v1[0] - v2[0];\n  out[1] = v1[1] - v2[1];\n  return out;\n}\n/**\n * 向量长度\n * @param {Vector2} v\n * @return {number}\n */\n\n\nfunction len(v) {\n  return Math.sqrt(lenSquare(v));\n}\n\nvar length = len; // jshint ignore:line\n\n/**\n * 向量长度平方\n * @param {Vector2} v\n * @return {number}\n */\n\nfunction lenSquare(v) {\n  return v[0] * v[0] + v[1] * v[1];\n}\n\nvar lengthSquare = lenSquare;\n/**\n * 向量乘法\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\nfunction mul(out, v1, v2) {\n  out[0] = v1[0] * v2[0];\n  out[1] = v1[1] * v2[1];\n  return out;\n}\n/**\n * 向量除法\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction div(out, v1, v2) {\n  out[0] = v1[0] / v2[0];\n  out[1] = v1[1] / v2[1];\n  return out;\n}\n/**\n * 向量点乘\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction dot(v1, v2) {\n  return v1[0] * v2[0] + v1[1] * v2[1];\n}\n/**\n * 向量缩放\n * @param {Vector2} out\n * @param {Vector2} v\n * @param {number} s\n */\n\n\nfunction scale(out, v, s) {\n  out[0] = v[0] * s;\n  out[1] = v[1] * s;\n  return out;\n}\n/**\n * 向量归一化\n * @param {Vector2} out\n * @param {Vector2} v\n */\n\n\nfunction normalize(out, v) {\n  var d = len(v);\n\n  if (d === 0) {\n    out[0] = 0;\n    out[1] = 0;\n  } else {\n    out[0] = v[0] / d;\n    out[1] = v[1] / d;\n  }\n\n  return out;\n}\n/**\n * 计算向量间距离\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction distance(v1, v2) {\n  return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\n\nvar dist = distance;\n/**\n * 向量距离平方\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\nfunction distanceSquare(v1, v2) {\n  return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\n\nvar distSquare = distanceSquare;\n/**\n * 求负向量\n * @param {Vector2} out\n * @param {Vector2} v\n */\n\nfunction negate(out, v) {\n  out[0] = -v[0];\n  out[1] = -v[1];\n  return out;\n}\n/**\n * 插值两个点\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} t\n */\n\n\nfunction lerp(out, v1, v2, t) {\n  out[0] = v1[0] + t * (v2[0] - v1[0]);\n  out[1] = v1[1] + t * (v2[1] - v1[1]);\n  return out;\n}\n/**\n * 矩阵左乘向量\n * @param {Vector2} out\n * @param {Vector2} v\n * @param {Vector2} m\n */\n\n\nfunction applyTransform(out, v, m) {\n  var x = v[0];\n  var y = v[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * 求两个向量最小值\n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction min(out, v1, v2) {\n  out[0] = Math.min(v1[0], v2[0]);\n  out[1] = Math.min(v1[1], v2[1]);\n  return out;\n}\n/**\n * 求两个向量最大值\n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction max(out, v1, v2) {\n  out[0] = Math.max(v1[0], v2[0]);\n  out[1] = Math.max(v1[1], v2[1]);\n  return out;\n}\n\nexports.create = create;\nexports.copy = copy;\nexports.clone = clone;\nexports.set = set;\nexports.add = add;\nexports.scaleAndAdd = scaleAndAdd;\nexports.sub = sub;\nexports.len = len;\nexports.length = length;\nexports.lenSquare = lenSquare;\nexports.lengthSquare = lengthSquare;\nexports.mul = mul;\nexports.div = div;\nexports.dot = dot;\nexports.scale = scale;\nexports.normalize = normalize;\nexports.distance = distance;\nexports.dist = dist;\nexports.distanceSquare = distanceSquare;\nexports.distSquare = distSquare;\nexports.negate = negate;\nexports.lerp = lerp;\nexports.applyTransform = applyTransform;\nexports.min = min;\nexports.max = max;","var LRU = require(\"../core/LRU\");\n\nvar kCSSColorTable = {\n  'transparent': [0, 0, 0, 0],\n  'aliceblue': [240, 248, 255, 1],\n  'antiquewhite': [250, 235, 215, 1],\n  'aqua': [0, 255, 255, 1],\n  'aquamarine': [127, 255, 212, 1],\n  'azure': [240, 255, 255, 1],\n  'beige': [245, 245, 220, 1],\n  'bisque': [255, 228, 196, 1],\n  'black': [0, 0, 0, 1],\n  'blanchedalmond': [255, 235, 205, 1],\n  'blue': [0, 0, 255, 1],\n  'blueviolet': [138, 43, 226, 1],\n  'brown': [165, 42, 42, 1],\n  'burlywood': [222, 184, 135, 1],\n  'cadetblue': [95, 158, 160, 1],\n  'chartreuse': [127, 255, 0, 1],\n  'chocolate': [210, 105, 30, 1],\n  'coral': [255, 127, 80, 1],\n  'cornflowerblue': [100, 149, 237, 1],\n  'cornsilk': [255, 248, 220, 1],\n  'crimson': [220, 20, 60, 1],\n  'cyan': [0, 255, 255, 1],\n  'darkblue': [0, 0, 139, 1],\n  'darkcyan': [0, 139, 139, 1],\n  'darkgoldenrod': [184, 134, 11, 1],\n  'darkgray': [169, 169, 169, 1],\n  'darkgreen': [0, 100, 0, 1],\n  'darkgrey': [169, 169, 169, 1],\n  'darkkhaki': [189, 183, 107, 1],\n  'darkmagenta': [139, 0, 139, 1],\n  'darkolivegreen': [85, 107, 47, 1],\n  'darkorange': [255, 140, 0, 1],\n  'darkorchid': [153, 50, 204, 1],\n  'darkred': [139, 0, 0, 1],\n  'darksalmon': [233, 150, 122, 1],\n  'darkseagreen': [143, 188, 143, 1],\n  'darkslateblue': [72, 61, 139, 1],\n  'darkslategray': [47, 79, 79, 1],\n  'darkslategrey': [47, 79, 79, 1],\n  'darkturquoise': [0, 206, 209, 1],\n  'darkviolet': [148, 0, 211, 1],\n  'deeppink': [255, 20, 147, 1],\n  'deepskyblue': [0, 191, 255, 1],\n  'dimgray': [105, 105, 105, 1],\n  'dimgrey': [105, 105, 105, 1],\n  'dodgerblue': [30, 144, 255, 1],\n  'firebrick': [178, 34, 34, 1],\n  'floralwhite': [255, 250, 240, 1],\n  'forestgreen': [34, 139, 34, 1],\n  'fuchsia': [255, 0, 255, 1],\n  'gainsboro': [220, 220, 220, 1],\n  'ghostwhite': [248, 248, 255, 1],\n  'gold': [255, 215, 0, 1],\n  'goldenrod': [218, 165, 32, 1],\n  'gray': [128, 128, 128, 1],\n  'green': [0, 128, 0, 1],\n  'greenyellow': [173, 255, 47, 1],\n  'grey': [128, 128, 128, 1],\n  'honeydew': [240, 255, 240, 1],\n  'hotpink': [255, 105, 180, 1],\n  'indianred': [205, 92, 92, 1],\n  'indigo': [75, 0, 130, 1],\n  'ivory': [255, 255, 240, 1],\n  'khaki': [240, 230, 140, 1],\n  'lavender': [230, 230, 250, 1],\n  'lavenderblush': [255, 240, 245, 1],\n  'lawngreen': [124, 252, 0, 1],\n  'lemonchiffon': [255, 250, 205, 1],\n  'lightblue': [173, 216, 230, 1],\n  'lightcoral': [240, 128, 128, 1],\n  'lightcyan': [224, 255, 255, 1],\n  'lightgoldenrodyellow': [250, 250, 210, 1],\n  'lightgray': [211, 211, 211, 1],\n  'lightgreen': [144, 238, 144, 1],\n  'lightgrey': [211, 211, 211, 1],\n  'lightpink': [255, 182, 193, 1],\n  'lightsalmon': [255, 160, 122, 1],\n  'lightseagreen': [32, 178, 170, 1],\n  'lightskyblue': [135, 206, 250, 1],\n  'lightslategray': [119, 136, 153, 1],\n  'lightslategrey': [119, 136, 153, 1],\n  'lightsteelblue': [176, 196, 222, 1],\n  'lightyellow': [255, 255, 224, 1],\n  'lime': [0, 255, 0, 1],\n  'limegreen': [50, 205, 50, 1],\n  'linen': [250, 240, 230, 1],\n  'magenta': [255, 0, 255, 1],\n  'maroon': [128, 0, 0, 1],\n  'mediumaquamarine': [102, 205, 170, 1],\n  'mediumblue': [0, 0, 205, 1],\n  'mediumorchid': [186, 85, 211, 1],\n  'mediumpurple': [147, 112, 219, 1],\n  'mediumseagreen': [60, 179, 113, 1],\n  'mediumslateblue': [123, 104, 238, 1],\n  'mediumspringgreen': [0, 250, 154, 1],\n  'mediumturquoise': [72, 209, 204, 1],\n  'mediumvioletred': [199, 21, 133, 1],\n  'midnightblue': [25, 25, 112, 1],\n  'mintcream': [245, 255, 250, 1],\n  'mistyrose': [255, 228, 225, 1],\n  'moccasin': [255, 228, 181, 1],\n  'navajowhite': [255, 222, 173, 1],\n  'navy': [0, 0, 128, 1],\n  'oldlace': [253, 245, 230, 1],\n  'olive': [128, 128, 0, 1],\n  'olivedrab': [107, 142, 35, 1],\n  'orange': [255, 165, 0, 1],\n  'orangered': [255, 69, 0, 1],\n  'orchid': [218, 112, 214, 1],\n  'palegoldenrod': [238, 232, 170, 1],\n  'palegreen': [152, 251, 152, 1],\n  'paleturquoise': [175, 238, 238, 1],\n  'palevioletred': [219, 112, 147, 1],\n  'papayawhip': [255, 239, 213, 1],\n  'peachpuff': [255, 218, 185, 1],\n  'peru': [205, 133, 63, 1],\n  'pink': [255, 192, 203, 1],\n  'plum': [221, 160, 221, 1],\n  'powderblue': [176, 224, 230, 1],\n  'purple': [128, 0, 128, 1],\n  'red': [255, 0, 0, 1],\n  'rosybrown': [188, 143, 143, 1],\n  'royalblue': [65, 105, 225, 1],\n  'saddlebrown': [139, 69, 19, 1],\n  'salmon': [250, 128, 114, 1],\n  'sandybrown': [244, 164, 96, 1],\n  'seagreen': [46, 139, 87, 1],\n  'seashell': [255, 245, 238, 1],\n  'sienna': [160, 82, 45, 1],\n  'silver': [192, 192, 192, 1],\n  'skyblue': [135, 206, 235, 1],\n  'slateblue': [106, 90, 205, 1],\n  'slategray': [112, 128, 144, 1],\n  'slategrey': [112, 128, 144, 1],\n  'snow': [255, 250, 250, 1],\n  'springgreen': [0, 255, 127, 1],\n  'steelblue': [70, 130, 180, 1],\n  'tan': [210, 180, 140, 1],\n  'teal': [0, 128, 128, 1],\n  'thistle': [216, 191, 216, 1],\n  'tomato': [255, 99, 71, 1],\n  'turquoise': [64, 224, 208, 1],\n  'violet': [238, 130, 238, 1],\n  'wheat': [245, 222, 179, 1],\n  'white': [255, 255, 255, 1],\n  'whitesmoke': [245, 245, 245, 1],\n  'yellow': [255, 255, 0, 1],\n  'yellowgreen': [154, 205, 50, 1]\n};\n\nfunction clampCssByte(i) {\n  // Clamp to integer 0 .. 255.\n  i = Math.round(i); // Seems to be what Chrome does (vs truncation).\n\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {\n  // Clamp to integer 0 .. 360.\n  i = Math.round(i); // Seems to be what Chrome does (vs truncation).\n\n  return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {\n  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {\n  // int or percentage.\n  if (str.length && str.charAt(str.length - 1) === '%') {\n    return clampCssByte(parseFloat(str) / 100 * 255);\n  }\n\n  return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {\n  // float or percentage.\n  if (str.length && str.charAt(str.length - 1) === '%') {\n    return clampCssFloat(parseFloat(str) / 100);\n  }\n\n  return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n  if (h < 0) {\n    h += 1;\n  } else if (h > 1) {\n    h -= 1;\n  }\n\n  if (h * 6 < 1) {\n    return m1 + (m2 - m1) * h * 6;\n  }\n\n  if (h * 2 < 1) {\n    return m2;\n  }\n\n  if (h * 3 < 2) {\n    return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n  }\n\n  return m1;\n}\n\nfunction lerpNumber(a, b, p) {\n  return a + (b - a) * p;\n}\n\nfunction setRgba(out, r, g, b, a) {\n  out[0] = r;\n  out[1] = g;\n  out[2] = b;\n  out[3] = a;\n  return out;\n}\n\nfunction copyRgba(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\n\nfunction putToCache(colorStr, rgbaArr) {\n  // Reuse removed array\n  if (lastRemovedArr) {\n    copyRgba(lastRemovedArr, rgbaArr);\n  }\n\n  lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || rgbaArr.slice());\n}\n/**\n * @param {string} colorStr\n * @param {Array.<number>} out\n * @return {Array.<number>}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction parse(colorStr, rgbaArr) {\n  if (!colorStr) {\n    return;\n  }\n\n  rgbaArr = rgbaArr || [];\n  var cached = colorCache.get(colorStr);\n\n  if (cached) {\n    return copyRgba(rgbaArr, cached);\n  } // colorStr may be not string\n\n\n  colorStr = colorStr + ''; // Remove all whitespace, not compliant, but should just be more accepting.\n\n  var str = colorStr.replace(/ /g, '').toLowerCase(); // Color keywords (and transparent) lookup.\n\n  if (str in kCSSColorTable) {\n    copyRgba(rgbaArr, kCSSColorTable[str]);\n    putToCache(colorStr, rgbaArr);\n    return rgbaArr;\n  } // #abc and #abc123 syntax.\n\n\n  if (str.charAt(0) === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16); // TODO(deanm): Stricter parsing.\n\n      if (!(iv >= 0 && iv <= 0xfff)) {\n        setRgba(rgbaArr, 0, 0, 0, 1);\n        return; // Covers NaN.\n      }\n\n      setRgba(rgbaArr, (iv & 0xf00) >> 4 | (iv & 0xf00) >> 8, iv & 0xf0 | (iv & 0xf0) >> 4, iv & 0xf | (iv & 0xf) << 4, 1);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16); // TODO(deanm): Stricter parsing.\n\n      if (!(iv >= 0 && iv <= 0xffffff)) {\n        setRgba(rgbaArr, 0, 0, 0, 1);\n        return; // Covers NaN.\n      }\n\n      setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, 1);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    }\n\n    return;\n  }\n\n  var op = str.indexOf('(');\n  var ep = str.indexOf(')');\n\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op + 1, ep - (op + 1)).split(',');\n    var alpha = 1; // To allow case fallthrough.\n\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        alpha = parseCssFloat(params.pop());\n      // jshint ignore:line\n      // Fall through.\n\n      case 'rgb':\n        if (params.length !== 3) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      case 'hsla':\n        if (params.length !== 4) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        params[3] = parseCssFloat(params[3]);\n        hsla2rgba(params, rgbaArr);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      case 'hsl':\n        if (params.length !== 3) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        hsla2rgba(params, rgbaArr);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      default:\n        return;\n    }\n  }\n\n  setRgba(rgbaArr, 0, 0, 0, 1);\n  return;\n}\n/**\n * @param {Array.<number>} hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} rgba\n */\n\n\nfunction hsla2rgba(hsla, rgba) {\n  var h = (parseFloat(hsla[0]) % 360 + 360) % 360 / 360; // 0 .. 1\n  // NOTE(deanm): According to the CSS spec s/l should only be\n  // percentages, but we don't bother and let float or percentage.\n\n  var s = parseCssFloat(hsla[1]);\n  var l = parseCssFloat(hsla[2]);\n  var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n  var m1 = l * 2 - m2;\n  rgba = rgba || [];\n  setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n\n  if (hsla.length === 4) {\n    rgba[3] = hsla[3];\n  }\n\n  return rgba;\n}\n/**\n * @param {Array.<number>} rgba\n * @return {Array.<number>} hsla\n */\n\n\nfunction rgba2hsla(rgba) {\n  if (!rgba) {\n    return;\n  } // RGB from 0 to 255\n\n\n  var R = rgba[0] / 255;\n  var G = rgba[1] / 255;\n  var B = rgba[2] / 255;\n  var vMin = Math.min(R, G, B); // Min. value of RGB\n\n  var vMax = Math.max(R, G, B); // Max. value of RGB\n\n  var delta = vMax - vMin; // Delta RGB value\n\n  var L = (vMax + vMin) / 2;\n  var H;\n  var S; // HSL results from 0 to 1\n\n  if (delta === 0) {\n    H = 0;\n    S = 0;\n  } else {\n    if (L < 0.5) {\n      S = delta / (vMax + vMin);\n    } else {\n      S = delta / (2 - vMax - vMin);\n    }\n\n    var deltaR = ((vMax - R) / 6 + delta / 2) / delta;\n    var deltaG = ((vMax - G) / 6 + delta / 2) / delta;\n    var deltaB = ((vMax - B) / 6 + delta / 2) / delta;\n\n    if (R === vMax) {\n      H = deltaB - deltaG;\n    } else if (G === vMax) {\n      H = 1 / 3 + deltaR - deltaB;\n    } else if (B === vMax) {\n      H = 2 / 3 + deltaG - deltaR;\n    }\n\n    if (H < 0) {\n      H += 1;\n    }\n\n    if (H > 1) {\n      H -= 1;\n    }\n  }\n\n  var hsla = [H * 360, S, L];\n\n  if (rgba[3] != null) {\n    hsla.push(rgba[3]);\n  }\n\n  return hsla;\n}\n/**\n * @param {string} color\n * @param {number} level\n * @return {string}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction lift(color, level) {\n  var colorArr = parse(color);\n\n  if (colorArr) {\n    for (var i = 0; i < 3; i++) {\n      if (level < 0) {\n        colorArr[i] = colorArr[i] * (1 - level) | 0;\n      } else {\n        colorArr[i] = (255 - colorArr[i]) * level + colorArr[i] | 0;\n      }\n\n      if (colorArr[i] > 255) {\n        colorArr[i] = 255;\n      } else if (color[i] < 0) {\n        colorArr[i] = 0;\n      }\n    }\n\n    return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n  }\n}\n/**\n * @param {string} color\n * @return {string}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction toHex(color) {\n  var colorArr = parse(color);\n\n  if (colorArr) {\n    return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + +colorArr[2]).toString(16).slice(1);\n  }\n}\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<Array.<number>>} colors List of rgba color array\n * @param {Array.<number>} [out] Mapped gba color array\n * @return {Array.<number>} will be null/undefined if input illegal.\n */\n\n\nfunction fastLerp(normalizedValue, colors, out) {\n  if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n    return;\n  }\n\n  out = out || [];\n  var value = normalizedValue * (colors.length - 1);\n  var leftIndex = Math.floor(value);\n  var rightIndex = Math.ceil(value);\n  var leftColor = colors[leftIndex];\n  var rightColor = colors[rightIndex];\n  var dv = value - leftIndex;\n  out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n  out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n  out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n  out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n  return out;\n}\n/**\n * @deprecated\n */\n\n\nvar fastMapToColor = fastLerp;\n/**\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<string>} colors Color list.\n * @param {boolean=} fullOutput Default false.\n * @return {(string|Object)} Result color. If fullOutput,\n *                           return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n * @memberOf module:zrender/util/color\n */\n\nfunction lerp(normalizedValue, colors, fullOutput) {\n  if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n    return;\n  }\n\n  var value = normalizedValue * (colors.length - 1);\n  var leftIndex = Math.floor(value);\n  var rightIndex = Math.ceil(value);\n  var leftColor = parse(colors[leftIndex]);\n  var rightColor = parse(colors[rightIndex]);\n  var dv = value - leftIndex;\n  var color = stringify([clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)), clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)), clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)), clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))], 'rgba');\n  return fullOutput ? {\n    color: color,\n    leftIndex: leftIndex,\n    rightIndex: rightIndex,\n    value: value\n  } : color;\n}\n/**\n * @deprecated\n */\n\n\nvar mapToColor = lerp;\n/**\n * @param {string} color\n * @param {number=} h 0 ~ 360, ignore when null.\n * @param {number=} s 0 ~ 1, ignore when null.\n * @param {number=} l 0 ~ 1, ignore when null.\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\n\nfunction modifyHSL(color, h, s, l) {\n  color = parse(color);\n\n  if (color) {\n    color = rgba2hsla(color);\n    h != null && (color[0] = clampCssAngle(h));\n    s != null && (color[1] = parseCssFloat(s));\n    l != null && (color[2] = parseCssFloat(l));\n    return stringify(hsla2rgba(color), 'rgba');\n  }\n}\n/**\n * @param {string} color\n * @param {number=} alpha 0 ~ 1\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\n\n\nfunction modifyAlpha(color, alpha) {\n  color = parse(color);\n\n  if (color && alpha != null) {\n    color[3] = clampCssFloat(alpha);\n    return stringify(color, 'rgba');\n  }\n}\n/**\n * @param {Array.<number>} arrColor like [12,33,44,0.4]\n * @param {string} type 'rgba', 'hsva', ...\n * @return {string} Result color. (If input illegal, return undefined).\n */\n\n\nfunction stringify(arrColor, type) {\n  if (!arrColor || !arrColor.length) {\n    return;\n  }\n\n  var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n\n  if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n    colorStr += ',' + arrColor[3];\n  }\n\n  return type + '(' + colorStr + ')';\n}\n\nexports.parse = parse;\nexports.lift = lift;\nexports.toHex = toHex;\nexports.fastLerp = fastLerp;\nexports.fastMapToColor = fastMapToColor;\nexports.lerp = lerp;\nexports.mapToColor = mapToColor;\nexports.modifyHSL = modifyHSL;\nexports.modifyAlpha = modifyAlpha;\nexports.stringify = stringify;","/**\n * @param {Array.<Object>} colorStops\n */\nvar Gradient = function (colorStops) {\n  this.colorStops = colorStops || [];\n};\n\nGradient.prototype = {\n  constructor: Gradient,\n  addColorStop: function (offset, color) {\n    this.colorStops.push({\n      offset: offset,\n      color: color\n    });\n  }\n};\nvar _default = Gradient;\nmodule.exports = _default;","var easingFuncs = require(\"./easing\");\n\n/**\n * 动画主控制器\n * @config target 动画对象，可以是数组，如果是数组的话会批量分发onframe等事件\n * @config life(1000) 动画时长\n * @config delay(0) 动画延迟时间\n * @config loop(true)\n * @config gap(0) 循环的间隔时间\n * @config onframe\n * @config easing(optional)\n * @config ondestroy(optional)\n * @config onrestart(optional)\n *\n * TODO pause\n */\nfunction Clip(options) {\n  this._target = options.target; // 生命周期\n\n  this._life = options.life || 1000; // 延时\n\n  this._delay = options.delay || 0; // 开始时间\n  // this._startTime = new Date().getTime() + this._delay;// 单位毫秒\n\n  this._initialized = false; // 是否循环\n\n  this.loop = options.loop == null ? false : options.loop;\n  this.gap = options.gap || 0;\n  this.easing = options.easing || 'Linear';\n  this.onframe = options.onframe;\n  this.ondestroy = options.ondestroy;\n  this.onrestart = options.onrestart;\n  this._pausedTime = 0;\n  this._paused = false;\n}\n\nClip.prototype = {\n  constructor: Clip,\n  step: function (globalTime, deltaTime) {\n    // Set startTime on first step, or _startTime may has milleseconds different between clips\n    // PENDING\n    if (!this._initialized) {\n      this._startTime = globalTime + this._delay;\n      this._initialized = true;\n    }\n\n    if (this._paused) {\n      this._pausedTime += deltaTime;\n      return;\n    }\n\n    var percent = (globalTime - this._startTime - this._pausedTime) / this._life; // 还没开始\n\n    if (percent < 0) {\n      return;\n    }\n\n    percent = Math.min(percent, 1);\n    var easing = this.easing;\n    var easingFunc = typeof easing === 'string' ? easingFuncs[easing] : easing;\n    var schedule = typeof easingFunc === 'function' ? easingFunc(percent) : percent;\n    this.fire('frame', schedule); // 结束\n\n    if (percent === 1) {\n      if (this.loop) {\n        this.restart(globalTime); // 重新开始周期\n        // 抛出而不是直接调用事件直到 stage.update 后再统一调用这些事件\n\n        return 'restart';\n      } // 动画完成将这个控制器标识为待删除\n      // 在Animation.update中进行批量删除\n\n\n      this._needsRemove = true;\n      return 'destroy';\n    }\n\n    return null;\n  },\n  restart: function (globalTime) {\n    var remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\n    this._startTime = globalTime - remainder + this.gap;\n    this._pausedTime = 0;\n    this._needsRemove = false;\n  },\n  fire: function (eventType, arg) {\n    eventType = 'on' + eventType;\n\n    if (this[eventType]) {\n      this[eventType](this._target, arg);\n    }\n  },\n  pause: function () {\n    this._paused = true;\n  },\n  resume: function () {\n    this._paused = false;\n  }\n};\nvar _default = Clip;\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * 圆环\n * @module zrender/graphic/shape/Ring\n */\nvar _default = Path.extend({\n  type: 'ring',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0,\n    r0: 0\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var PI2 = Math.PI * 2;\n    ctx.moveTo(x + shape.r, y);\n    ctx.arc(x, y, shape.r, 0, PI2, false);\n    ctx.moveTo(x + shape.r0, y);\n    ctx.arc(x, y, shape.r0, 0, PI2, true);\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Gradient = require(\"./Gradient\");\n\n/**\n * x, y, x2, y2 are all percent from 0 to 1\n * @param {number} [x=0]\n * @param {number} [y=0]\n * @param {number} [x2=1]\n * @param {number} [y2=0]\n * @param {Array.<Object>} colorStops\n * @param {boolean} [globalCoord=false]\n */\nvar LinearGradient = function (x, y, x2, y2, colorStops, globalCoord) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {type: 'linear', colorStops: ...}`, where\n  // this constructor will not be called.\n  this.x = x == null ? 0 : x;\n  this.y = y == null ? 0 : y;\n  this.x2 = x2 == null ? 1 : x2;\n  this.y2 = y2 == null ? 0 : y2; // Can be cloned\n\n  this.type = 'linear'; // If use global coord\n\n  this.global = globalCoord || false;\n  Gradient.call(this, colorStops);\n};\n\nLinearGradient.prototype = {\n  constructor: LinearGradient\n};\nzrUtil.inherits(LinearGradient, Gradient);\nvar _default = LinearGradient;\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar debugMode = _config.debugMode;\n\nvar logError = function () {};\n\nif (debugMode === 1) {\n  logError = console.error;\n}\n\nvar _default = logError;\nmodule.exports = _default;","var _vector = require(\"./vector\");\n\nvar v2Create = _vector.create;\nvar v2DistSquare = _vector.distSquare;\n\n/**\n * 曲线辅助模块\n * @module zrender/core/curve\n * @author pissang(https://www.github.com/pissang)\n */\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3; // 临时变量\n\nvar _v0 = v2Create();\n\nvar _v1 = v2Create();\n\nvar _v2 = v2Create();\n\nfunction isAroundZero(val) {\n  return val > -EPSILON && val < EPSILON;\n}\n\nfunction isNotAroundZero(val) {\n  return val > EPSILON || val < -EPSILON;\n}\n/**\n * 计算三次贝塞尔值\n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction cubicAt(p0, p1, p2, p3, t) {\n  var onet = 1 - t;\n  return onet * onet * (onet * p0 + 3 * t * p1) + t * t * (t * p3 + 3 * onet * p2);\n}\n/**\n * 计算三次贝塞尔导数值\n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction cubicDerivativeAt(p0, p1, p2, p3, t) {\n  var onet = 1 - t;\n  return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet + (p3 - p2) * t * t);\n}\n/**\n * 计算三次贝塞尔方程根，使用盛金公式\n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} val\n * @param  {Array.<number>} roots\n * @return {number} 有效根数目\n */\n\n\nfunction cubicRootAt(p0, p1, p2, p3, val, roots) {\n  // Evaluate roots of cubic functions\n  var a = p3 + 3 * (p1 - p2) - p0;\n  var b = 3 * (p2 - p1 * 2 + p0);\n  var c = 3 * (p1 - p0);\n  var d = p0 - val;\n  var A = b * b - 3 * a * c;\n  var B = b * c - 9 * a * d;\n  var C = c * c - 3 * b * d;\n  var n = 0;\n\n  if (isAroundZero(A) && isAroundZero(B)) {\n    if (isAroundZero(b)) {\n      roots[0] = 0;\n    } else {\n      var t1 = -c / b; //t1, t2, t3, b is not zero\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    }\n  } else {\n    var disc = B * B - 4 * A * C;\n\n    if (isAroundZero(disc)) {\n      var K = B / A;\n      var t1 = -b / a + K; // t1, a is not zero\n\n      var t2 = -K / 2; // t2, t3\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n      var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n\n      if (Y1 < 0) {\n        Y1 = -mathPow(-Y1, ONE_THIRD);\n      } else {\n        Y1 = mathPow(Y1, ONE_THIRD);\n      }\n\n      if (Y2 < 0) {\n        Y2 = -mathPow(-Y2, ONE_THIRD);\n      } else {\n        Y2 = mathPow(Y2, ONE_THIRD);\n      }\n\n      var t1 = (-b - (Y1 + Y2)) / (3 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    } else {\n      var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n      var theta = Math.acos(T) / 3;\n      var ASqrt = mathSqrt(A);\n      var tmp = Math.cos(theta);\n      var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n      var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n      var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n\n      if (t3 >= 0 && t3 <= 1) {\n        roots[n++] = t3;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * 计算三次贝塞尔方程极限值的位置\n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {Array.<number>} extrema\n * @return {number} 有效数目\n */\n\n\nfunction cubicExtrema(p0, p1, p2, p3, extrema) {\n  var b = 6 * p2 - 12 * p1 + 6 * p0;\n  var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n  var c = 3 * p1 - 3 * p0;\n  var n = 0;\n\n  if (isAroundZero(a)) {\n    if (isNotAroundZero(b)) {\n      var t1 = -c / b;\n\n      if (t1 >= 0 && t1 <= 1) {\n        extrema[n++] = t1;\n      }\n    }\n  } else {\n    var disc = b * b - 4 * a * c;\n\n    if (isAroundZero(disc)) {\n      extrema[0] = -b / (2 * a);\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var t1 = (-b + discSqrt) / (2 * a);\n      var t2 = (-b - discSqrt) / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        extrema[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        extrema[n++] = t2;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * 细分三次贝塞尔曲线\n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {Array.<number>} out\n */\n\n\nfunction cubicSubdivide(p0, p1, p2, p3, t, out) {\n  var p01 = (p1 - p0) * t + p0;\n  var p12 = (p2 - p1) * t + p1;\n  var p23 = (p3 - p2) * t + p2;\n  var p012 = (p12 - p01) * t + p01;\n  var p123 = (p23 - p12) * t + p12;\n  var p0123 = (p123 - p012) * t + p012; // Seg0\n\n  out[0] = p0;\n  out[1] = p01;\n  out[2] = p012;\n  out[3] = p0123; // Seg1\n\n  out[4] = p0123;\n  out[5] = p123;\n  out[6] = p23;\n  out[7] = p3;\n}\n/**\n * 投射点到三次贝塞尔曲线上，返回投射距离。\n * 投射点有可能会有一个或者多个，这里只返回其中距离最短的一个。\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x3\n * @param {number} y3\n * @param {number} x\n * @param {number} y\n * @param {Array.<number>} [out] 投射点\n * @return {number}\n */\n\n\nfunction cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n  // http://pomax.github.io/bezierinfo/#projections\n  var t;\n  var interval = 0.005;\n  var d = Infinity;\n  var prev;\n  var next;\n  var d1;\n  var d2;\n  _v0[0] = x;\n  _v0[1] = y; // 先粗略估计一下可能的最小距离的 t 值\n  // PENDING\n\n  for (var _t = 0; _t < 1; _t += 0.05) {\n    _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n    _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n    d1 = v2DistSquare(_v0, _v1);\n\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n\n  d = Infinity; // At most 32 iteration\n\n  for (var i = 0; i < 32; i++) {\n    if (interval < EPSILON_NUMERIC) {\n      break;\n    }\n\n    prev = t - interval;\n    next = t + interval; // t - interval\n\n    _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n    _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n    d1 = v2DistSquare(_v1, _v0);\n\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      // t + interval\n      _v2[0] = cubicAt(x0, x1, x2, x3, next);\n      _v2[1] = cubicAt(y0, y1, y2, y3, next);\n      d2 = v2DistSquare(_v2, _v0);\n\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  } // t\n\n\n  if (out) {\n    out[0] = cubicAt(x0, x1, x2, x3, t);\n    out[1] = cubicAt(y0, y1, y2, y3, t);\n  } // console.log(interval, i);\n\n\n  return mathSqrt(d);\n}\n/**\n * 计算二次方贝塞尔值\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction quadraticAt(p0, p1, p2, t) {\n  var onet = 1 - t;\n  return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\n/**\n * 计算二次方贝塞尔导数值\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction quadraticDerivativeAt(p0, p1, p2, t) {\n  return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\n/**\n * 计算二次方贝塞尔方程根\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @param  {Array.<number>} roots\n * @return {number} 有效根数目\n */\n\n\nfunction quadraticRootAt(p0, p1, p2, val, roots) {\n  var a = p0 - 2 * p1 + p2;\n  var b = 2 * (p1 - p0);\n  var c = p0 - val;\n  var n = 0;\n\n  if (isAroundZero(a)) {\n    if (isNotAroundZero(b)) {\n      var t1 = -c / b;\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    }\n  } else {\n    var disc = b * b - 4 * a * c;\n\n    if (isAroundZero(disc)) {\n      var t1 = -b / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var t1 = (-b + discSqrt) / (2 * a);\n      var t2 = (-b - discSqrt) / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * 计算二次贝塞尔方程极限值\n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @return {number}\n */\n\n\nfunction quadraticExtremum(p0, p1, p2) {\n  var divider = p0 + p2 - 2 * p1;\n\n  if (divider === 0) {\n    // p1 is center of p0 and p2\n    return 0.5;\n  } else {\n    return (p0 - p1) / divider;\n  }\n}\n/**\n * 细分二次贝塞尔曲线\n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @param  {Array.<number>} out\n */\n\n\nfunction quadraticSubdivide(p0, p1, p2, t, out) {\n  var p01 = (p1 - p0) * t + p0;\n  var p12 = (p2 - p1) * t + p1;\n  var p012 = (p12 - p01) * t + p01; // Seg0\n\n  out[0] = p0;\n  out[1] = p01;\n  out[2] = p012; // Seg1\n\n  out[3] = p012;\n  out[4] = p12;\n  out[5] = p2;\n}\n/**\n * 投射点到二次贝塞尔曲线上，返回投射距离。\n * 投射点有可能会有一个或者多个，这里只返回其中距离最短的一个。\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x\n * @param {number} y\n * @param {Array.<number>} out 投射点\n * @return {number}\n */\n\n\nfunction quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n  // http://pomax.github.io/bezierinfo/#projections\n  var t;\n  var interval = 0.005;\n  var d = Infinity;\n  _v0[0] = x;\n  _v0[1] = y; // 先粗略估计一下可能的最小距离的 t 值\n  // PENDING\n\n  for (var _t = 0; _t < 1; _t += 0.05) {\n    _v1[0] = quadraticAt(x0, x1, x2, _t);\n    _v1[1] = quadraticAt(y0, y1, y2, _t);\n    var d1 = v2DistSquare(_v0, _v1);\n\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n\n  d = Infinity; // At most 32 iteration\n\n  for (var i = 0; i < 32; i++) {\n    if (interval < EPSILON_NUMERIC) {\n      break;\n    }\n\n    var prev = t - interval;\n    var next = t + interval; // t - interval\n\n    _v1[0] = quadraticAt(x0, x1, x2, prev);\n    _v1[1] = quadraticAt(y0, y1, y2, prev);\n    var d1 = v2DistSquare(_v1, _v0);\n\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      // t + interval\n      _v2[0] = quadraticAt(x0, x1, x2, next);\n      _v2[1] = quadraticAt(y0, y1, y2, next);\n      var d2 = v2DistSquare(_v2, _v0);\n\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  } // t\n\n\n  if (out) {\n    out[0] = quadraticAt(x0, x1, x2, t);\n    out[1] = quadraticAt(y0, y1, y2, t);\n  } // console.log(interval, i);\n\n\n  return mathSqrt(d);\n}\n\nexports.cubicAt = cubicAt;\nexports.cubicDerivativeAt = cubicDerivativeAt;\nexports.cubicRootAt = cubicRootAt;\nexports.cubicExtrema = cubicExtrema;\nexports.cubicSubdivide = cubicSubdivide;\nexports.cubicProjectPoint = cubicProjectPoint;\nexports.quadraticAt = quadraticAt;\nexports.quadraticDerivativeAt = quadraticDerivativeAt;\nexports.quadraticRootAt = quadraticRootAt;\nexports.quadraticExtremum = quadraticExtremum;\nexports.quadraticSubdivide = quadraticSubdivide;\nexports.quadraticProjectPoint = quadraticProjectPoint;","var Path = require(\"../Path\");\n\nvar fixClipWithShadow = require(\"../helper/fixClipWithShadow\");\n\n/**\n * 扇形\n * @module zrender/graphic/shape/Sector\n */\nvar _default = Path.extend({\n  type: 'sector',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r0: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitX = Math.cos(startAngle);\n    var unitY = Math.sin(startAngle);\n    ctx.moveTo(unitX * r0 + x, unitY * r0 + y);\n    ctx.lineTo(unitX * r + x, unitY * r + y);\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    ctx.lineTo(Math.cos(endAngle) * r0 + x, Math.sin(endAngle) * r0 + y);\n\n    if (r0 !== 0) {\n      ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\n    }\n\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","var _core = require(\"../core\");\n\nvar createElement = _core.createElement;\n\nvar zrUtil = require(\"../../core/util\");\n\nvar Path = require(\"../../graphic/Path\");\n\nvar ZImage = require(\"../../graphic/Image\");\n\nvar ZText = require(\"../../graphic/Text\");\n\nvar _graphic = require(\"../graphic\");\n\nvar svgPath = _graphic.path;\nvar svgImage = _graphic.image;\nvar svgText = _graphic.text;\n\n/**\n * @file Manages elements that can be defined in <defs> in SVG,\n *       e.g., gradients, clip path, etc.\n * @author Zhang Wenli\n */\nvar MARK_UNUSED = '0';\nvar MARK_USED = '1';\n/**\n * Manages elements that can be defined in <defs> in SVG,\n * e.g., gradients, clip path, etc.\n *\n * @class\n * @param {number}          zrId      zrender instance id\n * @param {SVGElement}      svgRoot   root of SVG document\n * @param {string|string[]} tagNames  possible tag names\n * @param {string}          markLabel label name to make if the element\n *                                    is used\n */\n\nfunction Definable(zrId, svgRoot, tagNames, markLabel, domName) {\n  this._zrId = zrId;\n  this._svgRoot = svgRoot;\n  this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\n  this._markLabel = markLabel;\n  this._domName = domName || '_dom';\n  this.nextId = 0;\n}\n\nDefinable.prototype.createElement = createElement;\n/**\n * Get the <defs> tag for svgRoot; optionally creates one if not exists.\n *\n * @param {boolean} isForceCreating if need to create when not exists\n * @return {SVGDefsElement} SVG <defs> element, null if it doesn't\n * exist and isForceCreating is false\n */\n\nDefinable.prototype.getDefs = function (isForceCreating) {\n  var svgRoot = this._svgRoot;\n\n  var defs = this._svgRoot.getElementsByTagName('defs');\n\n  if (defs.length === 0) {\n    // Not exist\n    if (isForceCreating) {\n      defs = svgRoot.insertBefore(this.createElement('defs'), // Create new tag\n      svgRoot.firstChild // Insert in the front of svg\n      );\n\n      if (!defs.contains) {\n        // IE doesn't support contains method\n        defs.contains = function (el) {\n          var children = defs.children;\n\n          if (!children) {\n            return false;\n          }\n\n          for (var i = children.length - 1; i >= 0; --i) {\n            if (children[i] === el) {\n              return true;\n            }\n          }\n\n          return false;\n        };\n      }\n\n      return defs;\n    } else {\n      return null;\n    }\n  } else {\n    return defs[0];\n  }\n};\n/**\n * Update DOM element if necessary.\n *\n * @param {Object|string} element style element. e.g., for gradient,\n *                                it may be '#ccc' or {type: 'linear', ...}\n * @param {Function|undefined} onUpdate update callback\n */\n\n\nDefinable.prototype.update = function (element, onUpdate) {\n  if (!element) {\n    return;\n  }\n\n  var defs = this.getDefs(false);\n\n  if (element[this._domName] && defs.contains(element[this._domName])) {\n    // Update DOM\n    if (typeof onUpdate === 'function') {\n      onUpdate(element);\n    }\n  } else {\n    // No previous dom, create new\n    var dom = this.add(element);\n\n    if (dom) {\n      element[this._domName] = dom;\n    }\n  }\n};\n/**\n * Add gradient dom to defs\n *\n * @param {SVGElement} dom DOM to be added to <defs>\n */\n\n\nDefinable.prototype.addDom = function (dom) {\n  var defs = this.getDefs(true);\n  defs.appendChild(dom);\n};\n/**\n * Remove DOM of a given element.\n *\n * @param {SVGElement} element element to remove dom\n */\n\n\nDefinable.prototype.removeDom = function (element) {\n  var defs = this.getDefs(false);\n\n  if (defs && element[this._domName]) {\n    defs.removeChild(element[this._domName]);\n    element[this._domName] = null;\n  }\n};\n/**\n * Get DOMs of this element.\n *\n * @return {HTMLDomElement} doms of this defineable elements in <defs>\n */\n\n\nDefinable.prototype.getDoms = function () {\n  var defs = this.getDefs(false);\n\n  if (!defs) {\n    // No dom when defs is not defined\n    return [];\n  }\n\n  var doms = [];\n  zrUtil.each(this._tagNames, function (tagName) {\n    var tags = defs.getElementsByTagName(tagName); // Note that tags is HTMLCollection, which is array-like\n    // rather than real array.\n    // So `doms.concat(tags)` add tags as one object.\n\n    doms = doms.concat([].slice.call(tags));\n  });\n  return doms;\n};\n/**\n * Mark DOMs to be unused before painting, and clear unused ones at the end\n * of the painting.\n */\n\n\nDefinable.prototype.markAllUnused = function () {\n  var doms = this.getDoms();\n  var that = this;\n  zrUtil.each(doms, function (dom) {\n    dom[that._markLabel] = MARK_UNUSED;\n  });\n};\n/**\n * Mark a single DOM to be used.\n *\n * @param {SVGElement} dom DOM to mark\n */\n\n\nDefinable.prototype.markUsed = function (dom) {\n  if (dom) {\n    dom[this._markLabel] = MARK_USED;\n  }\n};\n/**\n * Remove unused DOMs defined in <defs>\n */\n\n\nDefinable.prototype.removeUnused = function () {\n  var defs = this.getDefs(false);\n\n  if (!defs) {\n    // Nothing to remove\n    return;\n  }\n\n  var doms = this.getDoms();\n  var that = this;\n  zrUtil.each(doms, function (dom) {\n    if (dom[that._markLabel] !== MARK_USED) {\n      // Remove gradient\n      defs.removeChild(dom);\n    }\n  });\n};\n/**\n * Get SVG proxy.\n *\n * @param {Displayable} displayable displayable element\n * @return {Path|Image|Text} svg proxy of given element\n */\n\n\nDefinable.prototype.getSvgProxy = function (displayable) {\n  if (displayable instanceof Path) {\n    return svgPath;\n  } else if (displayable instanceof ZImage) {\n    return svgImage;\n  } else if (displayable instanceof ZText) {\n    return svgText;\n  } else {\n    return svgPath;\n  }\n};\n/**\n * Get text SVG element.\n *\n * @param {Displayable} displayable displayable element\n * @return {SVGElement} SVG element of text\n */\n\n\nDefinable.prototype.getTextSvgElement = function (displayable) {\n  return displayable.__textSvgEl;\n};\n/**\n * Get SVG element.\n *\n * @param {Displayable} displayable displayable element\n * @return {SVGElement} SVG element\n */\n\n\nDefinable.prototype.getSvgElement = function (displayable) {\n  return displayable.__svgEl;\n};\n\nvar _default = Definable;\nmodule.exports = _default;","var smoothSpline = require(\"./smoothSpline\");\n\nvar smoothBezier = require(\"./smoothBezier\");\n\nfunction buildPath(ctx, shape, closePath) {\n  var points = shape.points;\n  var smooth = shape.smooth;\n\n  if (points && points.length >= 2) {\n    if (smooth && smooth !== 'spline') {\n      var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n      ctx.moveTo(points[0][0], points[0][1]);\n      var len = points.length;\n\n      for (var i = 0; i < (closePath ? len : len - 1); i++) {\n        var cp1 = controlPoints[i * 2];\n        var cp2 = controlPoints[i * 2 + 1];\n        var p = points[(i + 1) % len];\n        ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n      }\n    } else {\n      if (smooth === 'spline') {\n        points = smoothSpline(points, closePath);\n      }\n\n      ctx.moveTo(points[0][0], points[0][1]);\n\n      for (var i = 1, l = points.length; i < l; i++) {\n        ctx.lineTo(points[i][0], points[i][1]);\n      }\n    }\n\n    closePath && ctx.closePath();\n  }\n}\n\nexports.buildPath = buildPath;","/**\n * @param {Object} ctx\n * @param {Object} shape\n * @param {number} shape.x\n * @param {number} shape.y\n * @param {number} shape.width\n * @param {number} shape.height\n * @param {number} shape.r\n */\nfunction buildPath(ctx, shape) {\n  var x = shape.x;\n  var y = shape.y;\n  var width = shape.width;\n  var height = shape.height;\n  var r = shape.r;\n  var r1;\n  var r2;\n  var r3;\n  var r4; // Convert width and height to positive for better borderRadius\n\n  if (width < 0) {\n    x = x + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y = y + height;\n    height = -height;\n  }\n\n  if (typeof r === 'number') {\n    r1 = r2 = r3 = r4 = r;\n  } else if (r instanceof Array) {\n    if (r.length === 1) {\n      r1 = r2 = r3 = r4 = r[0];\n    } else if (r.length === 2) {\n      r1 = r3 = r[0];\n      r2 = r4 = r[1];\n    } else if (r.length === 3) {\n      r1 = r[0];\n      r2 = r4 = r[1];\n      r3 = r[2];\n    } else {\n      r1 = r[0];\n      r2 = r[1];\n      r3 = r[2];\n      r4 = r[3];\n    }\n  } else {\n    r1 = r2 = r3 = r4 = 0;\n  }\n\n  var total;\n\n  if (r1 + r2 > width) {\n    total = r1 + r2;\n    r1 *= width / total;\n    r2 *= width / total;\n  }\n\n  if (r3 + r4 > width) {\n    total = r3 + r4;\n    r3 *= width / total;\n    r4 *= width / total;\n  }\n\n  if (r2 + r3 > height) {\n    total = r2 + r3;\n    r2 *= height / total;\n    r3 *= height / total;\n  }\n\n  if (r1 + r4 > height) {\n    total = r1 + r4;\n    r1 *= height / total;\n    r4 *= height / total;\n  }\n\n  ctx.moveTo(x + r1, y);\n  ctx.lineTo(x + width - r2, y);\n  r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n  ctx.lineTo(x + width, y + height - r3);\n  r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n  ctx.lineTo(x + r4, y + height);\n  r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n  ctx.lineTo(x, y + r1);\n  r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n\nexports.buildPath = buildPath;","var util = require(\"./core/util\");\n\nvar _config = require(\"./config\");\n\nvar devicePixelRatio = _config.devicePixelRatio;\n\nvar Style = require(\"./graphic/Style\");\n\nvar Pattern = require(\"./graphic/Pattern\");\n\n/**\n * @module zrender/Layer\n * @author pissang(https://www.github.com/pissang)\n */\nfunction returnFalse() {\n  return false;\n}\n/**\n * 创建dom\n *\n * @inner\n * @param {string} id dom id 待用\n * @param {Painter} painter painter instance\n * @param {number} number\n */\n\n\nfunction createDom(id, painter, dpr) {\n  var newDom = util.createCanvas();\n  var width = painter.getWidth();\n  var height = painter.getHeight();\n  var newDomStyle = newDom.style;\n\n  if (newDomStyle) {\n    // In node or some other non-browser environment\n    newDomStyle.position = 'absolute';\n    newDomStyle.left = 0;\n    newDomStyle.top = 0;\n    newDomStyle.width = width + 'px';\n    newDomStyle.height = height + 'px';\n    newDom.setAttribute('data-zr-dom-id', id);\n  }\n\n  newDom.width = width * dpr;\n  newDom.height = height * dpr;\n  return newDom;\n}\n/**\n * @alias module:zrender/Layer\n * @constructor\n * @extends module:zrender/mixin/Transformable\n * @param {string} id\n * @param {module:zrender/Painter} painter\n * @param {number} [dpr]\n */\n\n\nvar Layer = function (id, painter, dpr) {\n  var dom;\n  dpr = dpr || devicePixelRatio;\n\n  if (typeof id === 'string') {\n    dom = createDom(id, painter, dpr);\n  } // Not using isDom because in node it will return false\n  else if (util.isObject(id)) {\n      dom = id;\n      id = dom.id;\n    }\n\n  this.id = id;\n  this.dom = dom;\n  var domStyle = dom.style;\n\n  if (domStyle) {\n    // Not in node\n    dom.onselectstart = returnFalse; // 避免页面选中的尴尬\n\n    domStyle['-webkit-user-select'] = 'none';\n    domStyle['user-select'] = 'none';\n    domStyle['-webkit-touch-callout'] = 'none';\n    domStyle['-webkit-tap-highlight-color'] = 'rgba(0,0,0,0)';\n    domStyle['padding'] = 0; // eslint-disable-line dot-notation\n\n    domStyle['margin'] = 0; // eslint-disable-line dot-notation\n\n    domStyle['border-width'] = 0;\n  }\n\n  this.domBack = null;\n  this.ctxBack = null;\n  this.painter = painter;\n  this.config = null; // Configs\n\n  /**\n   * 每次清空画布的颜色\n   * @type {string}\n   * @default 0\n   */\n\n  this.clearColor = 0;\n  /**\n   * 是否开启动态模糊\n   * @type {boolean}\n   * @default false\n   */\n\n  this.motionBlur = false;\n  /**\n   * 在开启动态模糊的时候使用，与上一帧混合的alpha值，值越大尾迹越明显\n   * @type {number}\n   * @default 0.7\n   */\n\n  this.lastFrameAlpha = 0.7;\n  /**\n   * Layer dpr\n   * @type {number}\n   */\n\n  this.dpr = dpr;\n};\n\nLayer.prototype = {\n  constructor: Layer,\n  __dirty: true,\n  __used: false,\n  __drawIndex: 0,\n  __startIndex: 0,\n  __endIndex: 0,\n  incremental: false,\n  getElementCount: function () {\n    return this.__endIndex - this.__startIndex;\n  },\n  initContext: function () {\n    this.ctx = this.dom.getContext('2d');\n    this.ctx.dpr = this.dpr;\n  },\n  createBackBuffer: function () {\n    var dpr = this.dpr;\n    this.domBack = createDom('back-' + this.id, this.painter, dpr);\n    this.ctxBack = this.domBack.getContext('2d');\n\n    if (dpr !== 1) {\n      this.ctxBack.scale(dpr, dpr);\n    }\n  },\n\n  /**\n   * @param  {number} width\n   * @param  {number} height\n   */\n  resize: function (width, height) {\n    var dpr = this.dpr;\n    var dom = this.dom;\n    var domStyle = dom.style;\n    var domBack = this.domBack;\n\n    if (domStyle) {\n      domStyle.width = width + 'px';\n      domStyle.height = height + 'px';\n    }\n\n    dom.width = width * dpr;\n    dom.height = height * dpr;\n\n    if (domBack) {\n      domBack.width = width * dpr;\n      domBack.height = height * dpr;\n\n      if (dpr !== 1) {\n        this.ctxBack.scale(dpr, dpr);\n      }\n    }\n  },\n\n  /**\n   * 清空该层画布\n   * @param {boolean} [clearAll]=false Clear all with out motion blur\n   * @param {Color} [clearColor]\n   */\n  clear: function (clearAll, clearColor) {\n    var dom = this.dom;\n    var ctx = this.ctx;\n    var width = dom.width;\n    var height = dom.height;\n    var clearColor = clearColor || this.clearColor;\n    var haveMotionBLur = this.motionBlur && !clearAll;\n    var lastFrameAlpha = this.lastFrameAlpha;\n    var dpr = this.dpr;\n\n    if (haveMotionBLur) {\n      if (!this.domBack) {\n        this.createBackBuffer();\n      }\n\n      this.ctxBack.globalCompositeOperation = 'copy';\n      this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n    }\n\n    ctx.clearRect(0, 0, width, height);\n\n    if (clearColor && clearColor !== 'transparent') {\n      var clearColorGradientOrPattern; // Gradient\n\n      if (clearColor.colorStops) {\n        // Cache canvas gradient\n        clearColorGradientOrPattern = clearColor.__canvasGradient || Style.getGradient(ctx, clearColor, {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height\n        });\n        clearColor.__canvasGradient = clearColorGradientOrPattern;\n      } // Pattern\n      else if (clearColor.image) {\n          clearColorGradientOrPattern = Pattern.prototype.getCanvasPattern.call(clearColor, ctx);\n        }\n\n      ctx.save();\n      ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n      ctx.fillRect(0, 0, width, height);\n      ctx.restore();\n    }\n\n    if (haveMotionBLur) {\n      var domBack = this.domBack;\n      ctx.save();\n      ctx.globalAlpha = lastFrameAlpha;\n      ctx.drawImage(domBack, 0, 0, width, height);\n      ctx.restore();\n    }\n  }\n};\nvar _default = Layer;\nmodule.exports = _default;","var LRU = require(\"../../core/LRU\");\n\nvar globalImageCache = new LRU(50);\n/**\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\nfunction findExistImage(newImageOrSrc) {\n  if (typeof newImageOrSrc === 'string') {\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    return cachedImgObj && cachedImgObj.image;\n  } else {\n    return newImageOrSrc;\n  }\n}\n/**\n * Caution: User should cache loaded images, but not just count on LRU.\n * Consider if required images more than LRU size, will dead loop occur?\n *\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @param {HTMLImageElement|HTMLCanvasElement|Canvas} image Existent image.\n * @param {module:zrender/Element} [hostEl] For calling `dirty`.\n * @param {Function} [cb] params: (image, cbPayload)\n * @param {Object} [cbPayload] Payload on cb calling.\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\n\nfunction createOrUpdateImage(newImageOrSrc, image, hostEl, cb, cbPayload) {\n  if (!newImageOrSrc) {\n    return image;\n  } else if (typeof newImageOrSrc === 'string') {\n    // Image should not be loaded repeatly.\n    if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {\n      return image;\n    } // Only when there is no existent image or existent image src\n    // is different, this method is responsible for load.\n\n\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    var pendingWrap = {\n      hostEl: hostEl,\n      cb: cb,\n      cbPayload: cbPayload\n    };\n\n    if (cachedImgObj) {\n      image = cachedImgObj.image;\n      !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n    } else {\n      image = new Image();\n      image.onload = image.onerror = imageOnLoad;\n      globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n        image: image,\n        pending: [pendingWrap]\n      });\n      image.src = image.__zrImageSrc = newImageOrSrc;\n    }\n\n    return image;\n  } // newImageOrSrc is an HTMLImageElement or HTMLCanvasElement or Canvas\n  else {\n      return newImageOrSrc;\n    }\n}\n\nfunction imageOnLoad() {\n  var cachedImgObj = this.__cachedImgObj;\n  this.onload = this.onerror = this.__cachedImgObj = null;\n\n  for (var i = 0; i < cachedImgObj.pending.length; i++) {\n    var pendingWrap = cachedImgObj.pending[i];\n    var cb = pendingWrap.cb;\n    cb && cb(this, pendingWrap.cbPayload);\n    pendingWrap.hostEl.dirty();\n  }\n\n  cachedImgObj.pending.length = 0;\n}\n\nfunction isImageReady(image) {\n  return image && image.width && image.height;\n}\n\nexports.findExistImage = findExistImage;\nexports.createOrUpdateImage = createOrUpdateImage;\nexports.isImageReady = isImageReady;","var Eventful = require(\"../mixin/Eventful\");\n\nexports.Dispatcher = Eventful;\n\nvar env = require(\"./env\");\n\nvar _dom = require(\"./dom\");\n\nvar isCanvasEl = _dom.isCanvasEl;\nvar transformCoordWithViewport = _dom.transformCoordWithViewport;\n\n/**\n * Utilities for mouse or touch events.\n */\nvar isDomLevel2 = typeof window !== 'undefined' && !!window.addEventListener;\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\n/**\n * Get the `zrX` and `zrY`, which are relative to the top-left of\n * the input `el`.\n * CSS transform (2D & 3D) is supported.\n *\n * The strategy to fetch the coords:\n * + If `calculate` is not set as `true`, users of this method should\n * ensure that `el` is the same or the same size & location as `e.target`.\n * Otherwise the result coords are probably not expected. Because we\n * firstly try to get coords from e.offsetX/e.offsetY.\n * + If `calculate` is set as `true`, the input `el` can be any element\n * and we force to calculate the coords based on `el`.\n * + The input `el` should be positionable (not position:static).\n *\n * The force `calculate` can be used in case like:\n * When mousemove event triggered on ec tooltip, `e.target` is not `el`(zr painter.dom).\n *\n * @param {HTMLElement} el DOM element.\n * @param {Event} e Mouse event or touch event.\n * @param {Object} out Get `out.zrX` and `out.zrY` as the result.\n * @param {boolean} [calculate=false] Whether to force calculate\n *        the coordinates but not use ones provided by browser.\n */\n\nfunction clientToLocal(el, e, out, calculate) {\n  out = out || {}; // According to the W3C Working Draft, offsetX and offsetY should be relative\n  // to the padding edge of the target element. The only browser using this convention\n  // is IE. Webkit uses the border edge, Opera uses the content edge, and FireFox does\n  // not support the properties.\n  // (see http://www.jacklmoore.com/notes/mouse-position/)\n  // In zr painter.dom, padding edge equals to border edge.\n\n  if (calculate || !env.canvasSupported) {\n    calculateZrXY(el, e, out);\n  } // Caution: In FireFox, layerX/layerY Mouse position relative to the closest positioned\n  // ancestor element, so we should make sure el is positioned (e.g., not position:static).\n  // BTW1, Webkit don't return the same results as FF in non-simple cases (like add\n  // zoom-factor, overflow / opacity layers, transforms ...)\n  // BTW2, (ev.offsetY || ev.pageY - $(ev.target).offset().top) is not correct in preserve-3d.\n  // <https://bugs.jquery.com/ticket/8523#comment:14>\n  // BTW3, In ff, offsetX/offsetY is always 0.\n  else if (env.browser.firefox && e.layerX != null && e.layerX !== e.offsetX) {\n      out.zrX = e.layerX;\n      out.zrY = e.layerY;\n    } // For IE6+, chrome, safari, opera. (When will ff support offsetX?)\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n      } // For some other device, e.g., IOS safari.\n      else {\n          calculateZrXY(el, e, out);\n        }\n\n  return out;\n}\n\nfunction calculateZrXY(el, e, out) {\n  // BlackBerry 5, iOS 3 (original iPhone) don't have getBoundingRect.\n  if (env.domSupported && el.getBoundingClientRect) {\n    var ex = e.clientX;\n    var ey = e.clientY;\n\n    if (isCanvasEl(el)) {\n      // Original approach, which do not support CSS transform.\n      // marker can not be locationed in a canvas container\n      // (getBoundingClientRect is always 0). We do not support\n      // that input a pre-created canvas to zr while using css\n      // transform in iOS.\n      var box = el.getBoundingClientRect();\n      out.zrX = ex - box.left;\n      out.zrY = ey - box.top;\n      return;\n    } else {\n      if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n        out.zrX = _calcOut[0];\n        out.zrY = _calcOut[1];\n        return;\n      }\n    }\n  }\n\n  out.zrX = out.zrY = 0;\n}\n/**\n * Find native event compat for legency IE.\n * Should be called at the begining of a native event listener.\n *\n * @param {Event} [e] Mouse event or touch event or pointer event.\n *        For lagency IE, we use `window.event` is used.\n * @return {Event} The native event.\n */\n\n\nfunction getNativeEvent(e) {\n  return e || window.event;\n}\n/**\n * Normalize the coordinates of the input event.\n *\n * Get the `e.zrX` and `e.zrY`, which are relative to the top-left of\n * the input `el`.\n * Get `e.zrDelta` if using mouse wheel.\n * Get `e.which`, see the comment inside this function.\n *\n * Do not calculate repeatly if `zrX` and `zrY` already exist.\n *\n * Notice: see comments in `clientToLocal`. check the relationship\n * between the result coords and the parameters `el` and `calculate`.\n *\n * @param {HTMLElement} el DOM element.\n * @param {Event} [e] See `getNativeEvent`.\n * @param {boolean} [calculate=false] Whether to force calculate\n *        the coordinates but not use ones provided by browser.\n * @return {UIEvent} The normalized native UIEvent.\n */\n\n\nfunction normalizeEvent(el, e, calculate) {\n  e = getNativeEvent(e);\n\n  if (e.zrX != null) {\n    return e;\n  }\n\n  var eventType = e.type;\n  var isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n  if (!isTouch) {\n    clientToLocal(el, e, e, calculate);\n    e.zrDelta = e.wheelDelta ? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n  } else {\n    var touch = eventType !== 'touchend' ? e.targetTouches[0] : e.changedTouches[0];\n    touch && clientToLocal(el, touch, e, calculate);\n  } // Add which for click: 1 === left; 2 === middle; 3 === right; otherwise: 0;\n  // See jQuery: https://github.com/jquery/jquery/blob/master/src/event.js\n  // If e.which has been defined, it may be readonly,\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\n\n  var button = e.button;\n\n  if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n    e.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n  } // [Caution]: `e.which` from browser is not always reliable. For example,\n  // when press left button and `mousemove (pointermove)` in Edge, the `e.which`\n  // is 65536 and the `e.button` is -1. But the `mouseup (pointerup)` and\n  // `mousedown (pointerdown)` is the same as Chrome does.\n\n\n  return e;\n}\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @param {Function} handler\n * @param {Object|boolean} opt If boolean, means `opt.capture`\n * @param {boolean} [opt.capture=false]\n * @param {boolean} [opt.passive=false]\n */\n\n\nfunction addEventListener(el, name, handler, opt) {\n  if (isDomLevel2) {\n    // Reproduct the console warning:\n    // [Violation] Added non-passive event listener to a scroll-blocking <some> event.\n    // Consider marking event handler as 'passive' to make the page more responsive.\n    // Just set console log level: verbose in chrome dev tool.\n    // then the warning log will be printed when addEventListener called.\n    // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n    // We have not yet found a neat way to using passive. Because in zrender the dom event\n    // listener delegate all of the upper events of element. Some of those events need\n    // to prevent default. For example, the feature `preventDefaultMouseMove` of echarts.\n    // Before passive can be adopted, these issues should be considered:\n    // (1) Whether and how a zrender user specifies an event listener passive. And by default,\n    // passive or not.\n    // (2) How to tread that some zrender event listener is passive, and some is not. If\n    // we use other way but not preventDefault of mousewheel and touchmove, browser\n    // compatibility should be handled.\n    // var opts = (env.passiveSupported && name === 'mousewheel')\n    //     ? {passive: true}\n    //     // By default, the third param of el.addEventListener is `capture: false`.\n    //     : void 0;\n    // el.addEventListener(name, handler /* , opts */);\n    el.addEventListener(name, handler, opt);\n  } else {\n    // For simplicity, do not implement `setCapture` for IE9-.\n    el.attachEvent('on' + name, handler);\n  }\n}\n/**\n * Parameter are the same as `addEventListener`.\n *\n * Notice that if a listener is registered twice, one with capture and one without,\n * remove each one separately. Removal of a capturing listener does not affect a\n * non-capturing version of the same listener, and vice versa.\n */\n\n\nfunction removeEventListener(el, name, handler, opt) {\n  if (isDomLevel2) {\n    el.removeEventListener(name, handler, opt);\n  } else {\n    el.detachEvent('on' + name, handler);\n  }\n}\n/**\n * preventDefault and stopPropagation.\n * Notice: do not use this method in zrender. It can only be\n * used by upper applications if necessary.\n *\n * @param {Event} e A mouse or touch event.\n */\n\n\nvar stop = isDomLevel2 ? function (e) {\n  e.preventDefault();\n  e.stopPropagation();\n  e.cancelBubble = true;\n} : function (e) {\n  e.returnValue = false;\n  e.cancelBubble = true;\n};\n/**\n * This method only works for mouseup and mousedown. The functionality is restricted\n * for fault tolerance, See the `e.which` compatibility above.\n *\n * @param {MouseEvent} e\n * @return {boolean}\n */\n\nfunction isMiddleOrRightButtonOnMouseUpDown(e) {\n  return e.which === 2 || e.which === 3;\n}\n/**\n * To be removed.\n * @deprecated\n */\n\n\nfunction notLeftMouse(e) {\n  // If e.which is undefined, considered as left mouse event.\n  return e.which > 1;\n} // For backward compatibility\n\n\nexports.clientToLocal = clientToLocal;\nexports.getNativeEvent = getNativeEvent;\nexports.normalizeEvent = normalizeEvent;\nexports.addEventListener = addEventListener;\nexports.removeEventListener = removeEventListener;\nexports.stop = stop;\nexports.isMiddleOrRightButtonOnMouseUpDown = isMiddleOrRightButtonOnMouseUpDown;\nexports.notLeftMouse = notLeftMouse;","var _vector = require(\"../../core/vector\");\n\nvar v2Distance = _vector.distance;\n\n/**\n * Catmull-Rom spline 插值折线\n * @module zrender/shape/util/smoothSpline\n * @author pissang (https://www.github.com/pissang)\n *         Kener (@Kener-林峰, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n */\n\n/**\n * @inner\n */\nfunction interpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n/**\n * @alias module:zrender/shape/util/smoothSpline\n * @param {Array} points 线段顶点数组\n * @param {boolean} isLoop\n * @return {Array}\n */\n\n\nfunction _default(points, isLoop) {\n  var len = points.length;\n  var ret = [];\n  var distance = 0;\n\n  for (var i = 1; i < len; i++) {\n    distance += v2Distance(points[i - 1], points[i]);\n  }\n\n  var segs = distance / 2;\n  segs = segs < len ? len : segs;\n\n  for (var i = 0; i < segs; i++) {\n    var pos = i / (segs - 1) * (isLoop ? len : len - 1);\n    var idx = Math.floor(pos);\n    var w = pos - idx;\n    var p0;\n    var p1 = points[idx % len];\n    var p2;\n    var p3;\n\n    if (!isLoop) {\n      p0 = points[idx === 0 ? idx : idx - 1];\n      p2 = points[idx > len - 2 ? len - 1 : idx + 1];\n      p3 = points[idx > len - 3 ? len - 1 : idx + 2];\n    } else {\n      p0 = points[(idx - 1 + len) % len];\n      p2 = points[(idx + 1) % len];\n      p3 = points[(idx + 2) % len];\n    }\n\n    var w2 = w * w;\n    var w3 = w * w2;\n    ret.push([interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3), interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)]);\n  }\n\n  return ret;\n}\n\nmodule.exports = _default;","var env = require(\"./env\");\n\nvar _fourPointsTransform = require(\"./fourPointsTransform\");\n\nvar buildTransformer = _fourPointsTransform.buildTransformer;\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\n/**\n * Transform \"local coord\" from `elFrom` to `elTarget`.\n * \"local coord\": the coord based on the input `el`. The origin point is at\n *     the position of \"left: 0; top: 0;\" in the `el`.\n *\n * Support when CSS transform is used.\n *\n * Having the `out` (that is, `[outX, outY]`), we can create an DOM element\n * and set the CSS style as \"left: outX; top: outY;\" and append it to `elTarge`\n * to locate the element.\n *\n * For example, this code below positions a child of `document.body` on the event\n * point, no matter whether `body` has `margin`/`paddin`/`transfrom`/... :\n * ```js\n * transformLocalCoord(out, container, document.body, event.offsetX, event.offsetY);\n * if (!eqNaN(out[0])) {\n *     // Then locate the tip element on the event point.\n *     var tipEl = document.createElement('div');\n *     tipEl.style.cssText = 'position: absolute; left:' + out[0] + ';top:' + out[1] + ';';\n *     document.body.appendChild(tipEl);\n * }\n * ```\n *\n * Notice: In some env this method is not supported. If called, `out` will be `[NaN, NaN]`.\n *\n * @param {Array.<number>} out [inX: number, inY: number] The output..\n *        If can not transform, `out` will not be modified but return `false`.\n * @param {HTMLElement} elFrom The `[inX, inY]` is based on elFrom.\n * @param {HTMLElement} elTarget The `out` is based on elTarget.\n * @param {number} inX\n * @param {number} inY\n * @return {boolean} Whether transform successfully.\n */\n\nfunction transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n  return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true) && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\n/**\n * Transform between a \"viewport coord\" and a \"local coord\".\n * \"viewport coord\": the coord based on the left-top corner of the viewport\n *     of the browser.\n * \"local coord\": the coord based on the input `el`. The origin point is at\n *     the position of \"left: 0; top: 0;\" in the `el`.\n *\n * Support the case when CSS transform is used on el.\n *\n * @param {Array.<number>} out [inX: number, inY: number] The output. If `inverse: false`,\n *        it represents \"local coord\", otherwise \"vireport coord\".\n *        If can not transform, `out` will not be modified but return `false`.\n * @param {HTMLElement} el The \"local coord\" is based on the `el`, see comment above.\n * @param {number} inX If `inverse: false`,\n *        it represents \"vireport coord\", otherwise \"local coord\".\n * @param {number} inY If `inverse: false`,\n *        it represents \"vireport coord\", otherwise \"local coord\".\n * @param {boolean} [inverse=false]\n *        `true`: from \"viewport coord\" to \"local coord\".\n *        `false`: from \"local coord\" to \"viewport coord\".\n * @return {boolean} Whether transform successfully.\n */\n\n\nfunction transformCoordWithViewport(out, el, inX, inY, inverse) {\n  if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n    var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n    var markers = prepareCoordMarkers(el, saved);\n    var transformer = preparePointerTransformer(markers, saved, inverse);\n\n    if (transformer) {\n      transformer(out, inX, inY);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction prepareCoordMarkers(el, saved) {\n  var markers = saved.markers;\n\n  if (markers) {\n    return markers;\n  }\n\n  markers = saved.markers = [];\n  var propLR = ['left', 'right'];\n  var propTB = ['top', 'bottom'];\n\n  for (var i = 0; i < 4; i++) {\n    var marker = document.createElement('div');\n    var stl = marker.style;\n    var idxLR = i % 2;\n    var idxTB = (i >> 1) % 2;\n    stl.cssText = ['position: absolute', 'visibility: hidden', 'padding: 0', 'margin: 0', 'border-width: 0', 'user-select: none', 'width:0', 'height:0', // 'width: 5px',\n    // 'height: 5px',\n    propLR[idxLR] + ':0', propTB[idxTB] + ':0', propLR[1 - idxLR] + ':auto', propTB[1 - idxTB] + ':auto', ''].join('!important;');\n    el.appendChild(marker);\n    markers.push(marker);\n  }\n\n  return markers;\n}\n\nfunction preparePointerTransformer(markers, saved, inverse) {\n  var transformerName = inverse ? 'invTrans' : 'trans';\n  var transformer = saved[transformerName];\n  var oldSrcCoords = saved.srcCoords;\n  var oldCoordTheSame = true;\n  var srcCoords = [];\n  var destCoords = [];\n\n  for (var i = 0; i < 4; i++) {\n    var rect = markers[i].getBoundingClientRect();\n    var ii = 2 * i;\n    var x = rect.left;\n    var y = rect.top;\n    srcCoords.push(x, y);\n    oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n    destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n  } // Cache to avoid time consuming of `buildTransformer`.\n\n\n  return oldCoordTheSame && transformer ? transformer : (saved.srcCoords = srcCoords, saved[transformerName] = inverse ? buildTransformer(destCoords, srcCoords) : buildTransformer(srcCoords, destCoords));\n}\n\nfunction isCanvasEl(el) {\n  return el.nodeName.toUpperCase() === 'CANVAS';\n}\n\nexports.transformLocalCoord = transformLocalCoord;\nexports.transformCoordWithViewport = transformCoordWithViewport;\nexports.isCanvasEl = isCanvasEl;","var _curve = require(\"../core/curve\");\n\nvar quadraticProjectPoint = _curve.quadraticProjectPoint;\n\n/**\n * 二次贝塞尔曲线描边包含判断\n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  x2\n * @param  {number}  y2\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l && y > y2 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l) {\n    return false;\n  }\n\n  var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n  return d <= _l / 2;\n}\n\nexports.containStroke = containStroke;","var guid = require(\"./core/guid\");\n\nvar env = require(\"./core/env\");\n\nvar zrUtil = require(\"./core/util\");\n\nvar Handler = require(\"./Handler\");\n\nvar Storage = require(\"./Storage\");\n\nvar Painter = require(\"./Painter\");\n\nvar Animation = require(\"./animation/Animation\");\n\nvar HandlerProxy = require(\"./dom/HandlerProxy\");\n\n/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nvar useVML = !env.canvasSupported;\nvar painterCtors = {\n  canvas: Painter\n};\nvar instances = {}; // ZRender实例map索引\n\n/**\n * @type {string}\n */\n\nvar version = '4.3.2';\n/**\n * Initializing a zrender instance\n * @param {HTMLElement} dom\n * @param {Object} [opts]\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n * @return {module:zrender/ZRender}\n */\n\nfunction init(dom, opts) {\n  var zr = new ZRender(guid(), dom, opts);\n  instances[zr.id] = zr;\n  return zr;\n}\n/**\n * Dispose zrender instance\n * @param {module:zrender/ZRender} zr\n */\n\n\nfunction dispose(zr) {\n  if (zr) {\n    zr.dispose();\n  } else {\n    for (var key in instances) {\n      if (instances.hasOwnProperty(key)) {\n        instances[key].dispose();\n      }\n    }\n\n    instances = {};\n  }\n\n  return this;\n}\n/**\n * Get zrender instance by id\n * @param {string} id zrender instance id\n * @return {module:zrender/ZRender}\n */\n\n\nfunction getInstance(id) {\n  return instances[id];\n}\n\nfunction registerPainter(name, Ctor) {\n  painterCtors[name] = Ctor;\n}\n\nfunction delInstance(id) {\n  delete instances[id];\n}\n/**\n * @module zrender/ZRender\n */\n\n/**\n * @constructor\n * @alias module:zrender/ZRender\n * @param {string} id\n * @param {HTMLElement} dom\n * @param {Object} opts\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n */\n\n\nvar ZRender = function (id, dom, opts) {\n  opts = opts || {};\n  /**\n   * @type {HTMLDomElement}\n   */\n\n  this.dom = dom;\n  /**\n   * @type {string}\n   */\n\n  this.id = id;\n  var self = this;\n  var storage = new Storage();\n  var rendererType = opts.renderer; // TODO WebGL\n\n  if (useVML) {\n    if (!painterCtors.vml) {\n      throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n    }\n\n    rendererType = 'vml';\n  } else if (!rendererType || !painterCtors[rendererType]) {\n    rendererType = 'canvas';\n  }\n\n  var painter = new painterCtors[rendererType](dom, storage, opts, id);\n  this.storage = storage;\n  this.painter = painter;\n  var handerProxy = !env.node && !env.worker ? new HandlerProxy(painter.getViewportRoot(), painter.root) : null;\n  this.handler = new Handler(storage, painter, handerProxy, painter.root);\n  /**\n   * @type {module:zrender/animation/Animation}\n   */\n\n  this.animation = new Animation({\n    stage: {\n      update: zrUtil.bind(this.flush, this)\n    }\n  });\n  this.animation.start();\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._needsRefresh; // 修改 storage.delFromStorage, 每次删除元素之前删除动画\n  // FIXME 有点ugly\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n    el && el.removeSelfFromZr(self);\n  };\n\n  storage.addToStorage = function (el) {\n    oldAddToStorage.call(storage, el);\n    el.addSelfToZr(self);\n  };\n};\n\nZRender.prototype = {\n  constructor: ZRender,\n\n  /**\n   * 获取实例唯一标识\n   * @return {string}\n   */\n  getId: function () {\n    return this.id;\n  },\n\n  /**\n   * 添加元素\n   * @param  {module:zrender/Element} el\n   */\n  add: function (el) {\n    this.storage.addRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * 删除元素\n   * @param  {module:zrender/Element} el\n   */\n  remove: function (el) {\n    this.storage.delRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Change configuration of layer\n   * @param {string} zLevel\n   * @param {Object} config\n   * @param {string} [config.clearColor=0] Clear color\n   * @param {string} [config.motionBlur=false] If enable motion blur\n   * @param {number} [config.lastFrameAlpha=0.7] Motion blur factor. Larger value cause longer trailer\n  */\n  configLayer: function (zLevel, config) {\n    if (this.painter.configLayer) {\n      this.painter.configLayer(zLevel, config);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Set background color\n   * @param {string} backgroundColor\n   */\n  setBackgroundColor: function (backgroundColor) {\n    if (this.painter.setBackgroundColor) {\n      this.painter.setBackgroundColor(backgroundColor);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Repaint the canvas immediately\n   */\n  refreshImmediately: function () {\n    // var start = new Date();\n    // Clear needsRefresh ahead to avoid something wrong happens in refresh\n    // Or it will cause zrender refreshes again and again.\n    this._needsRefresh = this._needsRefreshHover = false;\n    this.painter.refresh(); // Avoid trigger zr.refresh in Element#beforeUpdate hook\n\n    this._needsRefresh = this._needsRefreshHover = false; // var end = new Date();\n    // var log = document.getElementById('log');\n    // if (log) {\n    //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\n    // }\n  },\n\n  /**\n   * Mark and repaint the canvas in the next frame of browser\n   */\n  refresh: function () {\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Perform all refresh\n   */\n  flush: function () {\n    var triggerRendered;\n\n    if (this._needsRefresh) {\n      triggerRendered = true;\n      this.refreshImmediately();\n    }\n\n    if (this._needsRefreshHover) {\n      triggerRendered = true;\n      this.refreshHoverImmediately();\n    }\n\n    triggerRendered && this.trigger('rendered');\n  },\n\n  /**\n   * Add element to hover layer\n   * @param  {module:zrender/Element} el\n   * @param {Object} style\n   */\n  addHover: function (el, style) {\n    if (this.painter.addHover) {\n      var elMirror = this.painter.addHover(el, style);\n      this.refreshHover();\n      return elMirror;\n    }\n  },\n\n  /**\n   * Add element from hover layer\n   * @param  {module:zrender/Element} el\n   */\n  removeHover: function (el) {\n    if (this.painter.removeHover) {\n      this.painter.removeHover(el);\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Clear all hover elements in hover layer\n   * @param  {module:zrender/Element} el\n   */\n  clearHover: function () {\n    if (this.painter.clearHover) {\n      this.painter.clearHover();\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Refresh hover in next frame\n   */\n  refreshHover: function () {\n    this._needsRefreshHover = true;\n  },\n\n  /**\n   * Refresh hover immediately\n   */\n  refreshHoverImmediately: function () {\n    this._needsRefreshHover = false;\n    this.painter.refreshHover && this.painter.refreshHover();\n  },\n\n  /**\n   * Resize the canvas.\n   * Should be invoked when container size is changed\n   * @param {Object} [opts]\n   * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n   * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n   */\n  resize: function (opts) {\n    opts = opts || {};\n    this.painter.resize(opts.width, opts.height);\n    this.handler.resize();\n  },\n\n  /**\n   * Stop and clear all animation immediately\n   */\n  clearAnimation: function () {\n    this.animation.clear();\n  },\n\n  /**\n   * Get container width\n   */\n  getWidth: function () {\n    return this.painter.getWidth();\n  },\n\n  /**\n   * Get container height\n   */\n  getHeight: function () {\n    return this.painter.getHeight();\n  },\n\n  /**\n   * Export the canvas as Base64 URL\n   * @param {string} type\n   * @param {string} [backgroundColor='#fff']\n   * @return {string} Base64 URL\n   */\n  // toDataURL: function(type, backgroundColor) {\n  //     return this.painter.getRenderedCanvas({\n  //         backgroundColor: backgroundColor\n  //     }).toDataURL(type);\n  // },\n\n  /**\n   * Converting a path to image.\n   * It has much better performance of drawing image rather than drawing a vector path.\n   * @param {module:zrender/graphic/Path} e\n   * @param {number} width\n   * @param {number} height\n   */\n  pathToImage: function (e, dpr) {\n    return this.painter.pathToImage(e, dpr);\n  },\n\n  /**\n   * Set default cursor\n   * @param {string} [cursorStyle='default'] 例如 crosshair\n   */\n  setCursorStyle: function (cursorStyle) {\n    this.handler.setCursorStyle(cursorStyle);\n  },\n\n  /**\n   * Find hovered element\n   * @param {number} x\n   * @param {number} y\n   * @return {Object} {target, topTarget}\n   */\n  findHover: function (x, y) {\n    return this.handler.findHover(x, y);\n  },\n\n  /**\n   * Bind event\n   *\n   * @param {string} eventName Event name\n   * @param {Function} eventHandler Handler function\n   * @param {Object} [context] Context object\n   */\n  on: function (eventName, eventHandler, context) {\n    this.handler.on(eventName, eventHandler, context);\n  },\n\n  /**\n   * Unbind event\n   * @param {string} eventName Event name\n   * @param {Function} [eventHandler] Handler function\n   */\n  off: function (eventName, eventHandler) {\n    this.handler.off(eventName, eventHandler);\n  },\n\n  /**\n   * Trigger event manually\n   *\n   * @param {string} eventName Event name\n   * @param {event=} event Event object\n   */\n  trigger: function (eventName, event) {\n    this.handler.trigger(eventName, event);\n  },\n\n  /**\n   * Clear all objects and the canvas.\n   */\n  clear: function () {\n    this.storage.delRoot();\n    this.painter.clear();\n  },\n\n  /**\n   * Dispose self.\n   */\n  dispose: function () {\n    this.animation.stop();\n    this.clear();\n    this.storage.dispose();\n    this.painter.dispose();\n    this.handler.dispose();\n    this.animation = this.storage = this.painter = this.handler = null;\n    delInstance(this.id);\n  }\n};\nexports.version = version;\nexports.init = init;\nexports.dispose = dispose;\nexports.getInstance = getInstance;\nexports.registerPainter = registerPainter;","/**\n * @module zrender/core/util\n */\n// 用于处理merge时无法遍历Date等对象的问题\nvar BUILTIN_OBJECT = {\n  '[object Function]': 1,\n  '[object RegExp]': 1,\n  '[object Date]': 1,\n  '[object Error]': 1,\n  '[object CanvasGradient]': 1,\n  '[object CanvasPattern]': 1,\n  // For node-canvas\n  '[object Image]': 1,\n  '[object Canvas]': 1\n};\nvar TYPED_ARRAY = {\n  '[object Int8Array]': 1,\n  '[object Uint8Array]': 1,\n  '[object Uint8ClampedArray]': 1,\n  '[object Int16Array]': 1,\n  '[object Uint16Array]': 1,\n  '[object Int32Array]': 1,\n  '[object Uint32Array]': 1,\n  '[object Float32Array]': 1,\n  '[object Float64Array]': 1\n};\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar nativeReduce = arrayProto.reduce; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  // Clear ctx instance for different environment\n  if (name === 'createCanvas') {\n    _ctx = null;\n  }\n\n  methods[name] = fn;\n}\n/**\n * Those data types can be cloned:\n *     Plain object, Array, TypedArray, number, string, null, undefined.\n * Those data types will be assgined using the orginal data:\n *     BUILTIN_OBJECT\n * Instance of user defined class will be cloned to a plain object, without\n * properties in prototype.\n * Other data types is not supported (not sure what will happen).\n *\n * Caution: do not support clone Date, for performance consideration.\n * (There might be a large number of date in `series.data`).\n * So date should not be modified in and out of echarts.\n *\n * @param {*} source\n * @return {*} new\n */\n\n\nfunction clone(source) {\n  if (source == null || typeof source !== 'object') {\n    return source;\n  }\n\n  var result = source;\n  var typeStr = objToString.call(source);\n\n  if (typeStr === '[object Array]') {\n    if (!isPrimitive(source)) {\n      result = [];\n\n      for (var i = 0, len = source.length; i < len; i++) {\n        result[i] = clone(source[i]);\n      }\n    }\n  } else if (TYPED_ARRAY[typeStr]) {\n    if (!isPrimitive(source)) {\n      var Ctor = source.constructor;\n\n      if (source.constructor.from) {\n        result = Ctor.from(source);\n      } else {\n        result = new Ctor(source.length);\n\n        for (var i = 0, len = source.length; i < len; i++) {\n          result[i] = clone(source[i]);\n        }\n      }\n    }\n  } else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n    result = {};\n\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) {\n        result[key] = clone(source[key]);\n      }\n    }\n  }\n\n  return result;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overwrite=false]\n */\n\n\nfunction merge(target, source, overwrite) {\n  // We should escapse that source is string\n  // and enter for ... in ...\n  if (!isObject(source) || !isObject(target)) {\n    return overwrite ? clone(source) : target;\n  }\n\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      var targetProp = target[key];\n      var sourceProp = source[key];\n\n      if (isObject(sourceProp) && isObject(targetProp) && !isArray(sourceProp) && !isArray(targetProp) && !isDom(sourceProp) && !isDom(targetProp) && !isBuiltInObject(sourceProp) && !isBuiltInObject(targetProp) && !isPrimitive(sourceProp) && !isPrimitive(targetProp)) {\n        // 如果需要递归覆盖，就递归调用merge\n        merge(targetProp, sourceProp, overwrite);\n      } else if (overwrite || !(key in target)) {\n        // 否则只处理overwrite为true，或者在目标对象中没有此属性的情况\n        // NOTE，在 target[key] 不存在的时候也是直接覆盖\n        target[key] = clone(source[key], true);\n      }\n    }\n  }\n\n  return target;\n}\n/**\n * @param {Array} targetAndSources The first item is target, and the rests are source.\n * @param {boolean} [overwrite=false]\n * @return {*} target\n */\n\n\nfunction mergeAll(targetAndSources, overwrite) {\n  var result = targetAndSources[0];\n\n  for (var i = 1, len = targetAndSources.length; i < len; i++) {\n    result = merge(result, targetAndSources[i], overwrite);\n  }\n\n  return result;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @memberOf module:zrender/core/util\n */\n\n\nfunction extend(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overlay=false]\n * @memberOf module:zrender/core/util\n */\n\n\nfunction defaults(target, source, overlay) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key) && (overlay ? source[key] != null : target[key] == null)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar createCanvas = function () {\n  return methods.createCanvas();\n};\n\nmethods.createCanvas = function () {\n  return document.createElement('canvas');\n}; // FIXME\n\n\nvar _ctx;\n\nfunction getContext() {\n  if (!_ctx) {\n    // Use util.createCanvas instead of createCanvas\n    // because createCanvas may be overwritten in different environment\n    _ctx = createCanvas().getContext('2d');\n  }\n\n  return _ctx;\n}\n/**\n * 查询数组中元素的index\n * @memberOf module:zrender/core/util\n */\n\n\nfunction indexOf(array, value) {\n  if (array) {\n    if (array.indexOf) {\n      return array.indexOf(value);\n    }\n\n    for (var i = 0, len = array.length; i < len; i++) {\n      if (array[i] === value) {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n}\n/**\n * 构造类继承关系\n *\n * @memberOf module:zrender/core/util\n * @param {Function} clazz 源类\n * @param {Function} baseClazz 基类\n */\n\n\nfunction inherits(clazz, baseClazz) {\n  var clazzPrototype = clazz.prototype;\n\n  function F() {}\n\n  F.prototype = baseClazz.prototype;\n  clazz.prototype = new F();\n\n  for (var prop in clazzPrototype) {\n    if (clazzPrototype.hasOwnProperty(prop)) {\n      clazz.prototype[prop] = clazzPrototype[prop];\n    }\n  }\n\n  clazz.prototype.constructor = clazz;\n  clazz.superClass = baseClazz;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Object|Function} target\n * @param {Object|Function} sorce\n * @param {boolean} overlay\n */\n\n\nfunction mixin(target, source, overlay) {\n  target = 'prototype' in target ? target.prototype : target;\n  source = 'prototype' in source ? source.prototype : source;\n  defaults(target, source, overlay);\n}\n/**\n * Consider typed array.\n * @param {Array|TypedArray} data\n */\n\n\nfunction isArrayLike(data) {\n  if (!data) {\n    return;\n  }\n\n  if (typeof data === 'string') {\n    return false;\n  }\n\n  return typeof data.length === 'number';\n}\n/**\n * 数组或对象遍历\n * @memberOf module:zrender/core/util\n * @param {Object|Array} obj\n * @param {Function} cb\n * @param {*} [context]\n */\n\n\nfunction each(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.forEach && obj.forEach === nativeForEach) {\n    obj.forEach(cb, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      cb.call(context, obj[i], i, obj);\n    }\n  } else {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        cb.call(context, obj[key], key, obj);\n      }\n    }\n  }\n}\n/**\n * 数组映射\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction map(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.map && obj.map === nativeMap) {\n    return obj.map(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      result.push(cb.call(context, obj[i], i, obj));\n    }\n\n    return result;\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {Object} [memo]\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction reduce(obj, cb, memo, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.reduce && obj.reduce === nativeReduce) {\n    return obj.reduce(cb, memo, context);\n  } else {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      memo = cb.call(context, memo, obj[i], i, obj);\n    }\n\n    return memo;\n  }\n}\n/**\n * 数组过滤\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction filter(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.filter && obj.filter === nativeFilter) {\n    return obj.filter(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      if (cb.call(context, obj[i], i, obj)) {\n        result.push(obj[i]);\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * 数组项查找\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {*}\n */\n\n\nfunction find(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  for (var i = 0, len = obj.length; i < len; i++) {\n    if (cb.call(context, obj[i], i, obj)) {\n      return obj[i];\n    }\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @param {*} context\n * @return {Function}\n */\n\n\nfunction bind(func, context) {\n  var args = nativeSlice.call(arguments, 2);\n  return function () {\n    return func.apply(context, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @return {Function}\n */\n\n\nfunction curry(func) {\n  var args = nativeSlice.call(arguments, 1);\n  return function () {\n    return func.apply(this, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isArray(value) {\n  return objToString.call(value) === '[object Array]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isString(value) {\n  return objToString.call(value) === '[object String]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return type === 'function' || !!value && type === 'object';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isBuiltInObject(value) {\n  return !!BUILTIN_OBJECT[objToString.call(value)];\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isTypedArray(value) {\n  return !!TYPED_ARRAY[objToString.call(value)];\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isDom(value) {\n  return typeof value === 'object' && typeof value.nodeType === 'number' && typeof value.ownerDocument === 'object';\n}\n/**\n * Whether is exactly NaN. Notice isNaN('a') returns true.\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction eqNaN(value) {\n  /* eslint-disable-next-line no-self-compare */\n  return value !== value;\n}\n/**\n * If value1 is not null, then return value1, otherwise judget rest of values.\n * Low performance.\n * @memberOf module:zrender/core/util\n * @return {*} Final value\n */\n\n\nfunction retrieve(values) {\n  for (var i = 0, len = arguments.length; i < len; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n}\n\nfunction retrieve2(value0, value1) {\n  return value0 != null ? value0 : value1;\n}\n\nfunction retrieve3(value0, value1, value2) {\n  return value0 != null ? value0 : value1 != null ? value1 : value2;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} arr\n * @param {number} startIndex\n * @param {number} endIndex\n * @return {Array}\n */\n\n\nfunction slice() {\n  return Function.call.apply(nativeSlice, arguments);\n}\n/**\n * Normalize css liked array configuration\n * e.g.\n *  3 => [3, 3, 3, 3]\n *  [4, 2] => [4, 2, 4, 2]\n *  [4, 3, 2] => [4, 3, 2, 3]\n * @param {number|Array.<number>} val\n * @return {Array.<number>}\n */\n\n\nfunction normalizeCssArray(val) {\n  if (typeof val === 'number') {\n    return [val, val, val, val];\n  }\n\n  var len = val.length;\n\n  if (len === 2) {\n    // vertical | horizontal\n    return [val[0], val[1], val[0], val[1]];\n  } else if (len === 3) {\n    // top | horizontal | bottom\n    return [val[0], val[1], val[2], val[1]];\n  }\n\n  return val;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {boolean} condition\n * @param {string} message\n */\n\n\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {string} str string to be trimed\n * @return {string} trimed string\n */\n\n\nfunction trim(str) {\n  if (str == null) {\n    return null;\n  } else if (typeof str.trim === 'function') {\n    return str.trim();\n  } else {\n    return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n  }\n}\n\nvar primitiveKey = '__ec_primitive__';\n/**\n * Set an object as primitive to be ignored traversing children in clone or merge\n */\n\nfunction setAsPrimitive(obj) {\n  obj[primitiveKey] = true;\n}\n\nfunction isPrimitive(obj) {\n  return obj[primitiveKey];\n}\n/**\n * @constructor\n * @param {Object} obj Only apply `ownProperty`.\n */\n\n\nfunction HashMap(obj) {\n  var isArr = isArray(obj); // Key should not be set on this, otherwise\n  // methods get/set/... may be overrided.\n\n  this.data = {};\n  var thisMap = this;\n  obj instanceof HashMap ? obj.each(visit) : obj && each(obj, visit);\n\n  function visit(value, key) {\n    isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n  }\n}\n\nHashMap.prototype = {\n  constructor: HashMap,\n  // Do not provide `has` method to avoid defining what is `has`.\n  // (We usually treat `null` and `undefined` as the same, different\n  // from ES6 Map).\n  get: function (key) {\n    return this.data.hasOwnProperty(key) ? this.data[key] : null;\n  },\n  set: function (key, value) {\n    // Comparing with invocation chaining, `return value` is more commonly\n    // used in this case: `var someVal = map.set('a', genVal());`\n    return this.data[key] = value;\n  },\n  // Although util.each can be performed on this hashMap directly, user\n  // should not use the exposed keys, who are prefixed.\n  each: function (cb, context) {\n    context !== void 0 && (cb = bind(cb, context));\n    /* eslint-disable guard-for-in */\n\n    for (var key in this.data) {\n      this.data.hasOwnProperty(key) && cb(this.data[key], key);\n    }\n    /* eslint-enable guard-for-in */\n\n  },\n  // Do not use this method if performance sensitive.\n  removeKey: function (key) {\n    delete this.data[key];\n  }\n};\n\nfunction createHashMap(obj) {\n  return new HashMap(obj);\n}\n\nfunction concatArray(a, b) {\n  var newArray = new a.constructor(a.length + b.length);\n\n  for (var i = 0; i < a.length; i++) {\n    newArray[i] = a[i];\n  }\n\n  var offset = a.length;\n\n  for (i = 0; i < b.length; i++) {\n    newArray[i + offset] = b[i];\n  }\n\n  return newArray;\n}\n\nfunction noop() {}\n\nexports.$override = $override;\nexports.clone = clone;\nexports.merge = merge;\nexports.mergeAll = mergeAll;\nexports.extend = extend;\nexports.defaults = defaults;\nexports.createCanvas = createCanvas;\nexports.getContext = getContext;\nexports.indexOf = indexOf;\nexports.inherits = inherits;\nexports.mixin = mixin;\nexports.isArrayLike = isArrayLike;\nexports.each = each;\nexports.map = map;\nexports.reduce = reduce;\nexports.filter = filter;\nexports.find = find;\nexports.bind = bind;\nexports.curry = curry;\nexports.isArray = isArray;\nexports.isFunction = isFunction;\nexports.isString = isString;\nexports.isObject = isObject;\nexports.isBuiltInObject = isBuiltInObject;\nexports.isTypedArray = isTypedArray;\nexports.isDom = isDom;\nexports.eqNaN = eqNaN;\nexports.retrieve = retrieve;\nexports.retrieve2 = retrieve2;\nexports.retrieve3 = retrieve3;\nexports.slice = slice;\nexports.normalizeCssArray = normalizeCssArray;\nexports.assert = assert;\nexports.trim = trim;\nexports.setAsPrimitive = setAsPrimitive;\nexports.isPrimitive = isPrimitive;\nexports.createHashMap = createHashMap;\nexports.concatArray = concatArray;\nexports.noop = noop;","/**\n * 缓动代码来自 https://github.com/sole/tween.js/blob/master/src/Tween.js\n * @see http://sole.github.io/tween.js/examples/03_graphs.html\n * @exports zrender/animation/easing\n */\nvar easing = {\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  linear: function (k) {\n    return k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticIn: function (k) {\n    return k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticOut: function (k) {\n    return k * (2 - k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k;\n    }\n\n    return -0.5 * (--k * (k - 2) - 1);\n  },\n  // 三次方的缓动（t^3）\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicIn: function (k) {\n    return k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicOut: function (k) {\n    return --k * k * k + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k;\n    }\n\n    return 0.5 * ((k -= 2) * k * k + 2);\n  },\n  // 四次方的缓动（t^4）\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticIn: function (k) {\n    return k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticOut: function (k) {\n    return 1 - --k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k;\n    }\n\n    return -0.5 * ((k -= 2) * k * k * k - 2);\n  },\n  // 五次方的缓动（t^5）\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticIn: function (k) {\n    return k * k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticOut: function (k) {\n    return --k * k * k * k * k + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k * k;\n    }\n\n    return 0.5 * ((k -= 2) * k * k * k * k + 2);\n  },\n  // 正弦曲线的缓动（sin(t)）\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalIn: function (k) {\n    return 1 - Math.cos(k * Math.PI / 2);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalOut: function (k) {\n    return Math.sin(k * Math.PI / 2);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalInOut: function (k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n  },\n  // 指数曲线的缓动（2^t）\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialIn: function (k) {\n    return k === 0 ? 0 : Math.pow(1024, k - 1);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialOut: function (k) {\n    return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialInOut: function (k) {\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if ((k *= 2) < 1) {\n      return 0.5 * Math.pow(1024, k - 1);\n    }\n\n    return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n  },\n  // 圆形曲线的缓动（sqrt(1-t^2)）\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularIn: function (k) {\n    return 1 - Math.sqrt(1 - k * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularOut: function (k) {\n    return Math.sqrt(1 - --k * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return -0.5 * (Math.sqrt(1 - k * k) - 1);\n    }\n\n    return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n  },\n  // 创建类似于弹簧在停止前来回振荡的动画\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticIn: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticOut: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticInOut: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    if ((k *= 2) < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    }\n\n    return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n  },\n  // 在某一动画开始沿指示的路径进行动画处理前稍稍收回该动画的移动\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backIn: function (k) {\n    var s = 1.70158;\n    return k * k * ((s + 1) * k - s);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backOut: function (k) {\n    var s = 1.70158;\n    return --k * k * ((s + 1) * k + s) + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backInOut: function (k) {\n    var s = 1.70158 * 1.525;\n\n    if ((k *= 2) < 1) {\n      return 0.5 * (k * k * ((s + 1) * k - s));\n    }\n\n    return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n  },\n  // 创建弹跳效果\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceIn: function (k) {\n    return 1 - easing.bounceOut(1 - k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceOut: function (k) {\n    if (k < 1 / 2.75) {\n      return 7.5625 * k * k;\n    } else if (k < 2 / 2.75) {\n      return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n    } else if (k < 2.5 / 2.75) {\n      return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n    } else {\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceInOut: function (k) {\n    if (k < 0.5) {\n      return easing.bounceIn(k * 2) * 0.5;\n    }\n\n    return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n  }\n};\nvar _default = easing;\nmodule.exports = _default;","var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"./helper/text\");\n\nvar _constant = require(\"./constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\n\n/**\n * @alias zrender/graphic/Text\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nvar Text = function (opts) {\n  // jshint ignore:line\n  Displayable.call(this, opts);\n};\n\nText.prototype = {\n  constructor: Text,\n  type: 'text',\n  brush: function (ctx, prevEl) {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true); // Use props with prefix 'text'.\n\n    style.fill = style.stroke = style.shadowBlur = style.shadowColor = style.shadowOffsetX = style.shadowOffsetY = null;\n    var text = style.text; // Convert to string\n\n    text != null && (text += ''); // Do not apply style.bind in Text node. Because the real bind job\n    // is in textHelper.renderText, and performance of text render should\n    // be considered.\n    // style.bind(ctx, this, prevEl);\n\n    if (!textHelper.needDrawText(text, style)) {\n      // The current el.style is not applied\n      // and should not be used as cache.\n      ctx.__attrCachedBy = ContextCachedBy.NONE;\n      return;\n    }\n\n    this.setTransform(ctx);\n    textHelper.renderText(this, ctx, text, style, null, prevEl);\n    this.restoreTransform(ctx);\n  },\n  getBoundingRect: function () {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n\n    if (!this._rect) {\n      var text = style.text;\n      text != null ? text += '' : text = '';\n      var rect = textContain.getBoundingRect(style.text + '', style.font, style.textAlign, style.textVerticalAlign, style.textPadding, style.textLineHeight, style.rich);\n      rect.x += style.x || 0;\n      rect.y += style.y || 0;\n\n      if (textHelper.getStroke(style.textStroke, style.textStrokeWidth)) {\n        var w = style.textStrokeWidth;\n        rect.x -= w / 2;\n        rect.y -= w / 2;\n        rect.width += w;\n        rect.height += w;\n      }\n\n      this._rect = rect;\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(Text, Displayable);\nvar _default = Text;\nmodule.exports = _default;","var SHADOW_PROPS = {\n  'shadowBlur': 1,\n  'shadowOffsetX': 1,\n  'shadowOffsetY': 1,\n  'textShadowBlur': 1,\n  'textShadowOffsetX': 1,\n  'textShadowOffsetY': 1,\n  'textBoxShadowBlur': 1,\n  'textBoxShadowOffsetX': 1,\n  'textBoxShadowOffsetY': 1\n};\n\nfunction _default(ctx, propName, value) {\n  if (SHADOW_PROPS.hasOwnProperty(propName)) {\n    return value *= ctx.dpr;\n  }\n\n  return value;\n}\n\nmodule.exports = _default;","var ContextCachedBy = {\n  NONE: 0,\n  STYLE_BIND: 1,\n  PLAIN_TEXT: 2\n}; // Avoid confused with 0/false.\n\nvar WILL_BE_RESTORED = 9;\nexports.ContextCachedBy = ContextCachedBy;\nexports.WILL_BE_RESTORED = WILL_BE_RESTORED;","/**\n * The algoritm is learnt from\n * https://franklinta.com/2014/09/08/computing-css-matrix3d-transforms/\n * And we made some optimization for matrix inversion.\n * Other similar approaches:\n * \"cv::getPerspectiveTransform\", \"Direct Linear Transformation\".\n */\nvar LN2 = Math.log(2);\n\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n  var cacheKey = rowMask + '-' + colMask;\n  var fullRank = rows.length;\n\n  if (detCache.hasOwnProperty(cacheKey)) {\n    return detCache[cacheKey];\n  }\n\n  if (rank === 1) {\n    // In this case the colMask must be like: `11101111`. We can find the place of `0`.\n    var colStart = Math.round(Math.log((1 << fullRank) - 1 & ~colMask) / LN2);\n    return rows[rowStart][colStart];\n  }\n\n  var subRowMask = rowMask | 1 << rowStart;\n  var subRowStart = rowStart + 1;\n\n  while (rowMask & 1 << subRowStart) {\n    subRowStart++;\n  }\n\n  var sum = 0;\n\n  for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n    var colTag = 1 << j;\n\n    if (!(colTag & colMask)) {\n      sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j] // det(subMatrix(0, j))\n      * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n      colLocalIdx++;\n    }\n  }\n\n  detCache[cacheKey] = sum;\n  return sum;\n}\n/**\n * Usage:\n * ```js\n * var transformer = buildTransformer(\n *     [10, 44, 100, 44, 100, 300, 10, 300],\n *     [50, 54, 130, 14, 140, 330, 14, 220]\n * );\n * var out = [];\n * transformer && transformer([11, 33], out);\n * ```\n *\n * Notice: `buildTransformer` may take more than 10ms in some Android device.\n *\n * @param {Array.<number>} src source four points, [x0, y0, x1, y1, x2, y2, x3, y3]\n * @param {Array.<number>} dest destination four points, [x0, y0, x1, y1, x2, y2, x3, y3]\n * @return {Function} transformer If fail, return null/undefined.\n */\n\n\nfunction buildTransformer(src, dest) {\n  var mA = [[src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]], [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]], [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]], [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]], [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]], [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]], [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]], [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]];\n  var detCache = {};\n  var det = determinant(mA, 8, 0, 0, 0, detCache);\n\n  if (det === 0) {\n    // can not make transformer when and only when\n    // any three of the markers are collinear.\n    return;\n  } // `invert(mA) * dest`, that is, `adj(mA) / det * dest`.\n\n\n  var vh = [];\n\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      vh[j] == null && (vh[j] = 0);\n      vh[j] += ((i + j) % 2 ? -1 : 1) * // det(subMatrix(i, j))\n      determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache) / det * dest[i];\n    }\n  }\n\n  return function (out, srcPointX, srcPointY) {\n    var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n    out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n    out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n  };\n}\n\nexports.buildTransformer = buildTransformer;","var PI2 = Math.PI * 2;\n\nfunction normalizeRadian(angle) {\n  angle %= PI2;\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  return angle;\n}\n\nexports.normalizeRadian = normalizeRadian;","var svgURI = 'http://www.w3.org/2000/svg';\n\nfunction createElement(name) {\n  return document.createElementNS(svgURI, name);\n}\n\nexports.createElement = createElement;","function windingLine(x0, y0, x1, y1, x, y) {\n  if (y > y0 && y > y1 || y < y0 && y < y1) {\n    return 0;\n  } // Ignore horizontal line\n\n\n  if (y1 === y0) {\n    return 0;\n  }\n\n  var dir = y1 < y0 ? 1 : -1;\n  var t = (y - y0) / (y1 - y0); // Avoid winding error when intersection point is the connect point of two line of polygon\n\n  if (t === 1 || t === 0) {\n    dir = y1 < y0 ? 0.5 : -0.5;\n  }\n\n  var x_ = t * (x1 - x0) + x0; // If (x, y) on the line, considered as \"contain\".\n\n  return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n\nmodule.exports = windingLine;","var Path = require(\"../Path\");\n\nvar polyHelper = require(\"../helper/poly\");\n\n/**\n * 多边形\n * @module zrender/shape/Polygon\n */\nvar _default = Path.extend({\n  type: 'polygon',\n  shape: {\n    points: null,\n    smooth: false,\n    smoothConstraint: null\n  },\n  buildPath: function (ctx, shape) {\n    polyHelper.buildPath(ctx, shape, true);\n  }\n});\n\nmodule.exports = _default;","var env = require(\"../../core/env\");\n\n// Fix weird bug in some version of IE11 (like 11.0.9600.178**),\n// where exception \"unexpected call to method or property access\"\n// might be thrown when calling ctx.fill or ctx.stroke after a path\n// whose area size is zero is drawn and ctx.clip() is called and\n// shadowBlur is set. See #4572, #3112, #5777.\n// (e.g.,\n//  ctx.moveTo(10, 10);\n//  ctx.lineTo(20, 10);\n//  ctx.closePath();\n//  ctx.clip();\n//  ctx.shadowBlur = 10;\n//  ...\n//  ctx.fill();\n// )\nvar shadowTemp = [['shadowBlur', 0], ['shadowColor', '#000'], ['shadowOffsetX', 0], ['shadowOffsetY', 0]];\n\nfunction _default(orignalBrush) {\n  // version string can be: '11.0'\n  return env.browser.ie && env.browser.version >= 11 ? function () {\n    var clipPaths = this.__clipPaths;\n    var style = this.style;\n    var modified;\n\n    if (clipPaths) {\n      for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        var shape = clipPath && clipPath.shape;\n        var type = clipPath && clipPath.type;\n\n        if (shape && (type === 'sector' && shape.startAngle === shape.endAngle || type === 'rect' && (!shape.width || !shape.height))) {\n          for (var j = 0; j < shadowTemp.length; j++) {\n            // It is save to put shadowTemp static, because shadowTemp\n            // will be all modified each item brush called.\n            shadowTemp[j][2] = style[shadowTemp[j][0]];\n            style[shadowTemp[j][0]] = shadowTemp[j][1];\n          }\n\n          modified = true;\n          break;\n        }\n      }\n    }\n\n    orignalBrush.apply(this, arguments);\n\n    if (modified) {\n      for (var j = 0; j < shadowTemp.length; j++) {\n        style[shadowTemp[j][0]] = shadowTemp[j][2];\n      }\n    }\n  } : orignalBrush;\n}\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * 圆弧\n * @module zrender/graphic/shape/Arc\n */\nvar _default = Path.extend({\n  type: 'arc',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r = Math.max(shape.r, 0);\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitX = Math.cos(startAngle);\n    var unitY = Math.sin(startAngle);\n    ctx.moveTo(unitX * r + x, unitY * r + y);\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n  }\n});\n\nmodule.exports = _default;","require(\"./graphic\");\n\nvar _zrender = require(\"../zrender\");\n\nvar registerPainter = _zrender.registerPainter;\n\nvar Painter = require(\"./Painter\");\n\nregisterPainter('svg', Painter);","/**\n * 线段包含判断\n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth;\n  var _a = 0;\n  var _b = x0; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l || y < y0 - _l && y < y1 - _l || x > x0 + _l && x > x1 + _l || x < x0 - _l && x < x1 - _l) {\n    return false;\n  }\n\n  if (x0 !== x1) {\n    _a = (y0 - y1) / (x0 - x1);\n    _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n  } else {\n    return Math.abs(x - x0) <= _l / 2;\n  }\n\n  var tmp = _a * x - y + _b;\n\n  var _s = tmp * tmp / (_a * _a + 1);\n\n  return _s <= _l / 2 * _l / 2;\n}\n\nexports.containStroke = containStroke;","var vec2 = require(\"./vector\");\n\nvar matrix = require(\"./matrix\");\n\n/**\n * @module echarts/core/BoundingRect\n */\nvar v2ApplyTransform = vec2.applyTransform;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n/**\n * @alias module:echarts/core/BoundingRect\n */\n\nfunction BoundingRect(x, y, width, height) {\n  if (width < 0) {\n    x = x + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y = y + height;\n    height = -height;\n  }\n  /**\n   * @type {number}\n   */\n\n\n  this.x = x;\n  /**\n   * @type {number}\n   */\n\n  this.y = y;\n  /**\n   * @type {number}\n   */\n\n  this.width = width;\n  /**\n   * @type {number}\n   */\n\n  this.height = height;\n}\n\nBoundingRect.prototype = {\n  constructor: BoundingRect,\n\n  /**\n   * @param {module:echarts/core/BoundingRect} other\n   */\n  union: function (other) {\n    var x = mathMin(other.x, this.x);\n    var y = mathMin(other.y, this.y);\n    this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n    this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n    this.x = x;\n    this.y = y;\n  },\n\n  /**\n   * @param {Array.<number>} m\n   * @methods\n   */\n  applyTransform: function () {\n    var lt = [];\n    var rb = [];\n    var lb = [];\n    var rt = [];\n    return function (m) {\n      // In case usage like this\n      // el.getBoundingRect().applyTransform(el.transform)\n      // And element has no transform\n      if (!m) {\n        return;\n      }\n\n      lt[0] = lb[0] = this.x;\n      lt[1] = rt[1] = this.y;\n      rb[0] = rt[0] = this.x + this.width;\n      rb[1] = lb[1] = this.y + this.height;\n      v2ApplyTransform(lt, lt, m);\n      v2ApplyTransform(rb, rb, m);\n      v2ApplyTransform(lb, lb, m);\n      v2ApplyTransform(rt, rt, m);\n      this.x = mathMin(lt[0], rb[0], lb[0], rt[0]);\n      this.y = mathMin(lt[1], rb[1], lb[1], rt[1]);\n      var maxX = mathMax(lt[0], rb[0], lb[0], rt[0]);\n      var maxY = mathMax(lt[1], rb[1], lb[1], rt[1]);\n      this.width = maxX - this.x;\n      this.height = maxY - this.y;\n    };\n  }(),\n\n  /**\n   * Calculate matrix of transforming from self to target rect\n   * @param  {module:zrender/core/BoundingRect} b\n   * @return {Array.<number>}\n   */\n  calculateTransform: function (b) {\n    var a = this;\n    var sx = b.width / a.width;\n    var sy = b.height / a.height;\n    var m = matrix.create(); // 矩阵右乘\n\n    matrix.translate(m, m, [-a.x, -a.y]);\n    matrix.scale(m, m, [sx, sy]);\n    matrix.translate(m, m, [b.x, b.y]);\n    return m;\n  },\n\n  /**\n   * @param {(module:echarts/core/BoundingRect|Object)} b\n   * @return {boolean}\n   */\n  intersect: function (b) {\n    if (!b) {\n      return false;\n    }\n\n    if (!(b instanceof BoundingRect)) {\n      // Normalize negative width/height.\n      b = BoundingRect.create(b);\n    }\n\n    var a = this;\n    var ax0 = a.x;\n    var ax1 = a.x + a.width;\n    var ay0 = a.y;\n    var ay1 = a.y + a.height;\n    var bx0 = b.x;\n    var bx1 = b.x + b.width;\n    var by0 = b.y;\n    var by1 = b.y + b.height;\n    return !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n  },\n  contain: function (x, y) {\n    var rect = this;\n    return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n  },\n\n  /**\n   * @return {module:echarts/core/BoundingRect}\n   */\n  clone: function () {\n    return new BoundingRect(this.x, this.y, this.width, this.height);\n  },\n\n  /**\n   * Copy from another rect\n   */\n  copy: function (other) {\n    this.x = other.x;\n    this.y = other.y;\n    this.width = other.width;\n    this.height = other.height;\n  },\n  plain: function () {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    };\n  }\n};\n/**\n * @param {Object|module:zrender/core/BoundingRect} rect\n * @param {number} rect.x\n * @param {number} rect.y\n * @param {number} rect.width\n * @param {number} rect.height\n * @return {module:zrender/core/BoundingRect}\n */\n\nBoundingRect.create = function (rect) {\n  return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n};\n\nvar _default = BoundingRect;\nmodule.exports = _default;","var _default = typeof window !== 'undefined' && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || // https://github.com/ecomfe/zrender/issues/189#issuecomment-224919809\nwindow.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function (func) {\n  setTimeout(func, 16);\n};\n\nmodule.exports = _default;","var _vector = require(\"../../core/vector\");\n\nvar v2Min = _vector.min;\nvar v2Max = _vector.max;\nvar v2Scale = _vector.scale;\nvar v2Distance = _vector.distance;\nvar v2Add = _vector.add;\nvar v2Clone = _vector.clone;\nvar v2Sub = _vector.sub;\n\n/**\n * 贝塞尔平滑曲线\n * @module zrender/shape/util/smoothBezier\n * @author pissang (https://www.github.com/pissang)\n *         Kener (@Kener-林峰, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n */\n\n/**\n * 贝塞尔平滑曲线\n * @alias module:zrender/shape/util/smoothBezier\n * @param {Array} points 线段顶点数组\n * @param {number} smooth 平滑等级, 0-1\n * @param {boolean} isLoop\n * @param {Array} constraint 将计算出来的控制点约束在一个包围盒内\n *                           比如 [[0, 0], [100, 100]], 这个包围盒会与\n *                           整个折线的包围盒做一个并集用来约束控制点。\n * @param {Array} 计算出来的控制点数组\n */\nfunction _default(points, smooth, isLoop, constraint) {\n  var cps = [];\n  var v = [];\n  var v1 = [];\n  var v2 = [];\n  var prevPoint;\n  var nextPoint;\n  var min;\n  var max;\n\n  if (constraint) {\n    min = [Infinity, Infinity];\n    max = [-Infinity, -Infinity];\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      v2Min(min, min, points[i]);\n      v2Max(max, max, points[i]);\n    } // 与指定的包围盒做并集\n\n\n    v2Min(min, min, constraint[0]);\n    v2Max(max, max, constraint[1]);\n  }\n\n  for (var i = 0, len = points.length; i < len; i++) {\n    var point = points[i];\n\n    if (isLoop) {\n      prevPoint = points[i ? i - 1 : len - 1];\n      nextPoint = points[(i + 1) % len];\n    } else {\n      if (i === 0 || i === len - 1) {\n        cps.push(v2Clone(points[i]));\n        continue;\n      } else {\n        prevPoint = points[i - 1];\n        nextPoint = points[i + 1];\n      }\n    }\n\n    v2Sub(v, nextPoint, prevPoint); // use degree to scale the handle length\n\n    v2Scale(v, v, smooth);\n    var d0 = v2Distance(point, prevPoint);\n    var d1 = v2Distance(point, nextPoint);\n    var sum = d0 + d1;\n\n    if (sum !== 0) {\n      d0 /= sum;\n      d1 /= sum;\n    }\n\n    v2Scale(v1, v, -d0);\n    v2Scale(v2, v, d1);\n    var cp0 = v2Add([], point, v1);\n    var cp1 = v2Add([], point, v2);\n\n    if (constraint) {\n      v2Max(cp0, cp0, min);\n      v2Min(cp0, cp0, max);\n      v2Max(cp1, cp1, min);\n      v2Min(cp1, cp1, max);\n    }\n\n    cps.push(cp0);\n    cps.push(cp1);\n  }\n\n  if (isLoop) {\n    cps.push(cps.shift());\n  }\n\n  return cps;\n}\n\nmodule.exports = _default;","/**\n * Sub-pixel optimize for canvas rendering, prevent from blur\n * when rendering a thin vertical/horizontal line.\n */\nvar round = Math.round;\n/**\n * Sub pixel optimize line for canvas\n *\n * @param {Object} outputShape The modification will be performed on `outputShape`.\n *                 `outputShape` and `inputShape` can be the same object.\n *                 `outputShape` object can be used repeatly, because all of\n *                 the `x1`, `x2`, `y1`, `y2` will be assigned in this method.\n * @param {Object} [inputShape]\n * @param {number} [inputShape.x1]\n * @param {number} [inputShape.y1]\n * @param {number} [inputShape.x2]\n * @param {number} [inputShape.y2]\n * @param {Object} [style]\n * @param {number} [style.lineWidth] If `null`/`undefined`/`0`, do not optimize.\n */\n\nfunction subPixelOptimizeLine(outputShape, inputShape, style) {\n  if (!inputShape) {\n    return;\n  }\n\n  var x1 = inputShape.x1;\n  var x2 = inputShape.x2;\n  var y1 = inputShape.y1;\n  var y2 = inputShape.y2;\n  outputShape.x1 = x1;\n  outputShape.x2 = x2;\n  outputShape.y1 = y1;\n  outputShape.y2 = y2;\n  var lineWidth = style && style.lineWidth;\n\n  if (!lineWidth) {\n    return;\n  }\n\n  if (round(x1 * 2) === round(x2 * 2)) {\n    outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n  }\n\n  if (round(y1 * 2) === round(y2 * 2)) {\n    outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n  }\n}\n/**\n * Sub pixel optimize rect for canvas\n *\n * @param {Object} outputShape The modification will be performed on `outputShape`.\n *                 `outputShape` and `inputShape` can be the same object.\n *                 `outputShape` object can be used repeatly, because all of\n *                 the `x`, `y`, `width`, `height` will be assigned in this method.\n * @param {Object} [inputShape]\n * @param {number} [inputShape.x]\n * @param {number} [inputShape.y]\n * @param {number} [inputShape.width]\n * @param {number} [inputShape.height]\n * @param {Object} [style]\n * @param {number} [style.lineWidth] If `null`/`undefined`/`0`, do not optimize.\n */\n\n\nfunction subPixelOptimizeRect(outputShape, inputShape, style) {\n  if (!inputShape) {\n    return;\n  }\n\n  var originX = inputShape.x;\n  var originY = inputShape.y;\n  var originWidth = inputShape.width;\n  var originHeight = inputShape.height;\n  outputShape.x = originX;\n  outputShape.y = originY;\n  outputShape.width = originWidth;\n  outputShape.height = originHeight;\n  var lineWidth = style && style.lineWidth;\n\n  if (!lineWidth) {\n    return;\n  }\n\n  outputShape.x = subPixelOptimize(originX, lineWidth, true);\n  outputShape.y = subPixelOptimize(originY, lineWidth, true);\n  outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n  outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param {number} position Coordinate, such as x, y\n * @param {number} lineWidth If `null`/`undefined`/`0`, do not optimize.\n * @param {boolean=} positiveOrNegative Default false (negative).\n * @return {number} Optimized position.\n */\n\n\nfunction subPixelOptimize(position, lineWidth, positiveOrNegative) {\n  if (!lineWidth) {\n    return position;\n  } // Assure that (position + lineWidth / 2) is near integer edge,\n  // otherwise line will be fuzzy in canvas.\n\n\n  var doubledPosition = round(position * 2);\n  return (doubledPosition + round(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n\nexports.subPixelOptimizeLine = subPixelOptimizeLine;\nexports.subPixelOptimizeRect = subPixelOptimizeRect;\nexports.subPixelOptimize = subPixelOptimize;","var textHelper = require(\"../helper/text\");\n\nvar BoundingRect = require(\"../../core/BoundingRect\");\n\nvar _constant = require(\"../constant\");\n\nvar WILL_BE_RESTORED = _constant.WILL_BE_RESTORED;\n\n/**\n * Mixin for drawing text in a element bounding rect\n * @module zrender/mixin/RectText\n */\nvar tmpRect = new BoundingRect();\n\nvar RectText = function () {};\n\nRectText.prototype = {\n  constructor: RectText,\n\n  /**\n   * Draw text in a rect with specified position.\n   * @param  {CanvasRenderingContext2D} ctx\n   * @param  {Object} rect Displayable rect\n   */\n  drawRectText: function (ctx, rect) {\n    var style = this.style;\n    rect = style.textRect || rect; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n    var text = style.text; // Convert to string\n\n    text != null && (text += '');\n\n    if (!textHelper.needDrawText(text, style)) {\n      return;\n    } // FIXME\n    // Do not provide prevEl to `textHelper.renderText` for ctx prop cache,\n    // but use `ctx.save()` and `ctx.restore()`. Because the cache for rect\n    // text propably break the cache for its host elements.\n\n\n    ctx.save(); // Transform rect to view space\n\n    var transform = this.transform;\n\n    if (!style.transformText) {\n      if (transform) {\n        tmpRect.copy(rect);\n        tmpRect.applyTransform(transform);\n        rect = tmpRect;\n      }\n    } else {\n      this.setTransform(ctx);\n    } // transformText and textRotation can not be used at the same time.\n\n\n    textHelper.renderText(this, ctx, text, style, rect, WILL_BE_RESTORED);\n    ctx.restore();\n  }\n};\nvar _default = RectText;\nmodule.exports = _default;","var _util = require(\"./util\");\n\nvar normalizeRadian = _util.normalizeRadian;\nvar PI2 = Math.PI * 2;\n/**\n * 圆弧描边包含判断\n * @param  {number}  cx\n * @param  {number}  cy\n * @param  {number}  r\n * @param  {number}  startAngle\n * @param  {number}  endAngle\n * @param  {boolean}  anticlockwise\n * @param  {number} lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {Boolean}\n */\n\nfunction containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth;\n  x -= cx;\n  y -= cy;\n  var d = Math.sqrt(x * x + y * y);\n\n  if (d - _l > r || d + _l < r) {\n    return false;\n  }\n\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    return true;\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var angle = Math.atan2(y, x);\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  return angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle;\n}\n\nexports.containStroke = containStroke;","var Definable = require(\"./Definable\");\n\nvar zrUtil = require(\"../../core/util\");\n\nvar matrix = require(\"../../core/matrix\");\n\n/**\n * @file Manages SVG clipPath elements.\n * @author Zhang Wenli\n */\n\n/**\n * Manages SVG clipPath elements.\n *\n * @class\n * @extends Definable\n * @param   {number}     zrId    zrender instance id\n * @param   {SVGElement} svgRoot root of SVG document\n */\nfunction ClippathManager(zrId, svgRoot) {\n  Definable.call(this, zrId, svgRoot, 'clipPath', '__clippath_in_use__');\n}\n\nzrUtil.inherits(ClippathManager, Definable);\n/**\n * Update clipPath.\n *\n * @param {Displayable} displayable displayable element\n */\n\nClippathManager.prototype.update = function (displayable) {\n  var svgEl = this.getSvgElement(displayable);\n\n  if (svgEl) {\n    this.updateDom(svgEl, displayable.__clipPaths, false);\n  }\n\n  var textEl = this.getTextSvgElement(displayable);\n\n  if (textEl) {\n    // Make another clipPath for text, since it's transform\n    // matrix is not the same with svgElement\n    this.updateDom(textEl, displayable.__clipPaths, true);\n  }\n\n  this.markUsed(displayable);\n};\n/**\n * Create an SVGElement of displayable and create a <clipPath> of its\n * clipPath\n *\n * @param {Displayable} parentEl  parent element\n * @param {ClipPath[]}  clipPaths clipPaths of parent element\n * @param {boolean}     isText    if parent element is Text\n */\n\n\nClippathManager.prototype.updateDom = function (parentEl, clipPaths, isText) {\n  if (clipPaths && clipPaths.length > 0) {\n    // Has clipPath, create <clipPath> with the first clipPath\n    var defs = this.getDefs(true);\n    var clipPath = clipPaths[0];\n    var clipPathEl;\n    var id;\n    var dom = isText ? '_textDom' : '_dom';\n\n    if (clipPath[dom]) {\n      // Use a dom that is already in <defs>\n      id = clipPath[dom].getAttribute('id');\n      clipPathEl = clipPath[dom]; // Use a dom that is already in <defs>\n\n      if (!defs.contains(clipPathEl)) {\n        // This happens when set old clipPath that has\n        // been previously removed\n        defs.appendChild(clipPathEl);\n      }\n    } else {\n      // New <clipPath>\n      id = 'zr' + this._zrId + '-clip-' + this.nextId;\n      ++this.nextId;\n      clipPathEl = this.createElement('clipPath');\n      clipPathEl.setAttribute('id', id);\n      defs.appendChild(clipPathEl);\n      clipPath[dom] = clipPathEl;\n    } // Build path and add to <clipPath>\n\n\n    var svgProxy = this.getSvgProxy(clipPath);\n\n    if (clipPath.transform && clipPath.parent.invTransform && !isText) {\n      /**\n       * If a clipPath has a parent with transform, the transform\n       * of parent should not be considered when setting transform\n       * of clipPath. So we need to transform back from parent's\n       * transform, which is done by multiplying parent's inverse\n       * transform.\n       */\n      // Store old transform\n      var transform = Array.prototype.slice.call(clipPath.transform); // Transform back from parent, and brush path\n\n      matrix.mul(clipPath.transform, clipPath.parent.invTransform, clipPath.transform);\n      svgProxy.brush(clipPath); // Set back transform of clipPath\n\n      clipPath.transform = transform;\n    } else {\n      svgProxy.brush(clipPath);\n    }\n\n    var pathEl = this.getSvgElement(clipPath);\n    clipPathEl.innerHTML = '';\n    /**\n     * Use `cloneNode()` here to appendChild to multiple parents,\n     * which may happend when Text and other shapes are using the same\n     * clipPath. Since Text will create an extra clipPath DOM due to\n     * different transform rules.\n     */\n\n    clipPathEl.appendChild(pathEl.cloneNode());\n    parentEl.setAttribute('clip-path', 'url(#' + id + ')');\n\n    if (clipPaths.length > 1) {\n      // Make the other clipPaths recursively\n      this.updateDom(clipPathEl, clipPaths.slice(1), isText);\n    }\n  } else {\n    // No clipPath\n    if (parentEl) {\n      parentEl.setAttribute('clip-path', 'none');\n    }\n  }\n};\n/**\n * Mark a single clipPath to be used\n *\n * @param {Displayable} displayable displayable element\n */\n\n\nClippathManager.prototype.markUsed = function (displayable) {\n  var that = this; // displayable.__clipPaths can only be `null`/`undefined` or an non-empty array.\n\n  if (displayable.__clipPaths) {\n    zrUtil.each(displayable.__clipPaths, function (clipPath) {\n      if (clipPath._dom) {\n        Definable.prototype.markUsed.call(that, clipPath._dom);\n      }\n\n      if (clipPath._textDom) {\n        Definable.prototype.markUsed.call(that, clipPath._textDom);\n      }\n    });\n  }\n};\n\nvar _default = ClippathManager;\nmodule.exports = _default;","var _util = require(\"../../core/util\");\n\nvar retrieve2 = _util.retrieve2;\nvar retrieve3 = _util.retrieve3;\nvar each = _util.each;\nvar normalizeCssArray = _util.normalizeCssArray;\nvar isString = _util.isString;\nvar isObject = _util.isObject;\n\nvar textContain = require(\"../../contain/text\");\n\nvar roundRectHelper = require(\"./roundRect\");\n\nvar imageHelper = require(\"./image\");\n\nvar fixShadow = require(\"./fixShadow\");\n\nvar _constant = require(\"../constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\nvar WILL_BE_RESTORED = _constant.WILL_BE_RESTORED;\nvar DEFAULT_FONT = textContain.DEFAULT_FONT; // TODO: Have not support 'start', 'end' yet.\n\nvar VALID_TEXT_ALIGN = {\n  left: 1,\n  right: 1,\n  center: 1\n};\nvar VALID_TEXT_VERTICAL_ALIGN = {\n  top: 1,\n  bottom: 1,\n  middle: 1\n}; // Different from `STYLE_COMMON_PROPS` of `graphic/Style`,\n// the default value of shadowColor is `'transparent'`.\n\nvar SHADOW_STYLE_COMMON_PROPS = [['textShadowBlur', 'shadowBlur', 0], ['textShadowOffsetX', 'shadowOffsetX', 0], ['textShadowOffsetY', 'shadowOffsetY', 0], ['textShadowColor', 'shadowColor', 'transparent']];\nvar _tmpTextPositionResult = {};\nvar _tmpBoxPositionResult = {};\n/**\n * @param {module:zrender/graphic/Style} style\n * @return {module:zrender/graphic/Style} The input style.\n */\n\nfunction normalizeTextStyle(style) {\n  normalizeStyle(style);\n  each(style.rich, normalizeStyle);\n  return style;\n}\n\nfunction normalizeStyle(style) {\n  if (style) {\n    style.font = textContain.makeFont(style);\n    var textAlign = style.textAlign;\n    textAlign === 'middle' && (textAlign = 'center');\n    style.textAlign = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left'; // Compatible with textBaseline.\n\n    var textVerticalAlign = style.textVerticalAlign || style.textBaseline;\n    textVerticalAlign === 'center' && (textVerticalAlign = 'middle');\n    style.textVerticalAlign = textVerticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[textVerticalAlign] ? textVerticalAlign : 'top';\n    var textPadding = style.textPadding;\n\n    if (textPadding) {\n      style.textPadding = normalizeCssArray(style.textPadding);\n    }\n  }\n}\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {string} text\n * @param {module:zrender/graphic/Style} style\n * @param {Object|boolean} [rect] {x, y, width, height}\n *                  If set false, rect text is not used.\n * @param {Element|module:zrender/graphic/helper/constant.WILL_BE_RESTORED} [prevEl] For ctx prop cache.\n */\n\n\nfunction renderText(hostEl, ctx, text, style, rect, prevEl) {\n  style.rich ? renderRichText(hostEl, ctx, text, style, rect, prevEl) : renderPlainText(hostEl, ctx, text, style, rect, prevEl);\n} // Avoid setting to ctx according to prevEl if possible for\n// performance in scenarios of large amount text.\n\n\nfunction renderPlainText(hostEl, ctx, text, style, rect, prevEl) {\n  'use strict';\n\n  var needDrawBg = needDrawBackground(style);\n  var prevStyle;\n  var checkCache = false;\n  var cachedByMe = ctx.__attrCachedBy === ContextCachedBy.PLAIN_TEXT; // Only take and check cache for `Text` el, but not RectText.\n\n  if (prevEl !== WILL_BE_RESTORED) {\n    if (prevEl) {\n      prevStyle = prevEl.style;\n      checkCache = !needDrawBg && cachedByMe && prevStyle;\n    } // Prevent from using cache in `Style::bind`, because of the case:\n    // ctx property is modified by other properties than `Style::bind`\n    // used, and Style::bind is called next.\n\n\n    ctx.__attrCachedBy = needDrawBg ? ContextCachedBy.NONE : ContextCachedBy.PLAIN_TEXT;\n  } // Since this will be restored, prevent from using these props to check cache in the next\n  // entering of this method. But do not need to clear other cache like `Style::bind`.\n  else if (cachedByMe) {\n      ctx.__attrCachedBy = ContextCachedBy.NONE;\n    }\n\n  var styleFont = style.font || DEFAULT_FONT; // PENDING\n  // Only `Text` el set `font` and keep it (`RectText` will restore). So theoretically\n  // we can make font cache on ctx, which can cache for text el that are discontinuous.\n  // But layer save/restore needed to be considered.\n  // if (styleFont !== ctx.__fontCache) {\n  //     ctx.font = styleFont;\n  //     if (prevEl !== WILL_BE_RESTORED) {\n  //         ctx.__fontCache = styleFont;\n  //     }\n  // }\n\n  if (!checkCache || styleFont !== (prevStyle.font || DEFAULT_FONT)) {\n    ctx.font = styleFont;\n  } // Use the final font from context-2d, because the final\n  // font might not be the style.font when it is illegal.\n  // But get `ctx.font` might be time consuming.\n\n\n  var computedFont = hostEl.__computedFont;\n\n  if (hostEl.__styleFont !== styleFont) {\n    hostEl.__styleFont = styleFont;\n    computedFont = hostEl.__computedFont = ctx.font;\n  }\n\n  var textPadding = style.textPadding;\n  var textLineHeight = style.textLineHeight;\n  var contentBlock = hostEl.__textCotentBlock;\n\n  if (!contentBlock || hostEl.__dirtyText) {\n    contentBlock = hostEl.__textCotentBlock = textContain.parsePlainText(text, computedFont, textPadding, textLineHeight, style.truncate);\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var textLines = contentBlock.lines;\n  var lineHeight = contentBlock.lineHeight;\n  var boxPos = getBoxPosition(_tmpBoxPositionResult, hostEl, style, rect);\n  var baseX = boxPos.baseX;\n  var baseY = boxPos.baseY;\n  var textAlign = boxPos.textAlign || 'left';\n  var textVerticalAlign = boxPos.textVerticalAlign; // Origin of textRotation should be the base point of text drawing.\n\n  applyTextRotation(ctx, style, rect, baseX, baseY);\n  var boxY = textContain.adjustTextY(baseY, outerHeight, textVerticalAlign);\n  var textX = baseX;\n  var textY = boxY;\n\n  if (needDrawBg || textPadding) {\n    // Consider performance, do not call getTextWidth util necessary.\n    var textWidth = textContain.getWidth(text, computedFont);\n    var outerWidth = textWidth;\n    textPadding && (outerWidth += textPadding[1] + textPadding[3]);\n    var boxX = textContain.adjustTextX(baseX, outerWidth, textAlign);\n    needDrawBg && drawBackground(hostEl, ctx, style, boxX, boxY, outerWidth, outerHeight);\n\n    if (textPadding) {\n      textX = getTextXForPadding(baseX, textAlign, textPadding);\n      textY += textPadding[0];\n    }\n  } // Always set textAlign and textBase line, because it is difficute to calculate\n  // textAlign from prevEl, and we dont sure whether textAlign will be reset if\n  // font set happened.\n\n\n  ctx.textAlign = textAlign; // Force baseline to be \"middle\". Otherwise, if using \"top\", the\n  // text will offset downward a little bit in font \"Microsoft YaHei\".\n\n  ctx.textBaseline = 'middle'; // Set text opacity\n\n  ctx.globalAlpha = style.opacity || 1; // Always set shadowBlur and shadowOffset to avoid leak from displayable.\n\n  for (var i = 0; i < SHADOW_STYLE_COMMON_PROPS.length; i++) {\n    var propItem = SHADOW_STYLE_COMMON_PROPS[i];\n    var styleProp = propItem[0];\n    var ctxProp = propItem[1];\n    var val = style[styleProp];\n\n    if (!checkCache || val !== prevStyle[styleProp]) {\n      ctx[ctxProp] = fixShadow(ctx, ctxProp, val || propItem[2]);\n    }\n  } // `textBaseline` is set as 'middle'.\n\n\n  textY += lineHeight / 2;\n  var textStrokeWidth = style.textStrokeWidth;\n  var textStrokeWidthPrev = checkCache ? prevStyle.textStrokeWidth : null;\n  var strokeWidthChanged = !checkCache || textStrokeWidth !== textStrokeWidthPrev;\n  var strokeChanged = !checkCache || strokeWidthChanged || style.textStroke !== prevStyle.textStroke;\n  var textStroke = getStroke(style.textStroke, textStrokeWidth);\n  var textFill = getFill(style.textFill);\n\n  if (textStroke) {\n    if (strokeWidthChanged) {\n      ctx.lineWidth = textStrokeWidth;\n    }\n\n    if (strokeChanged) {\n      ctx.strokeStyle = textStroke;\n    }\n  }\n\n  if (textFill) {\n    if (!checkCache || style.textFill !== prevStyle.textFill) {\n      ctx.fillStyle = textFill;\n    }\n  } // Optimize simply, in most cases only one line exists.\n\n\n  if (textLines.length === 1) {\n    // Fill after stroke so the outline will not cover the main part.\n    textStroke && ctx.strokeText(textLines[0], textX, textY);\n    textFill && ctx.fillText(textLines[0], textX, textY);\n  } else {\n    for (var i = 0; i < textLines.length; i++) {\n      // Fill after stroke so the outline will not cover the main part.\n      textStroke && ctx.strokeText(textLines[i], textX, textY);\n      textFill && ctx.fillText(textLines[i], textX, textY);\n      textY += lineHeight;\n    }\n  }\n}\n\nfunction renderRichText(hostEl, ctx, text, style, rect, prevEl) {\n  // Do not do cache for rich text because of the complexity.\n  // But `RectText` this will be restored, do not need to clear other cache like `Style::bind`.\n  if (prevEl !== WILL_BE_RESTORED) {\n    ctx.__attrCachedBy = ContextCachedBy.NONE;\n  }\n\n  var contentBlock = hostEl.__textCotentBlock;\n\n  if (!contentBlock || hostEl.__dirtyText) {\n    contentBlock = hostEl.__textCotentBlock = textContain.parseRichText(text, style);\n  }\n\n  drawRichText(hostEl, ctx, contentBlock, style, rect);\n}\n\nfunction drawRichText(hostEl, ctx, contentBlock, style, rect) {\n  var contentWidth = contentBlock.width;\n  var outerWidth = contentBlock.outerWidth;\n  var outerHeight = contentBlock.outerHeight;\n  var textPadding = style.textPadding;\n  var boxPos = getBoxPosition(_tmpBoxPositionResult, hostEl, style, rect);\n  var baseX = boxPos.baseX;\n  var baseY = boxPos.baseY;\n  var textAlign = boxPos.textAlign;\n  var textVerticalAlign = boxPos.textVerticalAlign; // Origin of textRotation should be the base point of text drawing.\n\n  applyTextRotation(ctx, style, rect, baseX, baseY);\n  var boxX = textContain.adjustTextX(baseX, outerWidth, textAlign);\n  var boxY = textContain.adjustTextY(baseY, outerHeight, textVerticalAlign);\n  var xLeft = boxX;\n  var lineTop = boxY;\n\n  if (textPadding) {\n    xLeft += textPadding[3];\n    lineTop += textPadding[0];\n  }\n\n  var xRight = xLeft + contentWidth;\n  needDrawBackground(style) && drawBackground(hostEl, ctx, style, boxX, boxY, outerWidth, outerHeight);\n\n  for (var i = 0; i < contentBlock.lines.length; i++) {\n    var line = contentBlock.lines[i];\n    var tokens = line.tokens;\n    var tokenCount = tokens.length;\n    var lineHeight = line.lineHeight;\n    var usedWidth = line.width;\n    var leftIndex = 0;\n    var lineXLeft = xLeft;\n    var lineXRight = xRight;\n    var rightIndex = tokenCount - 1;\n    var token;\n\n    while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.textAlign || token.textAlign === 'left')) {\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXLeft, 'left');\n      usedWidth -= token.width;\n      lineXLeft += token.width;\n      leftIndex++;\n    }\n\n    while (rightIndex >= 0 && (token = tokens[rightIndex], token.textAlign === 'right')) {\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXRight, 'right');\n      usedWidth -= token.width;\n      lineXRight -= token.width;\n      rightIndex--;\n    } // The other tokens are placed as textAlign 'center' if there is enough space.\n\n\n    lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - usedWidth) / 2;\n\n    while (leftIndex <= rightIndex) {\n      token = tokens[leftIndex]; // Consider width specified by user, use 'center' rather than 'left'.\n\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center');\n      lineXLeft += token.width;\n      leftIndex++;\n    }\n\n    lineTop += lineHeight;\n  }\n}\n\nfunction applyTextRotation(ctx, style, rect, x, y) {\n  // textRotation only apply in RectText.\n  if (rect && style.textRotation) {\n    var origin = style.textOrigin;\n\n    if (origin === 'center') {\n      x = rect.width / 2 + rect.x;\n      y = rect.height / 2 + rect.y;\n    } else if (origin) {\n      x = origin[0] + rect.x;\n      y = origin[1] + rect.y;\n    }\n\n    ctx.translate(x, y); // Positive: anticlockwise\n\n    ctx.rotate(-style.textRotation);\n    ctx.translate(-x, -y);\n  }\n}\n\nfunction placeToken(hostEl, ctx, token, style, lineHeight, lineTop, x, textAlign) {\n  var tokenStyle = style.rich[token.styleName] || {};\n  tokenStyle.text = token.text; // 'ctx.textBaseline' is always set as 'middle', for sake of\n  // the bias of \"Microsoft YaHei\".\n\n  var textVerticalAlign = token.textVerticalAlign;\n  var y = lineTop + lineHeight / 2;\n\n  if (textVerticalAlign === 'top') {\n    y = lineTop + token.height / 2;\n  } else if (textVerticalAlign === 'bottom') {\n    y = lineTop + lineHeight - token.height / 2;\n  }\n\n  !token.isLineHolder && needDrawBackground(tokenStyle) && drawBackground(hostEl, ctx, tokenStyle, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n  var textPadding = token.textPadding;\n\n  if (textPadding) {\n    x = getTextXForPadding(x, textAlign, textPadding);\n    y -= token.height / 2 - textPadding[2] - token.textHeight / 2;\n  }\n\n  setCtx(ctx, 'shadowBlur', retrieve3(tokenStyle.textShadowBlur, style.textShadowBlur, 0));\n  setCtx(ctx, 'shadowColor', tokenStyle.textShadowColor || style.textShadowColor || 'transparent');\n  setCtx(ctx, 'shadowOffsetX', retrieve3(tokenStyle.textShadowOffsetX, style.textShadowOffsetX, 0));\n  setCtx(ctx, 'shadowOffsetY', retrieve3(tokenStyle.textShadowOffsetY, style.textShadowOffsetY, 0));\n  setCtx(ctx, 'textAlign', textAlign); // Force baseline to be \"middle\". Otherwise, if using \"top\", the\n  // text will offset downward a little bit in font \"Microsoft YaHei\".\n\n  setCtx(ctx, 'textBaseline', 'middle');\n  setCtx(ctx, 'font', token.font || DEFAULT_FONT);\n  var textStroke = getStroke(tokenStyle.textStroke || style.textStroke, textStrokeWidth);\n  var textFill = getFill(tokenStyle.textFill || style.textFill);\n  var textStrokeWidth = retrieve2(tokenStyle.textStrokeWidth, style.textStrokeWidth); // Fill after stroke so the outline will not cover the main part.\n\n  if (textStroke) {\n    setCtx(ctx, 'lineWidth', textStrokeWidth);\n    setCtx(ctx, 'strokeStyle', textStroke);\n    ctx.strokeText(token.text, x, y);\n  }\n\n  if (textFill) {\n    setCtx(ctx, 'fillStyle', textFill);\n    ctx.fillText(token.text, x, y);\n  }\n}\n\nfunction needDrawBackground(style) {\n  return !!(style.textBackgroundColor || style.textBorderWidth && style.textBorderColor);\n} // style: {textBackgroundColor, textBorderWidth, textBorderColor, textBorderRadius, text}\n// shape: {x, y, width, height}\n\n\nfunction drawBackground(hostEl, ctx, style, x, y, width, height) {\n  var textBackgroundColor = style.textBackgroundColor;\n  var textBorderWidth = style.textBorderWidth;\n  var textBorderColor = style.textBorderColor;\n  var isPlainBg = isString(textBackgroundColor);\n  setCtx(ctx, 'shadowBlur', style.textBoxShadowBlur || 0);\n  setCtx(ctx, 'shadowColor', style.textBoxShadowColor || 'transparent');\n  setCtx(ctx, 'shadowOffsetX', style.textBoxShadowOffsetX || 0);\n  setCtx(ctx, 'shadowOffsetY', style.textBoxShadowOffsetY || 0);\n\n  if (isPlainBg || textBorderWidth && textBorderColor) {\n    ctx.beginPath();\n    var textBorderRadius = style.textBorderRadius;\n\n    if (!textBorderRadius) {\n      ctx.rect(x, y, width, height);\n    } else {\n      roundRectHelper.buildPath(ctx, {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        r: textBorderRadius\n      });\n    }\n\n    ctx.closePath();\n  }\n\n  if (isPlainBg) {\n    setCtx(ctx, 'fillStyle', textBackgroundColor);\n\n    if (style.fillOpacity != null) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.fillOpacity * style.opacity;\n      ctx.fill();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.fill();\n    }\n  } else if (isObject(textBackgroundColor)) {\n    var image = textBackgroundColor.image;\n    image = imageHelper.createOrUpdateImage(image, null, hostEl, onBgImageLoaded, textBackgroundColor);\n\n    if (image && imageHelper.isImageReady(image)) {\n      ctx.drawImage(image, x, y, width, height);\n    }\n  }\n\n  if (textBorderWidth && textBorderColor) {\n    setCtx(ctx, 'lineWidth', textBorderWidth);\n    setCtx(ctx, 'strokeStyle', textBorderColor);\n\n    if (style.strokeOpacity != null) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.strokeOpacity * style.opacity;\n      ctx.stroke();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.stroke();\n    }\n  }\n}\n\nfunction onBgImageLoaded(image, textBackgroundColor) {\n  // Replace image, so that `contain/text.js#parseRichText`\n  // will get correct result in next tick.\n  textBackgroundColor.image = image;\n}\n\nfunction getBoxPosition(out, hostEl, style, rect) {\n  var baseX = style.x || 0;\n  var baseY = style.y || 0;\n  var textAlign = style.textAlign;\n  var textVerticalAlign = style.textVerticalAlign; // Text position represented by coord\n\n  if (rect) {\n    var textPosition = style.textPosition;\n\n    if (textPosition instanceof Array) {\n      // Percent\n      baseX = rect.x + parsePercent(textPosition[0], rect.width);\n      baseY = rect.y + parsePercent(textPosition[1], rect.height);\n    } else {\n      var res = hostEl && hostEl.calculateTextPosition ? hostEl.calculateTextPosition(_tmpTextPositionResult, style, rect) : textContain.calculateTextPosition(_tmpTextPositionResult, style, rect);\n      baseX = res.x;\n      baseY = res.y; // Default align and baseline when has textPosition\n\n      textAlign = textAlign || res.textAlign;\n      textVerticalAlign = textVerticalAlign || res.textVerticalAlign;\n    } // textOffset is only support in RectText, otherwise\n    // we have to adjust boundingRect for textOffset.\n\n\n    var textOffset = style.textOffset;\n\n    if (textOffset) {\n      baseX += textOffset[0];\n      baseY += textOffset[1];\n    }\n  }\n\n  out = out || {};\n  out.baseX = baseX;\n  out.baseY = baseY;\n  out.textAlign = textAlign;\n  out.textVerticalAlign = textVerticalAlign;\n  return out;\n}\n\nfunction setCtx(ctx, prop, value) {\n  ctx[prop] = fixShadow(ctx, prop, value);\n  return ctx[prop];\n}\n/**\n * @param {string} [stroke] If specified, do not check style.textStroke.\n * @param {string} [lineWidth] If specified, do not check style.textStroke.\n * @param {number} style\n */\n\n\nfunction getStroke(stroke, lineWidth) {\n  return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null // TODO pattern and gradient?\n  : stroke.image || stroke.colorStops ? '#000' : stroke;\n}\n\nfunction getFill(fill) {\n  return fill == null || fill === 'none' ? null // TODO pattern and gradient?\n  : fill.image || fill.colorStops ? '#000' : fill;\n}\n\nfunction parsePercent(value, maxValue) {\n  if (typeof value === 'string') {\n    if (value.lastIndexOf('%') >= 0) {\n      return parseFloat(value) / 100 * maxValue;\n    }\n\n    return parseFloat(value);\n  }\n\n  return value;\n}\n\nfunction getTextXForPadding(x, textAlign, textPadding) {\n  return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n}\n/**\n * @param {string} text\n * @param {module:zrender/Style} style\n * @return {boolean}\n */\n\n\nfunction needDrawText(text, style) {\n  return text != null && (text || style.textBackgroundColor || style.textBorderWidth && style.textBorderColor || style.textPadding);\n}\n\nexports.normalizeTextStyle = normalizeTextStyle;\nexports.renderText = renderText;\nexports.getBoxPosition = getBoxPosition;\nexports.getStroke = getStroke;\nexports.getFill = getFill;\nexports.parsePercent = parsePercent;\nexports.needDrawText = needDrawText;","var env = require(\"../core/env\");\n\nvar _vector = require(\"../core/vector\");\n\nvar applyTransform = _vector.applyTransform;\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar colorTool = require(\"../tool/color\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"../graphic/helper/text\");\n\nvar RectText = require(\"../graphic/mixin/RectText\");\n\nvar Displayable = require(\"../graphic/Displayable\");\n\nvar ZImage = require(\"../graphic/Image\");\n\nvar Text = require(\"../graphic/Text\");\n\nvar Path = require(\"../graphic/Path\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar Gradient = require(\"../graphic/Gradient\");\n\nvar vmlCore = require(\"./core\");\n\n// http://www.w3.org/TR/NOTE-VML\n// TODO Use proxy like svg instead of overwrite brush methods\nvar CMD = PathProxy.CMD;\nvar round = Math.round;\nvar sqrt = Math.sqrt;\nvar abs = Math.abs;\nvar cos = Math.cos;\nvar sin = Math.sin;\nvar mathMax = Math.max;\n\nif (!env.canvasSupported) {\n  var comma = ',';\n  var imageTransformPrefix = 'progid:DXImageTransform.Microsoft';\n  var Z = 21600;\n  var Z2 = Z / 2;\n  var ZLEVEL_BASE = 100000;\n  var Z_BASE = 1000;\n\n  var initRootElStyle = function (el) {\n    el.style.cssText = 'position:absolute;left:0;top:0;width:1px;height:1px;';\n    el.coordsize = Z + ',' + Z;\n    el.coordorigin = '0,0';\n  };\n\n  var encodeHtmlAttribute = function (s) {\n    return String(s).replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n  };\n\n  var rgb2Str = function (r, g, b) {\n    return 'rgb(' + [r, g, b].join(',') + ')';\n  };\n\n  var append = function (parent, child) {\n    if (child && parent && child.parentNode !== parent) {\n      parent.appendChild(child);\n    }\n  };\n\n  var remove = function (parent, child) {\n    if (child && parent && child.parentNode === parent) {\n      parent.removeChild(child);\n    }\n  };\n\n  var getZIndex = function (zlevel, z, z2) {\n    // z 的取值范围为 [0, 1000]\n    return (parseFloat(zlevel) || 0) * ZLEVEL_BASE + (parseFloat(z) || 0) * Z_BASE + z2;\n  };\n\n  var parsePercent = textHelper.parsePercent;\n  /***************************************************\n   * PATH\n   **************************************************/\n\n  var setColorAndOpacity = function (el, color, opacity) {\n    var colorArr = colorTool.parse(color);\n    opacity = +opacity;\n\n    if (isNaN(opacity)) {\n      opacity = 1;\n    }\n\n    if (colorArr) {\n      el.color = rgb2Str(colorArr[0], colorArr[1], colorArr[2]);\n      el.opacity = opacity * colorArr[3];\n    }\n  };\n\n  var getColorAndAlpha = function (color) {\n    var colorArr = colorTool.parse(color);\n    return [rgb2Str(colorArr[0], colorArr[1], colorArr[2]), colorArr[3]];\n  };\n\n  var updateFillNode = function (el, style, zrEl) {\n    // TODO pattern\n    var fill = style.fill;\n\n    if (fill != null) {\n      // Modified from excanvas\n      if (fill instanceof Gradient) {\n        var gradientType;\n        var angle = 0;\n        var focus = [0, 0]; // additional offset\n\n        var shift = 0; // scale factor for offset\n\n        var expansion = 1;\n        var rect = zrEl.getBoundingRect();\n        var rectWidth = rect.width;\n        var rectHeight = rect.height;\n\n        if (fill.type === 'linear') {\n          gradientType = 'gradient';\n          var transform = zrEl.transform;\n          var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n          var p1 = [fill.x2 * rectWidth, fill.y2 * rectHeight];\n\n          if (transform) {\n            applyTransform(p0, p0, transform);\n            applyTransform(p1, p1, transform);\n          }\n\n          var dx = p1[0] - p0[0];\n          var dy = p1[1] - p0[1];\n          angle = Math.atan2(dx, dy) * 180 / Math.PI; // The angle should be a non-negative number.\n\n          if (angle < 0) {\n            angle += 360;\n          } // Very small angles produce an unexpected result because they are\n          // converted to a scientific notation string.\n\n\n          if (angle < 1e-6) {\n            angle = 0;\n          }\n        } else {\n          gradientType = 'gradientradial';\n          var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n          var transform = zrEl.transform;\n          var scale = zrEl.scale;\n          var width = rectWidth;\n          var height = rectHeight;\n          focus = [// Percent in bounding rect\n          (p0[0] - rect.x) / width, (p0[1] - rect.y) / height];\n\n          if (transform) {\n            applyTransform(p0, p0, transform);\n          }\n\n          width /= scale[0] * Z;\n          height /= scale[1] * Z;\n          var dimension = mathMax(width, height);\n          shift = 2 * 0 / dimension;\n          expansion = 2 * fill.r / dimension - shift;\n        } // We need to sort the color stops in ascending order by offset,\n        // otherwise IE won't interpret it correctly.\n\n\n        var stops = fill.colorStops.slice();\n        stops.sort(function (cs1, cs2) {\n          return cs1.offset - cs2.offset;\n        });\n        var length = stops.length; // Color and alpha list of first and last stop\n\n        var colorAndAlphaList = [];\n        var colors = [];\n\n        for (var i = 0; i < length; i++) {\n          var stop = stops[i];\n          var colorAndAlpha = getColorAndAlpha(stop.color);\n          colors.push(stop.offset * expansion + shift + ' ' + colorAndAlpha[0]);\n\n          if (i === 0 || i === length - 1) {\n            colorAndAlphaList.push(colorAndAlpha);\n          }\n        }\n\n        if (length >= 2) {\n          var color1 = colorAndAlphaList[0][0];\n          var color2 = colorAndAlphaList[1][0];\n          var opacity1 = colorAndAlphaList[0][1] * style.opacity;\n          var opacity2 = colorAndAlphaList[1][1] * style.opacity;\n          el.type = gradientType;\n          el.method = 'none';\n          el.focus = '100%';\n          el.angle = angle;\n          el.color = color1;\n          el.color2 = color2;\n          el.colors = colors.join(','); // When colors attribute is used, the meanings of opacity and o:opacity2\n          // are reversed.\n\n          el.opacity = opacity2; // FIXME g_o_:opacity ?\n\n          el.opacity2 = opacity1;\n        }\n\n        if (gradientType === 'radial') {\n          el.focusposition = focus.join(',');\n        }\n      } else {\n        // FIXME Change from Gradient fill to color fill\n        setColorAndOpacity(el, fill, style.opacity);\n      }\n    }\n  };\n\n  var updateStrokeNode = function (el, style) {\n    // if (style.lineJoin != null) {\n    //     el.joinstyle = style.lineJoin;\n    // }\n    // if (style.miterLimit != null) {\n    //     el.miterlimit = style.miterLimit * Z;\n    // }\n    // if (style.lineCap != null) {\n    //     el.endcap = style.lineCap;\n    // }\n    if (style.lineDash) {\n      el.dashstyle = style.lineDash.join(' ');\n    }\n\n    if (style.stroke != null && !(style.stroke instanceof Gradient)) {\n      setColorAndOpacity(el, style.stroke, style.opacity);\n    }\n  };\n\n  var updateFillAndStroke = function (vmlEl, type, style, zrEl) {\n    var isFill = type === 'fill';\n    var el = vmlEl.getElementsByTagName(type)[0]; // Stroke must have lineWidth\n\n    if (style[type] != null && style[type] !== 'none' && (isFill || !isFill && style.lineWidth)) {\n      vmlEl[isFill ? 'filled' : 'stroked'] = 'true'; // FIXME Remove before updating, or set `colors` will throw error\n\n      if (style[type] instanceof Gradient) {\n        remove(vmlEl, el);\n      }\n\n      if (!el) {\n        el = vmlCore.createNode(type);\n      }\n\n      isFill ? updateFillNode(el, style, zrEl) : updateStrokeNode(el, style);\n      append(vmlEl, el);\n    } else {\n      vmlEl[isFill ? 'filled' : 'stroked'] = 'false';\n      remove(vmlEl, el);\n    }\n  };\n\n  var points = [[], [], []];\n\n  var pathDataToString = function (path, m) {\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    var str = [];\n    var nPoint;\n    var cmdStr;\n    var cmd;\n    var i;\n    var xi;\n    var yi;\n    var data = path.data;\n    var dataLength = path.len();\n\n    for (i = 0; i < dataLength;) {\n      cmd = data[i++];\n      cmdStr = '';\n      nPoint = 0;\n\n      switch (cmd) {\n        case M:\n          cmdStr = ' m ';\n          nPoint = 1;\n          xi = data[i++];\n          yi = data[i++];\n          points[0][0] = xi;\n          points[0][1] = yi;\n          break;\n\n        case L:\n          cmdStr = ' l ';\n          nPoint = 1;\n          xi = data[i++];\n          yi = data[i++];\n          points[0][0] = xi;\n          points[0][1] = yi;\n          break;\n\n        case Q:\n        case C:\n          cmdStr = ' c ';\n          nPoint = 3;\n          var x1 = data[i++];\n          var y1 = data[i++];\n          var x2 = data[i++];\n          var y2 = data[i++];\n          var x3;\n          var y3;\n\n          if (cmd === Q) {\n            // Convert quadratic to cubic using degree elevation\n            x3 = x2;\n            y3 = y2;\n            x2 = (x2 + 2 * x1) / 3;\n            y2 = (y2 + 2 * y1) / 3;\n            x1 = (xi + 2 * x1) / 3;\n            y1 = (yi + 2 * y1) / 3;\n          } else {\n            x3 = data[i++];\n            y3 = data[i++];\n          }\n\n          points[0][0] = x1;\n          points[0][1] = y1;\n          points[1][0] = x2;\n          points[1][1] = y2;\n          points[2][0] = x3;\n          points[2][1] = y3;\n          xi = x3;\n          yi = y3;\n          break;\n\n        case A:\n          var x = 0;\n          var y = 0;\n          var sx = 1;\n          var sy = 1;\n          var angle = 0;\n\n          if (m) {\n            // Extract SRT from matrix\n            x = m[4];\n            y = m[5];\n            sx = sqrt(m[0] * m[0] + m[1] * m[1]);\n            sy = sqrt(m[2] * m[2] + m[3] * m[3]);\n            angle = Math.atan2(-m[1] / sy, m[0] / sx);\n          }\n\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var startAngle = data[i++] + angle;\n          var endAngle = data[i++] + startAngle + angle; // FIXME\n          // var psi = data[i++];\n\n          i++;\n          var clockwise = data[i++];\n          var x0 = cx + cos(startAngle) * rx;\n          var y0 = cy + sin(startAngle) * ry;\n          var x1 = cx + cos(endAngle) * rx;\n          var y1 = cy + sin(endAngle) * ry;\n          var type = clockwise ? ' wa ' : ' at ';\n\n          if (Math.abs(x0 - x1) < 1e-4) {\n            // IE won't render arches drawn counter clockwise if x0 == x1.\n            if (Math.abs(endAngle - startAngle) > 1e-2) {\n              // Offset x0 by 1/80 of a pixel. Use something\n              // that can be represented in binary\n              if (clockwise) {\n                x0 += 270 / Z;\n              }\n            } else {\n              // Avoid case draw full circle\n              if (Math.abs(y0 - cy) < 1e-4) {\n                if (clockwise && x0 < cx || !clockwise && x0 > cx) {\n                  y1 -= 270 / Z;\n                } else {\n                  y1 += 270 / Z;\n                }\n              } else if (clockwise && y0 < cy || !clockwise && y0 > cy) {\n                x1 += 270 / Z;\n              } else {\n                x1 -= 270 / Z;\n              }\n            }\n          }\n\n          str.push(type, round(((cx - rx) * sx + x) * Z - Z2), comma, round(((cy - ry) * sy + y) * Z - Z2), comma, round(((cx + rx) * sx + x) * Z - Z2), comma, round(((cy + ry) * sy + y) * Z - Z2), comma, round((x0 * sx + x) * Z - Z2), comma, round((y0 * sy + y) * Z - Z2), comma, round((x1 * sx + x) * Z - Z2), comma, round((y1 * sy + y) * Z - Z2));\n          xi = x1;\n          yi = y1;\n          break;\n\n        case CMD.R:\n          var p0 = points[0];\n          var p1 = points[1]; // x0, y0\n\n          p0[0] = data[i++];\n          p0[1] = data[i++]; // x1, y1\n\n          p1[0] = p0[0] + data[i++];\n          p1[1] = p0[1] + data[i++];\n\n          if (m) {\n            applyTransform(p0, p0, m);\n            applyTransform(p1, p1, m);\n          }\n\n          p0[0] = round(p0[0] * Z - Z2);\n          p1[0] = round(p1[0] * Z - Z2);\n          p0[1] = round(p0[1] * Z - Z2);\n          p1[1] = round(p1[1] * Z - Z2);\n          str.push( // x0, y0\n          ' m ', p0[0], comma, p0[1], // x1, y0\n          ' l ', p1[0], comma, p0[1], // x1, y1\n          ' l ', p1[0], comma, p1[1], // x0, y1\n          ' l ', p0[0], comma, p1[1]);\n          break;\n\n        case CMD.Z:\n          // FIXME Update xi, yi\n          str.push(' x ');\n      }\n\n      if (nPoint > 0) {\n        str.push(cmdStr);\n\n        for (var k = 0; k < nPoint; k++) {\n          var p = points[k];\n          m && applyTransform(p, p, m); // 不 round 会非常慢\n\n          str.push(round(p[0] * Z - Z2), comma, round(p[1] * Z - Z2), k < nPoint - 1 ? comma : '');\n        }\n      }\n    }\n\n    return str.join('');\n  }; // Rewrite the original path method\n\n\n  Path.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n    var vmlEl = this._vmlEl;\n\n    if (!vmlEl) {\n      vmlEl = vmlCore.createNode('shape');\n      initRootElStyle(vmlEl);\n      this._vmlEl = vmlEl;\n    }\n\n    updateFillAndStroke(vmlEl, 'fill', style, this);\n    updateFillAndStroke(vmlEl, 'stroke', style, this);\n    var m = this.transform;\n    var needTransform = m != null;\n    var strokeEl = vmlEl.getElementsByTagName('stroke')[0];\n\n    if (strokeEl) {\n      var lineWidth = style.lineWidth; // Get the line scale.\n      // Determinant of this.m_ means how much the area is enlarged by the\n      // transformation. So its square root can be used as a scale factor\n      // for width.\n\n      if (needTransform && !style.strokeNoScale) {\n        var det = m[0] * m[3] - m[1] * m[2];\n        lineWidth *= sqrt(abs(det));\n      }\n\n      strokeEl.weight = lineWidth + 'px';\n    }\n\n    var path = this.path || (this.path = new PathProxy());\n\n    if (this.__dirtyPath) {\n      path.beginPath();\n      path.subPixelOptimize = false;\n      this.buildPath(path, this.shape);\n      path.toStatic();\n      this.__dirtyPath = false;\n    }\n\n    vmlEl.path = pathDataToString(path, this.transform);\n    vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2); // Append to root\n\n    append(vmlRoot, vmlEl); // Text\n\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, this.getBoundingRect());\n    } else {\n      this.removeRectText(vmlRoot);\n    }\n  };\n\n  Path.prototype.onRemove = function (vmlRoot) {\n    remove(vmlRoot, this._vmlEl);\n    this.removeRectText(vmlRoot);\n  };\n\n  Path.prototype.onAdd = function (vmlRoot) {\n    append(vmlRoot, this._vmlEl);\n    this.appendRectText(vmlRoot);\n  };\n  /***************************************************\n   * IMAGE\n   **************************************************/\n\n\n  var isImage = function (img) {\n    // FIXME img instanceof Image 如果 img 是一个字符串的时候，IE8 下会报错\n    return typeof img === 'object' && img.tagName && img.tagName.toUpperCase() === 'IMG'; // return img instanceof Image;\n  }; // Rewrite the original path method\n\n\n  ZImage.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n    var image = style.image; // Image original width, height\n\n    var ow;\n    var oh;\n\n    if (isImage(image)) {\n      var src = image.src;\n\n      if (src === this._imageSrc) {\n        ow = this._imageWidth;\n        oh = this._imageHeight;\n      } else {\n        var imageRuntimeStyle = image.runtimeStyle;\n        var oldRuntimeWidth = imageRuntimeStyle.width;\n        var oldRuntimeHeight = imageRuntimeStyle.height;\n        imageRuntimeStyle.width = 'auto';\n        imageRuntimeStyle.height = 'auto'; // get the original size\n\n        ow = image.width;\n        oh = image.height; // and remove overides\n\n        imageRuntimeStyle.width = oldRuntimeWidth;\n        imageRuntimeStyle.height = oldRuntimeHeight; // Caching image original width, height and src\n\n        this._imageSrc = src;\n        this._imageWidth = ow;\n        this._imageHeight = oh;\n      }\n\n      image = src;\n    } else {\n      if (image === this._imageSrc) {\n        ow = this._imageWidth;\n        oh = this._imageHeight;\n      }\n    }\n\n    if (!image) {\n      return;\n    }\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var sw = style.sWidth;\n    var sh = style.sHeight;\n    var sx = style.sx || 0;\n    var sy = style.sy || 0;\n    var hasCrop = sw && sh;\n    var vmlEl = this._vmlEl;\n\n    if (!vmlEl) {\n      // FIXME 使用 group 在 left, top 都不是 0 的时候就无法显示了。\n      // vmlEl = vmlCore.createNode('group');\n      vmlEl = vmlCore.doc.createElement('div');\n      initRootElStyle(vmlEl);\n      this._vmlEl = vmlEl;\n    }\n\n    var vmlElStyle = vmlEl.style;\n    var hasRotation = false;\n    var m;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    if (this.transform) {\n      m = this.transform;\n      scaleX = sqrt(m[0] * m[0] + m[1] * m[1]);\n      scaleY = sqrt(m[2] * m[2] + m[3] * m[3]);\n      hasRotation = m[1] || m[2];\n    }\n\n    if (hasRotation) {\n      // If filters are necessary (rotation exists), create them\n      // filters are bog-slow, so only create them if abbsolutely necessary\n      // The following check doesn't account for skews (which don't exist\n      // in the canvas spec (yet) anyway.\n      // From excanvas\n      var p0 = [x, y];\n      var p1 = [x + dw, y];\n      var p2 = [x, y + dh];\n      var p3 = [x + dw, y + dh];\n      applyTransform(p0, p0, m);\n      applyTransform(p1, p1, m);\n      applyTransform(p2, p2, m);\n      applyTransform(p3, p3, m);\n      var maxX = mathMax(p0[0], p1[0], p2[0], p3[0]);\n      var maxY = mathMax(p0[1], p1[1], p2[1], p3[1]);\n      var transformFilter = [];\n      transformFilter.push('M11=', m[0] / scaleX, comma, 'M12=', m[2] / scaleY, comma, 'M21=', m[1] / scaleX, comma, 'M22=', m[3] / scaleY, comma, 'Dx=', round(x * scaleX + m[4]), comma, 'Dy=', round(y * scaleY + m[5]));\n      vmlElStyle.padding = '0 ' + round(maxX) + 'px ' + round(maxY) + 'px 0'; // FIXME DXImageTransform 在 IE11 的兼容模式下不起作用\n\n      vmlElStyle.filter = imageTransformPrefix + '.Matrix(' + transformFilter.join('') + ', SizingMethod=clip)';\n    } else {\n      if (m) {\n        x = x * scaleX + m[4];\n        y = y * scaleY + m[5];\n      }\n\n      vmlElStyle.filter = '';\n      vmlElStyle.left = round(x) + 'px';\n      vmlElStyle.top = round(y) + 'px';\n    }\n\n    var imageEl = this._imageEl;\n    var cropEl = this._cropEl;\n\n    if (!imageEl) {\n      imageEl = vmlCore.doc.createElement('div');\n      this._imageEl = imageEl;\n    }\n\n    var imageELStyle = imageEl.style;\n\n    if (hasCrop) {\n      // Needs know image original width and height\n      if (!(ow && oh)) {\n        var tmpImage = new Image();\n        var self = this;\n\n        tmpImage.onload = function () {\n          tmpImage.onload = null;\n          ow = tmpImage.width;\n          oh = tmpImage.height; // Adjust image width and height to fit the ratio destinationSize / sourceSize\n\n          imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n          imageELStyle.height = round(scaleY * oh * dh / sh) + 'px'; // Caching image original width, height and src\n\n          self._imageWidth = ow;\n          self._imageHeight = oh;\n          self._imageSrc = image;\n        };\n\n        tmpImage.src = image;\n      } else {\n        imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n        imageELStyle.height = round(scaleY * oh * dh / sh) + 'px';\n      }\n\n      if (!cropEl) {\n        cropEl = vmlCore.doc.createElement('div');\n        cropEl.style.overflow = 'hidden';\n        this._cropEl = cropEl;\n      }\n\n      var cropElStyle = cropEl.style;\n      cropElStyle.width = round((dw + sx * dw / sw) * scaleX);\n      cropElStyle.height = round((dh + sy * dh / sh) * scaleY);\n      cropElStyle.filter = imageTransformPrefix + '.Matrix(Dx=' + -sx * dw / sw * scaleX + ',Dy=' + -sy * dh / sh * scaleY + ')';\n\n      if (!cropEl.parentNode) {\n        vmlEl.appendChild(cropEl);\n      }\n\n      if (imageEl.parentNode !== cropEl) {\n        cropEl.appendChild(imageEl);\n      }\n    } else {\n      imageELStyle.width = round(scaleX * dw) + 'px';\n      imageELStyle.height = round(scaleY * dh) + 'px';\n      vmlEl.appendChild(imageEl);\n\n      if (cropEl && cropEl.parentNode) {\n        vmlEl.removeChild(cropEl);\n        this._cropEl = null;\n      }\n    }\n\n    var filterStr = '';\n    var alpha = style.opacity;\n\n    if (alpha < 1) {\n      filterStr += '.Alpha(opacity=' + round(alpha * 100) + ') ';\n    }\n\n    filterStr += imageTransformPrefix + '.AlphaImageLoader(src=' + image + ', SizingMethod=scale)';\n    imageELStyle.filter = filterStr;\n    vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2); // Append to root\n\n    append(vmlRoot, vmlEl); // Text\n\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, this.getBoundingRect());\n    }\n  };\n\n  ZImage.prototype.onRemove = function (vmlRoot) {\n    remove(vmlRoot, this._vmlEl);\n    this._vmlEl = null;\n    this._cropEl = null;\n    this._imageEl = null;\n    this.removeRectText(vmlRoot);\n  };\n\n  ZImage.prototype.onAdd = function (vmlRoot) {\n    append(vmlRoot, this._vmlEl);\n    this.appendRectText(vmlRoot);\n  };\n  /***************************************************\n   * TEXT\n   **************************************************/\n\n\n  var DEFAULT_STYLE_NORMAL = 'normal';\n  var fontStyleCache = {};\n  var fontStyleCacheCount = 0;\n  var MAX_FONT_CACHE_SIZE = 100;\n  var fontEl = document.createElement('div');\n\n  var getFontStyle = function (fontString) {\n    var fontStyle = fontStyleCache[fontString];\n\n    if (!fontStyle) {\n      // Clear cache\n      if (fontStyleCacheCount > MAX_FONT_CACHE_SIZE) {\n        fontStyleCacheCount = 0;\n        fontStyleCache = {};\n      }\n\n      var style = fontEl.style;\n      var fontFamily;\n\n      try {\n        style.font = fontString;\n        fontFamily = style.fontFamily.split(',')[0];\n      } catch (e) {}\n\n      fontStyle = {\n        style: style.fontStyle || DEFAULT_STYLE_NORMAL,\n        variant: style.fontVariant || DEFAULT_STYLE_NORMAL,\n        weight: style.fontWeight || DEFAULT_STYLE_NORMAL,\n        size: parseFloat(style.fontSize || 12) | 0,\n        family: fontFamily || 'Microsoft YaHei'\n      };\n      fontStyleCache[fontString] = fontStyle;\n      fontStyleCacheCount++;\n    }\n\n    return fontStyle;\n  };\n\n  var textMeasureEl; // Overwrite measure text method\n\n  textContain.$override('measureText', function (text, textFont) {\n    var doc = vmlCore.doc;\n\n    if (!textMeasureEl) {\n      textMeasureEl = doc.createElement('div');\n      textMeasureEl.style.cssText = 'position:absolute;top:-20000px;left:0;' + 'padding:0;margin:0;border:none;white-space:pre;';\n      vmlCore.doc.body.appendChild(textMeasureEl);\n    }\n\n    try {\n      textMeasureEl.style.font = textFont;\n    } catch (ex) {// Ignore failures to set to invalid font.\n    }\n\n    textMeasureEl.innerHTML = ''; // Don't use innerHTML or innerText because they allow markup/whitespace.\n\n    textMeasureEl.appendChild(doc.createTextNode(text));\n    return {\n      width: textMeasureEl.offsetWidth\n    };\n  });\n  var tmpRect = new BoundingRect();\n\n  var drawRectText = function (vmlRoot, rect, textRect, fromTextEl) {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n    var text = style.text; // Convert to string\n\n    text != null && (text += '');\n\n    if (!text) {\n      return;\n    } // Convert rich text to plain text. Rich text is not supported in\n    // IE8-, but tags in rich text template will be removed.\n\n\n    if (style.rich) {\n      var contentBlock = textContain.parseRichText(text, style);\n      text = [];\n\n      for (var i = 0; i < contentBlock.lines.length; i++) {\n        var tokens = contentBlock.lines[i].tokens;\n        var textLine = [];\n\n        for (var j = 0; j < tokens.length; j++) {\n          textLine.push(tokens[j].text);\n        }\n\n        text.push(textLine.join(''));\n      }\n\n      text = text.join('\\n');\n    }\n\n    var x;\n    var y;\n    var align = style.textAlign;\n    var verticalAlign = style.textVerticalAlign;\n    var fontStyle = getFontStyle(style.font); // FIXME encodeHtmlAttribute ?\n\n    var font = fontStyle.style + ' ' + fontStyle.variant + ' ' + fontStyle.weight + ' ' + fontStyle.size + 'px \"' + fontStyle.family + '\"';\n    textRect = textRect || textContain.getBoundingRect(text, font, align, verticalAlign, style.textPadding, style.textLineHeight); // Transform rect to view space\n\n    var m = this.transform; // Ignore transform for text in other element\n\n    if (m && !fromTextEl) {\n      tmpRect.copy(rect);\n      tmpRect.applyTransform(m);\n      rect = tmpRect;\n    }\n\n    if (!fromTextEl) {\n      var textPosition = style.textPosition; // Text position represented by coord\n\n      if (textPosition instanceof Array) {\n        x = rect.x + parsePercent(textPosition[0], rect.width);\n        y = rect.y + parsePercent(textPosition[1], rect.height);\n        align = align || 'left';\n      } else {\n        var res = this.calculateTextPosition ? this.calculateTextPosition({}, style, rect) : textContain.calculateTextPosition({}, style, rect);\n        x = res.x;\n        y = res.y; // Default align and baseline when has textPosition\n\n        align = align || res.textAlign;\n        verticalAlign = verticalAlign || res.textVerticalAlign;\n      }\n    } else {\n      x = rect.x;\n      y = rect.y;\n    }\n\n    x = textContain.adjustTextX(x, textRect.width, align);\n    y = textContain.adjustTextY(y, textRect.height, verticalAlign); // Force baseline 'middle'\n\n    y += textRect.height / 2; // var fontSize = fontStyle.size;\n    // 1.75 is an arbitrary number, as there is no info about the text baseline\n    // switch (baseline) {\n    // case 'hanging':\n    // case 'top':\n    //     y += fontSize / 1.75;\n    //     break;\n    //     case 'middle':\n    //         break;\n    //     default:\n    //     // case null:\n    //     // case 'alphabetic':\n    //     // case 'ideographic':\n    //     // case 'bottom':\n    //         y -= fontSize / 2.25;\n    //         break;\n    // }\n    // switch (align) {\n    //     case 'left':\n    //         break;\n    //     case 'center':\n    //         x -= textRect.width / 2;\n    //         break;\n    //     case 'right':\n    //         x -= textRect.width;\n    //         break;\n    // case 'end':\n    // align = elementStyle.direction == 'ltr' ? 'right' : 'left';\n    // break;\n    // case 'start':\n    // align = elementStyle.direction == 'rtl' ? 'right' : 'left';\n    // break;\n    // default:\n    //     align = 'left';\n    // }\n\n    var createNode = vmlCore.createNode;\n    var textVmlEl = this._textVmlEl;\n    var pathEl;\n    var textPathEl;\n    var skewEl;\n\n    if (!textVmlEl) {\n      textVmlEl = createNode('line');\n      pathEl = createNode('path');\n      textPathEl = createNode('textpath');\n      skewEl = createNode('skew'); // FIXME Why here is not cammel case\n      // Align 'center' seems wrong\n\n      textPathEl.style['v-text-align'] = 'left';\n      initRootElStyle(textVmlEl);\n      pathEl.textpathok = true;\n      textPathEl.on = true;\n      textVmlEl.from = '0 0';\n      textVmlEl.to = '1000 0.05';\n      append(textVmlEl, skewEl);\n      append(textVmlEl, pathEl);\n      append(textVmlEl, textPathEl);\n      this._textVmlEl = textVmlEl;\n    } else {\n      // 这里是在前面 appendChild 保证顺序的前提下\n      skewEl = textVmlEl.firstChild;\n      pathEl = skewEl.nextSibling;\n      textPathEl = pathEl.nextSibling;\n    }\n\n    var coords = [x, y];\n    var textVmlElStyle = textVmlEl.style; // Ignore transform for text in other element\n\n    if (m && fromTextEl) {\n      applyTransform(coords, coords, m);\n      skewEl.on = true;\n      skewEl.matrix = m[0].toFixed(3) + comma + m[2].toFixed(3) + comma + m[1].toFixed(3) + comma + m[3].toFixed(3) + ',0,0'; // Text position\n\n      skewEl.offset = (round(coords[0]) || 0) + ',' + (round(coords[1]) || 0); // Left top point as origin\n\n      skewEl.origin = '0 0';\n      textVmlElStyle.left = '0px';\n      textVmlElStyle.top = '0px';\n    } else {\n      skewEl.on = false;\n      textVmlElStyle.left = round(x) + 'px';\n      textVmlElStyle.top = round(y) + 'px';\n    }\n\n    textPathEl.string = encodeHtmlAttribute(text); // TODO\n\n    try {\n      textPathEl.style.font = font;\n    } // Error font format\n    catch (e) {}\n\n    updateFillAndStroke(textVmlEl, 'fill', {\n      fill: style.textFill,\n      opacity: style.opacity\n    }, this);\n    updateFillAndStroke(textVmlEl, 'stroke', {\n      stroke: style.textStroke,\n      opacity: style.opacity,\n      lineDash: style.lineDash || null // style.lineDash can be `false`.\n\n    }, this);\n    textVmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2); // Attached to root\n\n    append(vmlRoot, textVmlEl);\n  };\n\n  var removeRectText = function (vmlRoot) {\n    remove(vmlRoot, this._textVmlEl);\n    this._textVmlEl = null;\n  };\n\n  var appendRectText = function (vmlRoot) {\n    append(vmlRoot, this._textVmlEl);\n  };\n\n  var list = [RectText, Displayable, ZImage, Path, Text]; // In case Displayable has been mixed in RectText\n\n  for (var i = 0; i < list.length; i++) {\n    var proto = list[i].prototype;\n    proto.drawRectText = drawRectText;\n    proto.removeRectText = removeRectText;\n    proto.appendRectText = appendRectText;\n  }\n\n  Text.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, {\n        x: style.x || 0,\n        y: style.y || 0,\n        width: 0,\n        height: 0\n      }, this.getBoundingRect(), true);\n    } else {\n      this.removeRectText(vmlRoot);\n    }\n  };\n\n  Text.prototype.onRemove = function (vmlRoot) {\n    this.removeRectText(vmlRoot);\n  };\n\n  Text.prototype.onAdd = function (vmlRoot) {\n    this.appendRectText(vmlRoot);\n  };\n}","var Path = require(\"../Path\");\n\nvar vec2 = require(\"../../core/vector\");\n\nvar _curve = require(\"../../core/curve\");\n\nvar quadraticSubdivide = _curve.quadraticSubdivide;\nvar cubicSubdivide = _curve.cubicSubdivide;\nvar quadraticAt = _curve.quadraticAt;\nvar cubicAt = _curve.cubicAt;\nvar quadraticDerivativeAt = _curve.quadraticDerivativeAt;\nvar cubicDerivativeAt = _curve.cubicDerivativeAt;\n\n/**\n * 贝塞尔曲线\n * @module zrender/shape/BezierCurve\n */\nvar out = [];\n\nfunction someVectorAt(shape, t, isTangent) {\n  var cpx2 = shape.cpx2;\n  var cpy2 = shape.cpy2;\n\n  if (cpx2 === null || cpy2 === null) {\n    return [(isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t), (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)];\n  } else {\n    return [(isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t), (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)];\n  }\n}\n\nvar _default = Path.extend({\n  type: 'bezier-curve',\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    // cpx2: 0,\n    // cpy2: 0\n    // Curve show percent, for animating\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x1 = shape.x1;\n    var y1 = shape.y1;\n    var x2 = shape.x2;\n    var y2 = shape.y2;\n    var cpx1 = shape.cpx1;\n    var cpy1 = shape.cpy1;\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (cpx2 == null || cpy2 == null) {\n      if (percent < 1) {\n        quadraticSubdivide(x1, cpx1, x2, percent, out);\n        cpx1 = out[1];\n        x2 = out[2];\n        quadraticSubdivide(y1, cpy1, y2, percent, out);\n        cpy1 = out[1];\n        y2 = out[2];\n      }\n\n      ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n    } else {\n      if (percent < 1) {\n        cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n        cpx1 = out[1];\n        cpx2 = out[2];\n        x2 = out[3];\n        cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n        cpy1 = out[1];\n        cpy2 = out[2];\n        y2 = out[3];\n      }\n\n      ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n    }\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  pointAt: function (t) {\n    return someVectorAt(this.shape, t, false);\n  },\n\n  /**\n   * Get tangent at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  tangentAt: function (t) {\n    var p = someVectorAt(this.shape, t, true);\n    return vec2.normalize(p, p);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * 椭圆形状\n * @module zrender/graphic/shape/Ellipse\n */\nvar _default = Path.extend({\n  type: 'ellipse',\n  shape: {\n    cx: 0,\n    cy: 0,\n    rx: 0,\n    ry: 0\n  },\n  buildPath: function (ctx, shape) {\n    var k = 0.5522848;\n    var x = shape.cx;\n    var y = shape.cy;\n    var a = shape.rx;\n    var b = shape.ry;\n    var ox = a * k; // 水平控制点偏移量\n\n    var oy = b * k; // 垂直控制点偏移量\n    // 从椭圆的左端点开始顺时针绘制四条三次贝塞尔曲线\n\n    ctx.moveTo(x - a, y);\n    ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n    ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n    ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n    ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","var util = require(\"./core/util\");\n\nvar env = require(\"./core/env\");\n\nvar Group = require(\"./container/Group\");\n\nvar timsort = require(\"./core/timsort\");\n\n// Use timsort because in most case elements are partially sorted\n// https://jsfiddle.net/pissang/jr4x7mdm/8/\nfunction shapeCompareFunc(a, b) {\n  if (a.zlevel === b.zlevel) {\n    if (a.z === b.z) {\n      // if (a.z2 === b.z2) {\n      //     // FIXME Slow has renderidx compare\n      //     // http://stackoverflow.com/questions/20883421/sorting-in-javascript-should-every-compare-function-have-a-return-0-statement\n      //     // https://github.com/v8/v8/blob/47cce544a31ed5577ffe2963f67acb4144ee0232/src/js/array.js#L1012\n      //     return a.__renderidx - b.__renderidx;\n      // }\n      return a.z2 - b.z2;\n    }\n\n    return a.z - b.z;\n  }\n\n  return a.zlevel - b.zlevel;\n}\n/**\n * 内容仓库 (M)\n * @alias module:zrender/Storage\n * @constructor\n */\n\n\nvar Storage = function () {\n  // jshint ignore:line\n  this._roots = [];\n  this._displayList = [];\n  this._displayListLen = 0;\n};\n\nStorage.prototype = {\n  constructor: Storage,\n\n  /**\n   * @param  {Function} cb\n   *\n   */\n  traverse: function (cb, context) {\n    for (var i = 0; i < this._roots.length; i++) {\n      this._roots[i].traverse(cb, context);\n    }\n  },\n\n  /**\n   * 返回所有图形的绘制队列\n   * @param {boolean} [update=false] 是否在返回前更新该数组\n   * @param {boolean} [includeIgnore=false] 是否包含 ignore 的数组, 在 update 为 true 的时候有效\n   *\n   * 详见{@link module:zrender/graphic/Displayable.prototype.updateDisplayList}\n   * @return {Array.<module:zrender/graphic/Displayable>}\n   */\n  getDisplayList: function (update, includeIgnore) {\n    includeIgnore = includeIgnore || false;\n\n    if (update) {\n      this.updateDisplayList(includeIgnore);\n    }\n\n    return this._displayList;\n  },\n\n  /**\n   * 更新图形的绘制队列。\n   * 每次绘制前都会调用，该方法会先深度优先遍历整个树，更新所有Group和Shape的变换并且把所有可见的Shape保存到数组中，\n   * 最后根据绘制的优先级（zlevel > z > 插入顺序）排序得到绘制队列\n   * @param {boolean} [includeIgnore=false] 是否包含 ignore 的数组\n   */\n  updateDisplayList: function (includeIgnore) {\n    this._displayListLen = 0;\n    var roots = this._roots;\n    var displayList = this._displayList;\n\n    for (var i = 0, len = roots.length; i < len; i++) {\n      this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n    }\n\n    displayList.length = this._displayListLen;\n    env.canvasSupported && timsort(displayList, shapeCompareFunc);\n  },\n  _updateAndAddDisplayable: function (el, clipPaths, includeIgnore) {\n    if (el.ignore && !includeIgnore) {\n      return;\n    }\n\n    el.beforeUpdate();\n\n    if (el.__dirty) {\n      el.update();\n    }\n\n    el.afterUpdate();\n    var userSetClipPath = el.clipPath;\n\n    if (userSetClipPath) {\n      // FIXME 效率影响\n      if (clipPaths) {\n        clipPaths = clipPaths.slice();\n      } else {\n        clipPaths = [];\n      }\n\n      var currentClipPath = userSetClipPath;\n      var parentClipPath = el; // Recursively add clip path\n\n      while (currentClipPath) {\n        // clipPath 的变换是基于使用这个 clipPath 的元素\n        currentClipPath.parent = parentClipPath;\n        currentClipPath.updateTransform();\n        clipPaths.push(currentClipPath);\n        parentClipPath = currentClipPath;\n        currentClipPath = currentClipPath.clipPath;\n      }\n    }\n\n    if (el.isGroup) {\n      var children = el._children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i]; // Force to mark as dirty if group is dirty\n        // FIXME __dirtyPath ?\n\n        if (el.__dirty) {\n          child.__dirty = true;\n        }\n\n        this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n      } // Mark group clean here\n\n\n      el.__dirty = false;\n    } else {\n      el.__clipPaths = clipPaths;\n      this._displayList[this._displayListLen++] = el;\n    }\n  },\n\n  /**\n   * 添加图形(Shape)或者组(Group)到根节点\n   * @param {module:zrender/Element} el\n   */\n  addRoot: function (el) {\n    if (el.__storage === this) {\n      return;\n    }\n\n    if (el instanceof Group) {\n      el.addChildrenToStorage(this);\n    }\n\n    this.addToStorage(el);\n\n    this._roots.push(el);\n  },\n\n  /**\n   * 删除指定的图形(Shape)或者组(Group)\n   * @param {string|Array.<string>} [el] 如果为空清空整个Storage\n   */\n  delRoot: function (el) {\n    if (el == null) {\n      // 不指定el清空\n      for (var i = 0; i < this._roots.length; i++) {\n        var root = this._roots[i];\n\n        if (root instanceof Group) {\n          root.delChildrenFromStorage(this);\n        }\n      }\n\n      this._roots = [];\n      this._displayList = [];\n      this._displayListLen = 0;\n      return;\n    }\n\n    if (el instanceof Array) {\n      for (var i = 0, l = el.length; i < l; i++) {\n        this.delRoot(el[i]);\n      }\n\n      return;\n    }\n\n    var idx = util.indexOf(this._roots, el);\n\n    if (idx >= 0) {\n      this.delFromStorage(el);\n\n      this._roots.splice(idx, 1);\n\n      if (el instanceof Group) {\n        el.delChildrenFromStorage(this);\n      }\n    }\n  },\n  addToStorage: function (el) {\n    if (el) {\n      el.__storage = this;\n      el.dirty(false);\n    }\n\n    return this;\n  },\n  delFromStorage: function (el) {\n    if (el) {\n      el.__storage = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * 清空并且释放Storage\n   */\n  dispose: function () {\n    this._renderList = this._roots = null;\n  },\n  displayableSortFunc: shapeCompareFunc\n};\nvar _default = Storage;\nmodule.exports = _default;","var Definable = require(\"./Definable\");\n\nvar zrUtil = require(\"../../core/util\");\n\nvar logError = require(\"../../core/log\");\n\nvar colorTool = require(\"../../tool/color\");\n\n/**\n * @file Manages SVG gradient elements.\n * @author Zhang Wenli\n */\n\n/**\n * Manages SVG gradient elements.\n *\n * @class\n * @extends Definable\n * @param   {number}     zrId    zrender instance id\n * @param   {SVGElement} svgRoot root of SVG document\n */\nfunction GradientManager(zrId, svgRoot) {\n  Definable.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__');\n}\n\nzrUtil.inherits(GradientManager, Definable);\n/**\n * Create new gradient DOM for fill or stroke if not exist,\n * but will not update gradient if exists.\n *\n * @param {SvgElement}  svgElement   SVG element to paint\n * @param {Displayable} displayable  zrender displayable element\n */\n\nGradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n  if (displayable && displayable.style) {\n    var that = this;\n    zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n      if (displayable.style[fillOrStroke] && (displayable.style[fillOrStroke].type === 'linear' || displayable.style[fillOrStroke].type === 'radial')) {\n        var gradient = displayable.style[fillOrStroke];\n        var defs = that.getDefs(true); // Create dom in <defs> if not exists\n\n        var dom;\n\n        if (gradient._dom) {\n          // Gradient exists\n          dom = gradient._dom;\n\n          if (!defs.contains(gradient._dom)) {\n            // _dom is no longer in defs, recreate\n            that.addDom(dom);\n          }\n        } else {\n          // New dom\n          dom = that.add(gradient);\n        }\n\n        that.markUsed(displayable);\n        var id = dom.getAttribute('id');\n        svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n      }\n    });\n  }\n};\n/**\n * Add a new gradient tag in <defs>\n *\n * @param   {Gradient} gradient zr gradient instance\n * @return {SVGLinearGradientElement | SVGRadialGradientElement}\n *                            created DOM\n */\n\n\nGradientManager.prototype.add = function (gradient) {\n  var dom;\n\n  if (gradient.type === 'linear') {\n    dom = this.createElement('linearGradient');\n  } else if (gradient.type === 'radial') {\n    dom = this.createElement('radialGradient');\n  } else {\n    logError('Illegal gradient type.');\n    return null;\n  } // Set dom id with gradient id, since each gradient instance\n  // will have no more than one dom element.\n  // id may exists before for those dirty elements, in which case\n  // id should remain the same, and other attributes should be\n  // updated.\n\n\n  gradient.id = gradient.id || this.nextId++;\n  dom.setAttribute('id', 'zr' + this._zrId + '-gradient-' + gradient.id);\n  this.updateDom(gradient, dom);\n  this.addDom(dom);\n  return dom;\n};\n/**\n * Update gradient.\n *\n * @param {Gradient} gradient zr gradient instance\n */\n\n\nGradientManager.prototype.update = function (gradient) {\n  var that = this;\n  Definable.prototype.update.call(this, gradient, function () {\n    var type = gradient.type;\n    var tagName = gradient._dom.tagName;\n\n    if (type === 'linear' && tagName === 'linearGradient' || type === 'radial' && tagName === 'radialGradient') {\n      // Gradient type is not changed, update gradient\n      that.updateDom(gradient, gradient._dom);\n    } else {\n      // Remove and re-create if type is changed\n      that.removeDom(gradient);\n      that.add(gradient);\n    }\n  });\n};\n/**\n * Update gradient dom\n *\n * @param {Gradient} gradient zr gradient instance\n * @param {SVGLinearGradientElement | SVGRadialGradientElement} dom\n *                            DOM to update\n */\n\n\nGradientManager.prototype.updateDom = function (gradient, dom) {\n  if (gradient.type === 'linear') {\n    dom.setAttribute('x1', gradient.x);\n    dom.setAttribute('y1', gradient.y);\n    dom.setAttribute('x2', gradient.x2);\n    dom.setAttribute('y2', gradient.y2);\n  } else if (gradient.type === 'radial') {\n    dom.setAttribute('cx', gradient.x);\n    dom.setAttribute('cy', gradient.y);\n    dom.setAttribute('r', gradient.r);\n  } else {\n    logError('Illegal gradient type.');\n    return;\n  }\n\n  if (gradient.global) {\n    // x1, x2, y1, y2 in range of 0 to canvas width or height\n    dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n  } else {\n    // x1, x2, y1, y2 in range of 0 to 1\n    dom.setAttribute('gradientUnits', 'objectBoundingBox');\n  } // Remove color stops if exists\n\n\n  dom.innerHTML = ''; // Add color stops\n\n  var colors = gradient.colorStops;\n\n  for (var i = 0, len = colors.length; i < len; ++i) {\n    var stop = this.createElement('stop');\n    stop.setAttribute('offset', colors[i].offset * 100 + '%');\n    var color = colors[i].color;\n\n    if (color.indexOf('rgba') > -1) {\n      // Fix Safari bug that stop-color not recognizing alpha #9014\n      var opacity = colorTool.parse(color)[3];\n      var hex = colorTool.toHex(color); // stop-color cannot be color, since:\n      // The opacity value used for the gradient calculation is the\n      // *product* of the value of stop-opacity and the opacity of the\n      // value of stop-color.\n      // See https://www.w3.org/TR/SVG2/pservers.html#StopOpacityProperty\n\n      stop.setAttribute('stop-color', '#' + hex);\n      stop.setAttribute('stop-opacity', opacity);\n    } else {\n      stop.setAttribute('stop-color', colors[i].color);\n    }\n\n    dom.appendChild(stop);\n  } // Store dom element in gradient, to avoid creating multiple\n  // dom instances for the same gradient element\n\n\n  gradient._dom = dom;\n};\n/**\n * Mark a single gradient to be used\n *\n * @param {Displayable} displayable displayable element\n */\n\n\nGradientManager.prototype.markUsed = function (displayable) {\n  if (displayable.style) {\n    var gradient = displayable.style.fill;\n\n    if (gradient && gradient._dom) {\n      Definable.prototype.markUsed.call(this, gradient._dom);\n    }\n\n    gradient = displayable.style.stroke;\n\n    if (gradient && gradient._dom) {\n      Definable.prototype.markUsed.call(this, gradient._dom);\n    }\n  }\n};\n\nvar _default = GradientManager;\nmodule.exports = _default;","var Definable = require(\"./Definable\");\n\nvar zrUtil = require(\"../../core/util\");\n\n/**\n * @file Manages SVG shadow elements.\n * @author Zhang Wenli\n */\n\n/**\n * Manages SVG shadow elements.\n *\n * @class\n * @extends Definable\n * @param   {number}     zrId    zrender instance id\n * @param   {SVGElement} svgRoot root of SVG document\n */\nfunction ShadowManager(zrId, svgRoot) {\n  Definable.call(this, zrId, svgRoot, ['filter'], '__filter_in_use__', '_shadowDom');\n}\n\nzrUtil.inherits(ShadowManager, Definable);\n/**\n * Create new shadow DOM for fill or stroke if not exist,\n * but will not update shadow if exists.\n *\n * @param {SvgElement}  svgElement   SVG element to paint\n * @param {Displayable} displayable  zrender displayable element\n */\n\nShadowManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n  if (displayable && hasShadow(displayable.style)) {\n    // Create dom in <defs> if not exists\n    var dom;\n\n    if (displayable._shadowDom) {\n      // Gradient exists\n      dom = displayable._shadowDom;\n      var defs = this.getDefs(true);\n\n      if (!defs.contains(displayable._shadowDom)) {\n        // _shadowDom is no longer in defs, recreate\n        this.addDom(dom);\n      }\n    } else {\n      // New dom\n      dom = this.add(displayable);\n    }\n\n    this.markUsed(displayable);\n    var id = dom.getAttribute('id');\n    svgElement.style.filter = 'url(#' + id + ')';\n  }\n};\n/**\n * Add a new shadow tag in <defs>\n *\n * @param {Displayable} displayable  zrender displayable element\n * @return {SVGFilterElement} created DOM\n */\n\n\nShadowManager.prototype.add = function (displayable) {\n  var dom = this.createElement('filter'); // Set dom id with shadow id, since each shadow instance\n  // will have no more than one dom element.\n  // id may exists before for those dirty elements, in which case\n  // id should remain the same, and other attributes should be\n  // updated.\n\n  displayable._shadowDomId = displayable._shadowDomId || this.nextId++;\n  dom.setAttribute('id', 'zr' + this._zrId + '-shadow-' + displayable._shadowDomId);\n  this.updateDom(displayable, dom);\n  this.addDom(dom);\n  return dom;\n};\n/**\n * Update shadow.\n *\n * @param {Displayable} displayable  zrender displayable element\n */\n\n\nShadowManager.prototype.update = function (svgElement, displayable) {\n  var style = displayable.style;\n\n  if (hasShadow(style)) {\n    var that = this;\n    Definable.prototype.update.call(this, displayable, function () {\n      that.updateDom(displayable, displayable._shadowDom);\n    });\n  } else {\n    // Remove shadow\n    this.remove(svgElement, displayable);\n  }\n};\n/**\n * Remove DOM and clear parent filter\n */\n\n\nShadowManager.prototype.remove = function (svgElement, displayable) {\n  if (displayable._shadowDomId != null) {\n    this.removeDom(svgElement);\n    svgElement.style.filter = '';\n  }\n};\n/**\n * Update shadow dom\n *\n * @param {Displayable} displayable  zrender displayable element\n * @param {SVGFilterElement} dom DOM to update\n */\n\n\nShadowManager.prototype.updateDom = function (displayable, dom) {\n  var domChild = dom.getElementsByTagName('feDropShadow');\n\n  if (domChild.length === 0) {\n    domChild = this.createElement('feDropShadow');\n  } else {\n    domChild = domChild[0];\n  }\n\n  var style = displayable.style;\n  var scaleX = displayable.scale ? displayable.scale[0] || 1 : 1;\n  var scaleY = displayable.scale ? displayable.scale[1] || 1 : 1; // TODO: textBoxShadowBlur is not supported yet\n\n  var offsetX;\n  var offsetY;\n  var blur;\n  var color;\n\n  if (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY) {\n    offsetX = style.shadowOffsetX || 0;\n    offsetY = style.shadowOffsetY || 0;\n    blur = style.shadowBlur;\n    color = style.shadowColor;\n  } else if (style.textShadowBlur) {\n    offsetX = style.textShadowOffsetX || 0;\n    offsetY = style.textShadowOffsetY || 0;\n    blur = style.textShadowBlur;\n    color = style.textShadowColor;\n  } else {\n    // Remove shadow\n    this.removeDom(dom, style);\n    return;\n  }\n\n  domChild.setAttribute('dx', offsetX / scaleX);\n  domChild.setAttribute('dy', offsetY / scaleY);\n  domChild.setAttribute('flood-color', color); // Divide by two here so that it looks the same as in canvas\n  // See: https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-shadowblur\n\n  var stdDx = blur / 2 / scaleX;\n  var stdDy = blur / 2 / scaleY;\n  var stdDeviation = stdDx + ' ' + stdDy;\n  domChild.setAttribute('stdDeviation', stdDeviation); // Fix filter clipping problem\n\n  dom.setAttribute('x', '-100%');\n  dom.setAttribute('y', '-100%');\n  dom.setAttribute('width', Math.ceil(blur / 2 * 200) + '%');\n  dom.setAttribute('height', Math.ceil(blur / 2 * 200) + '%');\n  dom.appendChild(domChild); // Store dom element in shadow, to avoid creating multiple\n  // dom instances for the same shadow element\n\n  displayable._shadowDom = dom;\n};\n/**\n * Mark a single shadow to be used\n *\n * @param {Displayable} displayable displayable element\n */\n\n\nShadowManager.prototype.markUsed = function (displayable) {\n  if (displayable._shadowDom) {\n    Definable.prototype.markUsed.call(this, displayable._shadowDom);\n  }\n};\n\nfunction hasShadow(style) {\n  // TODO: textBoxShadowBlur is not supported yet\n  return style && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY || style.textShadowBlur || style.textShadowOffsetX || style.textShadowOffsetY);\n}\n\nvar _default = ShadowManager;\nmodule.exports = _default;","var Animator = require(\"../animation/Animator\");\n\nvar logError = require(\"../core/log\");\n\nvar _util = require(\"../core/util\");\n\nvar isString = _util.isString;\nvar isFunction = _util.isFunction;\nvar isObject = _util.isObject;\nvar isArrayLike = _util.isArrayLike;\nvar indexOf = _util.indexOf;\n\n/**\n * @alias module:zrender/mixin/Animatable\n * @constructor\n */\nvar Animatable = function () {\n  /**\n   * @type {Array.<module:zrender/animation/Animator>}\n   * @readOnly\n   */\n  this.animators = [];\n};\n\nAnimatable.prototype = {\n  constructor: Animatable,\n\n  /**\n   * 动画\n   *\n   * @param {string} path The path to fetch value from object, like 'a.b.c'.\n   * @param {boolean} [loop] Whether to loop animation.\n   * @return {module:zrender/animation/Animator}\n   * @example:\n   *     el.animate('style', false)\n   *         .when(1000, {x: 10} )\n   *         .done(function(){ // Animation done })\n   *         .start()\n   */\n  animate: function (path, loop) {\n    var target;\n    var animatingShape = false;\n    var el = this;\n    var zr = this.__zr;\n\n    if (path) {\n      var pathSplitted = path.split('.');\n      var prop = el; // If animating shape\n\n      animatingShape = pathSplitted[0] === 'shape';\n\n      for (var i = 0, l = pathSplitted.length; i < l; i++) {\n        if (!prop) {\n          continue;\n        }\n\n        prop = prop[pathSplitted[i]];\n      }\n\n      if (prop) {\n        target = prop;\n      }\n    } else {\n      target = el;\n    }\n\n    if (!target) {\n      logError('Property \"' + path + '\" is not existed in element ' + el.id);\n      return;\n    }\n\n    var animators = el.animators;\n    var animator = new Animator(target, loop);\n    animator.during(function (target) {\n      el.dirty(animatingShape);\n    }).done(function () {\n      // FIXME Animator will not be removed if use `Animator#stop` to stop animation\n      animators.splice(indexOf(animators, animator), 1);\n    });\n    animators.push(animator); // If animate after added to the zrender\n\n    if (zr) {\n      zr.animation.addAnimator(animator);\n    }\n\n    return animator;\n  },\n\n  /**\n   * 停止动画\n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stopAnimation: function (forwardToLast) {\n    var animators = this.animators;\n    var len = animators.length;\n\n    for (var i = 0; i < len; i++) {\n      animators[i].stop(forwardToLast);\n    }\n\n    animators.length = 0;\n    return this;\n  },\n\n  /**\n   * Caution: this method will stop previous animation.\n   * So do not use this method to one element twice before\n   * animation starts, unless you know what you are doing.\n   * @param {Object} target\n   * @param {number} [time=500] Time in ms\n   * @param {string} [easing='linear']\n   * @param {number} [delay=0]\n   * @param {Function} [callback]\n   * @param {Function} [forceAnimate] Prevent stop animation and callback\n   *        immediently when target values are the same as current values.\n   *\n   * @example\n   *  // Animate position\n   *  el.animateTo({\n   *      position: [10, 10]\n   *  }, function () { // done })\n   *\n   *  // Animate shape, style and position in 100ms, delayed 100ms, with cubicOut easing\n   *  el.animateTo({\n   *      shape: {\n   *          width: 500\n   *      },\n   *      style: {\n   *          fill: 'red'\n   *      }\n   *      position: [10, 10]\n   *  }, 100, 100, 'cubicOut', function () { // done })\n   */\n  // TODO Return animation key\n  animateTo: function (target, time, delay, easing, callback, forceAnimate) {\n    animateTo(this, target, time, delay, easing, callback, forceAnimate);\n  },\n\n  /**\n   * Animate from the target state to current state.\n   * The params and the return value are the same as `this.animateTo`.\n   */\n  animateFrom: function (target, time, delay, easing, callback, forceAnimate) {\n    animateTo(this, target, time, delay, easing, callback, forceAnimate, true);\n  }\n};\n\nfunction animateTo(animatable, target, time, delay, easing, callback, forceAnimate, reverse) {\n  // animateTo(target, time, easing, callback);\n  if (isString(delay)) {\n    callback = easing;\n    easing = delay;\n    delay = 0;\n  } // animateTo(target, time, delay, callback);\n  else if (isFunction(easing)) {\n      callback = easing;\n      easing = 'linear';\n      delay = 0;\n    } // animateTo(target, time, callback);\n    else if (isFunction(delay)) {\n        callback = delay;\n        delay = 0;\n      } // animateTo(target, callback)\n      else if (isFunction(time)) {\n          callback = time;\n          time = 500;\n        } // animateTo(target)\n        else if (!time) {\n            time = 500;\n          } // Stop all previous animations\n\n\n  animatable.stopAnimation();\n  animateToShallow(animatable, '', animatable, target, time, delay, reverse); // Animators may be removed immediately after start\n  // if there is nothing to animate\n\n  var animators = animatable.animators.slice();\n  var count = animators.length;\n\n  function done() {\n    count--;\n\n    if (!count) {\n      callback && callback();\n    }\n  } // No animators. This should be checked before animators[i].start(),\n  // because 'done' may be executed immediately if no need to animate.\n\n\n  if (!count) {\n    callback && callback();\n  } // Start after all animators created\n  // Incase any animator is done immediately when all animation properties are not changed\n\n\n  for (var i = 0; i < animators.length; i++) {\n    animators[i].done(done).start(easing, forceAnimate);\n  }\n}\n/**\n * @param {string} path=''\n * @param {Object} source=animatable\n * @param {Object} target\n * @param {number} [time=500]\n * @param {number} [delay=0]\n * @param {boolean} [reverse] If `true`, animate\n *        from the `target` to current state.\n *\n * @example\n *  // Animate position\n *  el._animateToShallow({\n *      position: [10, 10]\n *  })\n *\n *  // Animate shape, style and position in 100ms, delayed 100ms\n *  el._animateToShallow({\n *      shape: {\n *          width: 500\n *      },\n *      style: {\n *          fill: 'red'\n *      }\n *      position: [10, 10]\n *  }, 100, 100)\n */\n\n\nfunction animateToShallow(animatable, path, source, target, time, delay, reverse) {\n  var objShallow = {};\n  var propertyCount = 0;\n\n  for (var name in target) {\n    if (!target.hasOwnProperty(name)) {\n      continue;\n    }\n\n    if (source[name] != null) {\n      if (isObject(target[name]) && !isArrayLike(target[name])) {\n        animateToShallow(animatable, path ? path + '.' + name : name, source[name], target[name], time, delay, reverse);\n      } else {\n        if (reverse) {\n          objShallow[name] = source[name];\n          setAttrByPath(animatable, path, name, target[name]);\n        } else {\n          objShallow[name] = target[name];\n        }\n\n        propertyCount++;\n      }\n    } else if (target[name] != null && !reverse) {\n      setAttrByPath(animatable, path, name, target[name]);\n    }\n  }\n\n  if (propertyCount > 0) {\n    animatable.animate(path, false).when(time == null ? 500 : time, objShallow).delay(delay || 0);\n  }\n}\n\nfunction setAttrByPath(el, path, name, value) {\n  // Attr directly if not has property\n  // FIXME, if some property not needed for element ?\n  if (!path) {\n    el.attr(name, value);\n  } else {\n    // Only support set shape or style\n    var props = {};\n    props[path] = {};\n    props[path][name] = value;\n    el.attr(props);\n  }\n}\n\nvar _default = Animatable;\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar roundRectHelper = require(\"../helper/roundRect\");\n\nvar _subPixelOptimize = require(\"../helper/subPixelOptimize\");\n\nvar subPixelOptimizeRect = _subPixelOptimize.subPixelOptimizeRect;\n\n/**\n * 矩形\n * @module zrender/graphic/shape/Rect\n */\n// Avoid create repeatly.\nvar subPixelOptimizeOutputShape = {};\n\nvar _default = Path.extend({\n  type: 'rect',\n  shape: {\n    // 左上、右上、右下、左下角的半径依次为r1、r2、r3、r4\n    // r缩写为1         相当于 [1, 1, 1, 1]\n    // r缩写为[1]       相当于 [1, 1, 1, 1]\n    // r缩写为[1, 2]    相当于 [1, 2, 1, 2]\n    // r缩写为[1, 2, 3] 相当于 [1, 2, 3, 2]\n    r: 0,\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (this.subPixelOptimize) {\n      subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n      x = subPixelOptimizeOutputShape.x;\n      y = subPixelOptimizeOutputShape.y;\n      width = subPixelOptimizeOutputShape.width;\n      height = subPixelOptimizeOutputShape.height;\n      subPixelOptimizeOutputShape.r = shape.r;\n      shape = subPixelOptimizeOutputShape;\n    } else {\n      x = shape.x;\n      y = shape.y;\n      width = shape.width;\n      height = shape.height;\n    }\n\n    if (!shape.r) {\n      ctx.rect(x, y, width, height);\n    } else {\n      roundRectHelper.buildPath(ctx, shape);\n    }\n\n    ctx.closePath();\n    return;\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar _subPixelOptimize = require(\"../helper/subPixelOptimize\");\n\nvar subPixelOptimizeLine = _subPixelOptimize.subPixelOptimizeLine;\n\n/**\n * 直线\n * @module zrender/graphic/shape/Line\n */\n// Avoid create repeatly.\nvar subPixelOptimizeOutputShape = {};\n\nvar _default = Path.extend({\n  type: 'line',\n  shape: {\n    // Start point\n    x1: 0,\n    y1: 0,\n    // End point\n    x2: 0,\n    y2: 0,\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n\n    if (this.subPixelOptimize) {\n      subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n      x1 = subPixelOptimizeOutputShape.x1;\n      y1 = subPixelOptimizeOutputShape.y1;\n      x2 = subPixelOptimizeOutputShape.x2;\n      y2 = subPixelOptimizeOutputShape.y2;\n    } else {\n      x1 = shape.x1;\n      y1 = shape.y1;\n      x2 = shape.x2;\n      y2 = shape.y2;\n    }\n\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (percent < 1) {\n      x2 = x1 * (1 - percent) + x2 * percent;\n      y2 = y1 * (1 - percent) + y2 * percent;\n    }\n\n    ctx.lineTo(x2, y2);\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} percent\n   * @return {Array.<number>}\n   */\n  pointAt: function (p) {\n    var shape = this.shape;\n    return [shape.x1 * (1 - p) + shape.x2 * p, shape.y1 * (1 - p) + shape.y2 * p];\n  }\n});\n\nmodule.exports = _default;","// TODO Draggable for group\n// FIXME Draggable on element which has parent rotation or scale\nfunction Draggable() {\n  this.on('mousedown', this._dragStart, this);\n  this.on('mousemove', this._drag, this);\n  this.on('mouseup', this._dragEnd, this); // `mosuemove` and `mouseup` can be continue to fire when dragging.\n  // See [Drag outside] in `Handler.js`. So we do not need to trigger\n  // `_dragEnd` when globalout. That would brings better user experience.\n  // this.on('globalout', this._dragEnd, this);\n  // this._dropTarget = null;\n  // this._draggingTarget = null;\n  // this._x = 0;\n  // this._y = 0;\n}\n\nDraggable.prototype = {\n  constructor: Draggable,\n  _dragStart: function (e) {\n    var draggingTarget = e.target; // Find if there is draggable in the ancestor\n\n    while (draggingTarget && !draggingTarget.draggable) {\n      draggingTarget = draggingTarget.parent;\n    }\n\n    if (draggingTarget) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.dispatchToElement(param(draggingTarget, e), 'dragstart', e.event);\n    }\n  },\n  _drag: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.dispatchToElement(param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(lastDropTarget, e), 'dragleave', e.event);\n        }\n\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  },\n  _dragEnd: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n\n    this.dispatchToElement(param(draggingTarget, e), 'dragend', e.event);\n\n    if (this._dropTarget) {\n      this.dispatchToElement(param(this._dropTarget, e), 'drop', e.event);\n    }\n\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  }\n};\n\nfunction param(target, e) {\n  return {\n    target: target,\n    topTarget: e && e.topTarget\n  };\n}\n\nvar _default = Draggable;\nmodule.exports = _default;","var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar pathContain = require(\"../contain/path\");\n\nvar Pattern = require(\"./Pattern\");\n\nvar getCanvasPattern = Pattern.prototype.getCanvasPattern;\nvar abs = Math.abs;\nvar pathProxyForDraw = new PathProxy(true);\n/**\n * @alias module:zrender/graphic/Path\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\n\nfunction Path(opts) {\n  Displayable.call(this, opts);\n  /**\n   * @type {module:zrender/core/PathProxy}\n   * @readOnly\n   */\n\n  this.path = null;\n}\n\nPath.prototype = {\n  constructor: Path,\n  type: 'path',\n  __dirtyPath: true,\n  strokeContainThreshold: 5,\n  // This item default to be false. But in map series in echarts,\n  // in order to improve performance, it should be set to true,\n  // so the shorty segment won't draw.\n  segmentIgnoreThreshold: 0,\n\n  /**\n   * See `module:zrender/src/graphic/helper/subPixelOptimize`.\n   * @type {boolean}\n   */\n  subPixelOptimize: false,\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var path = this.path || pathProxyForDraw;\n    var hasStroke = style.hasStroke();\n    var hasFill = style.hasFill();\n    var fill = style.fill;\n    var stroke = style.stroke;\n    var hasFillGradient = hasFill && !!fill.colorStops;\n    var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n    var hasFillPattern = hasFill && !!fill.image;\n    var hasStrokePattern = hasStroke && !!stroke.image;\n    style.bind(ctx, this, prevEl);\n    this.setTransform(ctx);\n\n    if (this.__dirty) {\n      var rect; // Update gradient because bounding rect may changed\n\n      if (hasFillGradient) {\n        rect = rect || this.getBoundingRect();\n        this._fillGradient = style.getGradient(ctx, fill, rect);\n      }\n\n      if (hasStrokeGradient) {\n        rect = rect || this.getBoundingRect();\n        this._strokeGradient = style.getGradient(ctx, stroke, rect);\n      }\n    } // Use the gradient or pattern\n\n\n    if (hasFillGradient) {\n      // PENDING If may have affect the state\n      ctx.fillStyle = this._fillGradient;\n    } else if (hasFillPattern) {\n      ctx.fillStyle = getCanvasPattern.call(fill, ctx);\n    }\n\n    if (hasStrokeGradient) {\n      ctx.strokeStyle = this._strokeGradient;\n    } else if (hasStrokePattern) {\n      ctx.strokeStyle = getCanvasPattern.call(stroke, ctx);\n    }\n\n    var lineDash = style.lineDash;\n    var lineDashOffset = style.lineDashOffset;\n    var ctxLineDash = !!ctx.setLineDash; // Update path sx, sy\n\n    var scale = this.getGlobalScale();\n    path.setScale(scale[0], scale[1], this.segmentIgnoreThreshold); // Proxy context\n    // Rebuild path in following 2 cases\n    // 1. Path is dirty\n    // 2. Path needs javascript implemented lineDash stroking.\n    //    In this case, lineDash information will not be saved in PathProxy\n\n    if (this.__dirtyPath || lineDash && !ctxLineDash && hasStroke) {\n      path.beginPath(ctx); // Setting line dash before build path\n\n      if (lineDash && !ctxLineDash) {\n        path.setLineDash(lineDash);\n        path.setLineDashOffset(lineDashOffset);\n      }\n\n      this.buildPath(path, this.shape, false); // Clear path dirty flag\n\n      if (this.path) {\n        this.__dirtyPath = false;\n      }\n    } else {\n      // Replay path building\n      ctx.beginPath();\n      this.path.rebuildPath(ctx);\n    }\n\n    if (hasFill) {\n      if (style.fillOpacity != null) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        path.fill(ctx);\n        ctx.globalAlpha = originalGlobalAlpha;\n      } else {\n        path.fill(ctx);\n      }\n    }\n\n    if (lineDash && ctxLineDash) {\n      ctx.setLineDash(lineDash);\n      ctx.lineDashOffset = lineDashOffset;\n    }\n\n    if (hasStroke) {\n      if (style.strokeOpacity != null) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        path.stroke(ctx);\n        ctx.globalAlpha = originalGlobalAlpha;\n      } else {\n        path.stroke(ctx);\n      }\n    }\n\n    if (lineDash && ctxLineDash) {\n      // PENDING\n      // Remove lineDash\n      ctx.setLineDash([]);\n    } // Draw rect text\n\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  // When bundling path, some shape may decide if use moveTo to begin a new subpath or closePath\n  // Like in circle\n  buildPath: function (ctx, shapeCfg, inBundle) {},\n  createPathProxy: function () {\n    this.path = new PathProxy();\n  },\n  getBoundingRect: function () {\n    var rect = this._rect;\n    var style = this.style;\n    var needsUpdateRect = !rect;\n\n    if (needsUpdateRect) {\n      var path = this.path;\n\n      if (!path) {\n        // Create path on demand.\n        path = this.path = new PathProxy();\n      }\n\n      if (this.__dirtyPath) {\n        path.beginPath();\n        this.buildPath(path, this.shape, false);\n      }\n\n      rect = path.getBoundingRect();\n    }\n\n    this._rect = rect;\n\n    if (style.hasStroke()) {\n      // Needs update rect with stroke lineWidth when\n      // 1. Element changes scale or lineWidth\n      // 2. Shape is changed\n      var rectWithStroke = this._rectWithStroke || (this._rectWithStroke = rect.clone());\n\n      if (this.__dirty || needsUpdateRect) {\n        rectWithStroke.copy(rect); // FIXME Must after updateTransform\n\n        var w = style.lineWidth; // PENDING, Min line width is needed when line is horizontal or vertical\n\n        var lineScale = style.strokeNoScale ? this.getLineScale() : 1; // Only add extra hover lineWidth when there are no fill\n\n        if (!style.hasFill()) {\n          w = Math.max(w, this.strokeContainThreshold || 4);\n        } // Consider line width\n        // Line scale can't be 0;\n\n\n        if (lineScale > 1e-10) {\n          rectWithStroke.width += w / lineScale;\n          rectWithStroke.height += w / lineScale;\n          rectWithStroke.x -= w / lineScale / 2;\n          rectWithStroke.y -= w / lineScale / 2;\n        }\n      } // Return rect with stroke\n\n\n      return rectWithStroke;\n    }\n\n    return rect;\n  },\n  contain: function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    var style = this.style;\n    x = localPos[0];\n    y = localPos[1];\n\n    if (rect.contain(x, y)) {\n      var pathData = this.path.data;\n\n      if (style.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var lineScale = style.strokeNoScale ? this.getLineScale() : 1; // Line scale can't be 0;\n\n        if (lineScale > 1e-10) {\n          // Only add extra hover lineWidth when there are no fill\n          if (!style.hasFill()) {\n            lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n          }\n\n          if (pathContain.containStroke(pathData, lineWidth / lineScale, x, y)) {\n            return true;\n          }\n        }\n      }\n\n      if (style.hasFill()) {\n        return pathContain.contain(pathData, x, y);\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @param  {boolean} dirtyPath\n   */\n  dirty: function (dirtyPath) {\n    if (dirtyPath == null) {\n      dirtyPath = true;\n    } // Only mark dirty, not mark clean\n\n\n    if (dirtyPath) {\n      this.__dirtyPath = dirtyPath;\n      this._rect = null;\n    }\n\n    this.__dirty = this.__dirtyText = true;\n    this.__zr && this.__zr.refresh(); // Used as a clipping path\n\n    if (this.__clipTarget) {\n      this.__clipTarget.dirty();\n    }\n  },\n\n  /**\n   * Alias for animate('shape')\n   * @param {boolean} loop\n   */\n  animateShape: function (loop) {\n    return this.animate('shape', loop);\n  },\n  // Overwrite attrKV\n  attrKV: function (key, value) {\n    // FIXME\n    if (key === 'shape') {\n      this.setShape(value);\n      this.__dirtyPath = true;\n      this._rect = null;\n    } else {\n      Displayable.prototype.attrKV.call(this, key, value);\n    }\n  },\n\n  /**\n   * @param {Object|string} key\n   * @param {*} value\n   */\n  setShape: function (key, value) {\n    var shape = this.shape; // Path from string may not have shape\n\n    if (shape) {\n      if (zrUtil.isObject(key)) {\n        for (var name in key) {\n          if (key.hasOwnProperty(name)) {\n            shape[name] = key[name];\n          }\n        }\n      } else {\n        shape[key] = value;\n      }\n\n      this.dirty(true);\n    }\n\n    return this;\n  },\n  getLineScale: function () {\n    var m = this.transform; // Get the line scale.\n    // Determinant of `m` means how much the area is enlarged by the\n    // transformation. So its square root can be used as a scale factor\n    // for width.\n\n    return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10 ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1])) : 1;\n  }\n};\n/**\n * 扩展一个 Path element, 比如星形，圆等。\n * Extend a path element\n * @param {Object} props\n * @param {string} props.type Path type\n * @param {Function} props.init Initialize\n * @param {Function} props.buildPath Overwrite buildPath method\n * @param {Object} [props.style] Extended default style config\n * @param {Object} [props.shape] Extended default shape config\n */\n\nPath.extend = function (defaults) {\n  var Sub = function (opts) {\n    Path.call(this, opts);\n\n    if (defaults.style) {\n      // Extend default style\n      this.style.extendFrom(defaults.style, false);\n    } // Extend default shape\n\n\n    var defaultShape = defaults.shape;\n\n    if (defaultShape) {\n      this.shape = this.shape || {};\n      var thisShape = this.shape;\n\n      for (var name in defaultShape) {\n        if (!thisShape.hasOwnProperty(name) && defaultShape.hasOwnProperty(name)) {\n          thisShape[name] = defaultShape[name];\n        }\n      }\n    }\n\n    defaults.init && defaults.init.call(this, opts);\n  };\n\n  zrUtil.inherits(Sub, Path); // FIXME 不能 extend position, rotation 等引用对象\n\n  for (var name in defaults) {\n    // Extending prototype values and methods\n    if (name !== 'style' && name !== 'shape') {\n      Sub.prototype[name] = defaults[name];\n    }\n  }\n\n  return Sub;\n};\n\nzrUtil.inherits(Path, Displayable);\nvar _default = Path;\nmodule.exports = _default;","var _event = require(\"../core/event\");\n\nvar addEventListener = _event.addEventListener;\nvar removeEventListener = _event.removeEventListener;\nvar normalizeEvent = _event.normalizeEvent;\nvar getNativeEvent = _event.getNativeEvent;\n\nvar zrUtil = require(\"../core/util\");\n\nvar Eventful = require(\"../mixin/Eventful\");\n\nvar env = require(\"../core/env\");\n\n/* global document */\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\n\nvar localNativeListenerNames = function () {\n  var mouseHandlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n  var touchHandlerNames = ['touchstart', 'touchend', 'touchmove'];\n  var pointerEventNameMap = {\n    pointerdown: 1,\n    pointerup: 1,\n    pointermove: 1,\n    pointerout: 1\n  };\n  var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n    var nm = name.replace('mouse', 'pointer');\n    return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n  });\n  return {\n    mouse: mouseHandlerNames,\n    touch: touchHandlerNames,\n    pointer: pointerHandlerNames\n  };\n}();\n\nvar globalNativeListenerNames = {\n  mouse: ['mousemove', 'mouseup'],\n  pointer: ['pointermove', 'pointerup']\n};\n\nfunction eventNameFix(name) {\n  return name === 'mousewheel' && env.browser.firefox ? 'DOMMouseScroll' : name;\n}\n\nfunction isPointerFromTouch(event) {\n  var pointerType = event.pointerType;\n  return pointerType === 'pen' || pointerType === 'touch';\n} // function useMSGuesture(handlerProxy, event) {\n//     return isPointerFromTouch(event) && !!handlerProxy._msGesture;\n// }\n// function onMSGestureChange(proxy, event) {\n//     if (event.translationX || event.translationY) {\n//         // mousemove is carried by MSGesture to reduce the sensitivity.\n//         proxy.handler.dispatchToElement(event.target, 'mousemove', event);\n//     }\n//     if (event.scale !== 1) {\n//         event.pinchX = event.offsetX;\n//         event.pinchY = event.offsetY;\n//         event.pinchScale = event.scale;\n//         proxy.handler.dispatchToElement(event.target, 'pinch', event);\n//     }\n// }\n\n/**\n * Prevent mouse event from being dispatched after Touch Events action\n * @see <https://github.com/deltakosh/handjs/blob/master/src/hand.base.js>\n * 1. Mobile browsers dispatch mouse events 300ms after touchend.\n * 2. Chrome for Android dispatch mousedown for long-touch about 650ms\n * Result: Blocking Mouse Events for 700ms.\n *\n * @param {DOMHandlerScope} scope\n */\n\n\nfunction setTouchTimer(scope) {\n  scope.touching = true;\n\n  if (scope.touchTimer != null) {\n    clearTimeout(scope.touchTimer);\n    scope.touchTimer = null;\n  }\n\n  scope.touchTimer = setTimeout(function () {\n    scope.touching = false;\n    scope.touchTimer = null;\n  }, 700);\n} // Mark touch, which is useful in distinguish touch and\n// mouse event in upper applicatoin.\n\n\nfunction markTouch(event) {\n  event && (event.zrByTouch = true);\n} // function markTriggeredFromLocal(event) {\n//     event && (event.__zrIsFromLocal = true);\n// }\n// function isTriggeredFromLocal(instance, event) {\n//     return !!(event && event.__zrIsFromLocal);\n// }\n\n\nfunction normalizeGlobalEvent(instance, event) {\n  // offsetX, offsetY still need to be calculated. They are necessary in the event\n  // handlers of the upper applications. Set `true` to force calculate them.\n  return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\n/**\n * Detect whether the given el is in `painterRoot`.\n */\n\n\nfunction isLocalEl(instance, el) {\n  var elTmp = el;\n  var isLocal = false;\n\n  while (elTmp && elTmp.nodeType !== 9 && !(isLocal = elTmp.domBelongToZr || elTmp !== el && elTmp === instance.painterRoot)) {\n    elTmp = elTmp.parentNode;\n  }\n\n  return isLocal;\n}\n/**\n * Make a fake event but not change the original event,\n * becuase the global event probably be used by other\n * listeners not belonging to zrender.\n * @class\n */\n\n\nfunction FakeGlobalEvent(instance, event) {\n  this.type = event.type;\n  this.target = this.currentTarget = instance.dom;\n  this.pointerType = event.pointerType; // Necessray for the force calculation of zrX, zrY\n\n  this.clientX = event.clientX;\n  this.clientY = event.clientY; // Because we do not mount global listeners to touch events,\n  // we do not copy `targetTouches` and `changedTouches` here.\n}\n\nvar fakeGlobalEventProto = FakeGlobalEvent.prototype; // we make the default methods on the event do nothing,\n// otherwise it is dangerous. See more details in\n// [Drag outside] in `Handler.js`.\n\nfakeGlobalEventProto.stopPropagation = fakeGlobalEventProto.stopImmediatePropagation = fakeGlobalEventProto.preventDefault = zrUtil.noop;\n/**\n * Local DOM Handlers\n * @this {HandlerProxy}\n */\n\nvar localDOMHandlers = {\n  mousedown: function (event) {\n    event = normalizeEvent(this.dom, event);\n    this._mayPointerCapture = [event.zrX, event.zrY];\n    this.trigger('mousedown', event);\n  },\n  mousemove: function (event) {\n    event = normalizeEvent(this.dom, event);\n    var downPoint = this._mayPointerCapture;\n\n    if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n      togglePointerCapture(this, true);\n    }\n\n    this.trigger('mousemove', event);\n  },\n  mouseup: function (event) {\n    event = normalizeEvent(this.dom, event);\n    togglePointerCapture(this, false);\n    this.trigger('mouseup', event);\n  },\n  mouseout: function (event) {\n    event = normalizeEvent(this.dom, event); // Similarly to the browser did on `document` and touch event,\n    // `globalout` will be delayed to final pointer cature release.\n\n    if (this._pointerCapturing) {\n      event.zrEventControl = 'no_globalout';\n    } // There might be some doms created by upper layer application\n    // at the same level of painter.getViewportRoot() (e.g., tooltip\n    // dom created by echarts), where 'globalout' event should not\n    // be triggered when mouse enters these doms. (But 'mouseout'\n    // should be triggered at the original hovered element as usual).\n\n\n    var element = event.toElement || event.relatedTarget;\n    event.zrIsToLocalDOM = isLocalEl(this, element);\n    this.trigger('mouseout', event);\n  },\n  touchstart: function (event) {\n    // Default mouse behaviour should not be disabled here.\n    // For example, page may needs to be slided.\n    event = normalizeEvent(this.dom, event);\n    markTouch(event);\n    this._lastTouchMoment = new Date();\n    this.handler.processGesture(event, 'start'); // For consistent event listener for both touch device and mouse device,\n    // we simulate \"mouseover-->mousedown\" in touch device. So we trigger\n    // `mousemove` here (to trigger `mouseover` inside), and then trigger\n    // `mousedown`.\n\n    localDOMHandlers.mousemove.call(this, event);\n    localDOMHandlers.mousedown.call(this, event);\n  },\n  touchmove: function (event) {\n    event = normalizeEvent(this.dom, event);\n    markTouch(event);\n    this.handler.processGesture(event, 'change'); // Mouse move should always be triggered no matter whether\n    // there is gestrue event, because mouse move and pinch may\n    // be used at the same time.\n\n    localDOMHandlers.mousemove.call(this, event);\n  },\n  touchend: function (event) {\n    event = normalizeEvent(this.dom, event);\n    markTouch(event);\n    this.handler.processGesture(event, 'end');\n    localDOMHandlers.mouseup.call(this, event); // Do not trigger `mouseout` here, in spite of `mousemove`(`mouseover`) is\n    // triggered in `touchstart`. This seems to be illogical, but by this mechanism,\n    // we can conveniently implement \"hover style\" in both PC and touch device just\n    // by listening to `mouseover` to add \"hover style\" and listening to `mouseout`\n    // to remove \"hover style\" on an element, without any additional code for\n    // compatibility. (`mouseout` will not be triggered in `touchend`, so \"hover\n    // style\" will remain for user view)\n    // click event should always be triggered no matter whether\n    // there is gestrue event. System click can not be prevented.\n\n    if (+new Date() - this._lastTouchMoment < TOUCH_CLICK_DELAY) {\n      localDOMHandlers.click.call(this, event);\n    }\n  },\n  pointerdown: function (event) {\n    localDOMHandlers.mousedown.call(this, event); // if (useMSGuesture(this, event)) {\n    //     this._msGesture.addPointer(event.pointerId);\n    // }\n  },\n  pointermove: function (event) {\n    // FIXME\n    // pointermove is so sensitive that it always triggered when\n    // tap(click) on touch screen, which affect some judgement in\n    // upper application. So, we dont support mousemove on MS touch\n    // device yet.\n    if (!isPointerFromTouch(event)) {\n      localDOMHandlers.mousemove.call(this, event);\n    }\n  },\n  pointerup: function (event) {\n    localDOMHandlers.mouseup.call(this, event);\n  },\n  pointerout: function (event) {\n    // pointerout will be triggered when tap on touch screen\n    // (IE11+/Edge on MS Surface) after click event triggered,\n    // which is inconsistent with the mousout behavior we defined\n    // in touchend. So we unify them.\n    // (check localDOMHandlers.touchend for detailed explanation)\n    if (!isPointerFromTouch(event)) {\n      localDOMHandlers.mouseout.call(this, event);\n    }\n  }\n};\n/**\n * Othere DOM UI Event handlers for zr dom.\n * @this {HandlerProxy}\n */\n\nzrUtil.each(['click', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n  localDOMHandlers[name] = function (event) {\n    event = normalizeEvent(this.dom, event);\n    this.trigger(name, event);\n  };\n});\n/**\n * DOM UI Event handlers for global page.\n *\n * [Caution]:\n * those handlers should both support in capture phase and bubble phase!\n *\n * @this {HandlerProxy}\n */\n\nvar globalDOMHandlers = {\n  pointermove: function (event) {\n    // FIXME\n    // pointermove is so sensitive that it always triggered when\n    // tap(click) on touch screen, which affect some judgement in\n    // upper application. So, we dont support mousemove on MS touch\n    // device yet.\n    if (!isPointerFromTouch(event)) {\n      globalDOMHandlers.mousemove.call(this, event);\n    }\n  },\n  pointerup: function (event) {\n    globalDOMHandlers.mouseup.call(this, event);\n  },\n  mousemove: function (event) {\n    this.trigger('mousemove', event);\n  },\n  mouseup: function (event) {\n    var pointerCaptureReleasing = this._pointerCapturing;\n    togglePointerCapture(this, false);\n    this.trigger('mouseup', event);\n\n    if (pointerCaptureReleasing) {\n      event.zrEventControl = 'only_globalout';\n      this.trigger('mouseout', event);\n    }\n  }\n};\n/**\n * @param {HandlerProxy} instance\n * @param {DOMHandlerScope} scope\n */\n\nfunction mountLocalDOMEventListeners(instance, scope) {\n  var domHandlers = scope.domHandlers;\n\n  if (env.pointerEventsSupported) {\n    // Only IE11+/Edge\n    // 1. On devices that both enable touch and mouse (e.g., MS Surface and lenovo X240),\n    // IE11+/Edge do not trigger touch event, but trigger pointer event and mouse event\n    // at the same time.\n    // 2. On MS Surface, it probablely only trigger mousedown but no mouseup when tap on\n    // screen, which do not occurs in pointer event.\n    // So we use pointer event to both detect touch gesture and mouse behavior.\n    zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n      mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n        // markTriggeredFromLocal(event);\n        domHandlers[nativeEventName].call(instance, event);\n      });\n    }); // FIXME\n    // Note: MS Gesture require CSS touch-action set. But touch-action is not reliable,\n    // which does not prevent defuault behavior occasionally (which may cause view port\n    // zoomed in but use can not zoom it back). And event.preventDefault() does not work.\n    // So we have to not to use MSGesture and not to support touchmove and pinch on MS\n    // touch screen. And we only support click behavior on MS touch screen now.\n    // MS Gesture Event is only supported on IE11+/Edge and on Windows 8+.\n    // We dont support touch on IE on win7.\n    // See <https://msdn.microsoft.com/en-us/library/dn433243(v=vs.85).aspx>\n    // if (typeof MSGesture === 'function') {\n    //     (this._msGesture = new MSGesture()).target = dom; // jshint ignore:line\n    //     dom.addEventListener('MSGestureChange', onMSGestureChange);\n    // }\n  } else {\n    if (env.touchEventsSupported) {\n      zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n        mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n          // markTriggeredFromLocal(event);\n          domHandlers[nativeEventName].call(instance, event);\n          setTouchTimer(scope);\n        });\n      }); // Handler of 'mouseout' event is needed in touch mode, which will be mounted below.\n      // addEventListener(root, 'mouseout', this._mouseoutHandler);\n    } // 1. Considering some devices that both enable touch and mouse event (like on MS Surface\n    // and lenovo X240, @see #2350), we make mouse event be always listened, otherwise\n    // mouse event can not be handle in those devices.\n    // 2. On MS Surface, Chrome will trigger both touch event and mouse event. How to prevent\n    // mouseevent after touch event triggered, see `setTouchTimer`.\n\n\n    zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n      mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n        event = getNativeEvent(event);\n\n        if (!scope.touching) {\n          // markTriggeredFromLocal(event);\n          domHandlers[nativeEventName].call(instance, event);\n        }\n      });\n    });\n  }\n}\n/**\n * @param {HandlerProxy} instance\n * @param {DOMHandlerScope} scope\n */\n\n\nfunction mountGlobalDOMEventListeners(instance, scope) {\n  // Only IE11+/Edge. See the comment in `mountLocalDOMEventListeners`.\n  if (env.pointerEventsSupported) {\n    zrUtil.each(globalNativeListenerNames.pointer, mount);\n  } // Touch event has implemented \"drag outside\" so we do not mount global listener for touch event.\n  // (see https://www.w3.org/TR/touch-events/#the-touchmove-event)\n  // We do not consider \"both-support-touch-and-mouse device\" for this feature (see the comment of\n  // `mountLocalDOMEventListeners`) to avoid bugs util some requirements come.\n  else if (!env.touchEventsSupported) {\n      zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n\n  function mount(nativeEventName) {\n    function nativeEventListener(event) {\n      event = getNativeEvent(event); // See the reason in [Drag outside] in `Handler.js`\n      // This checking supports both `useCapture` or not.\n      // PENDING: if there is performance issue in some devices,\n      // we probably can not use `useCapture` and change a easier\n      // to judes whether local (mark).\n\n      if (!isLocalEl(instance, event.target)) {\n        event = normalizeGlobalEvent(instance, event);\n        scope.domHandlers[nativeEventName].call(instance, event);\n      }\n    }\n\n    mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, {\n      capture: true\n    } // See [Drag Outside] in `Handler.js`\n    );\n  }\n}\n\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n  scope.mounted[nativeEventName] = listener;\n  scope.listenerOpts[nativeEventName] = opt;\n  addEventListener(scope.domTarget, eventNameFix(nativeEventName), listener, opt);\n}\n\nfunction unmountDOMEventListeners(scope) {\n  var mounted = scope.mounted;\n\n  for (var nativeEventName in mounted) {\n    if (mounted.hasOwnProperty(nativeEventName)) {\n      removeEventListener(scope.domTarget, eventNameFix(nativeEventName), mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n    }\n  }\n\n  scope.mounted = {};\n}\n/**\n * See [Drag Outside] in `Handler.js`.\n * @implement\n * @param {boolean} isPointerCapturing Should never be `null`/`undefined`.\n *        `true`: start to capture pointer if it is not capturing.\n *        `false`: end the capture if it is capturing.\n */\n\n\nfunction togglePointerCapture(instance, isPointerCapturing) {\n  instance._mayPointerCapture = null;\n\n  if (globalEventSupported && instance._pointerCapturing ^ isPointerCapturing) {\n    instance._pointerCapturing = isPointerCapturing;\n    var globalHandlerScope = instance._globalHandlerScope;\n    isPointerCapturing ? mountGlobalDOMEventListeners(instance, globalHandlerScope) : unmountDOMEventListeners(globalHandlerScope);\n  }\n}\n/**\n * @inner\n * @class\n */\n\n\nfunction DOMHandlerScope(domTarget, domHandlers) {\n  this.domTarget = domTarget;\n  this.domHandlers = domHandlers; // Key: eventName, value: mounted handler funcitons.\n  // Used for unmount.\n\n  this.mounted = {};\n  this.listenerOpts = {};\n  this.touchTimer = null;\n  this.touching = false;\n}\n/**\n * @public\n * @class\n */\n\n\nfunction HandlerDomProxy(dom, painterRoot) {\n  Eventful.call(this);\n  this.dom = dom;\n  this.painterRoot = painterRoot;\n  this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n\n  if (globalEventSupported) {\n    this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n  }\n  /**\n   * @type {boolean}\n   */\n\n\n  this._pointerCapturing = false;\n  /**\n   * @type {Array.<number>} [x, y] or null.\n   */\n\n  this._mayPointerCapture = null;\n  mountLocalDOMEventListeners(this, this._localHandlerScope);\n}\n\nvar handlerDomProxyProto = HandlerDomProxy.prototype;\n\nhandlerDomProxyProto.dispose = function () {\n  unmountDOMEventListeners(this._localHandlerScope);\n\n  if (globalEventSupported) {\n    unmountDOMEventListeners(this._globalHandlerScope);\n  }\n};\n\nhandlerDomProxyProto.setCursor = function (cursorStyle) {\n  this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n};\n\nzrUtil.mixin(HandlerDomProxy, Eventful);\nvar _default = HandlerDomProxy;\nmodule.exports = _default;","var util = require(\"./core/util\");\n\nvar vec2 = require(\"./core/vector\");\n\nvar Draggable = require(\"./mixin/Draggable\");\n\nvar Eventful = require(\"./mixin/Eventful\");\n\nvar eventTool = require(\"./core/event\");\n\nvar GestureMgr = require(\"./core/GestureMgr\");\n\n/**\n * [The interface between `Handler` and `HandlerProxy`]:\n *\n * The default `HandlerProxy` only support the common standard web environment\n * (e.g., standalone browser, headless browser, embed browser in mobild APP, ...).\n * But `HandlerProxy` can be replaced to support more non-standard environment\n * (e.g., mini app), or to support more feature that the default `HandlerProxy`\n * not provided (like echarts-gl did).\n * So the interface between `Handler` and `HandlerProxy` should be stable. Do not\n * make break changes util inevitable. The interface include the public methods\n * of `Handler` and the events listed in `handlerNames` below, by which `HandlerProxy`\n * drives `Handler`.\n */\n\n/**\n * [Drag outside]:\n *\n * That is, triggering `mousemove` and `mouseup` event when the pointer is out of the\n * zrender area when dragging. That is important for the improvement of the user experience\n * when dragging something near the boundary without being terminated unexpectedly.\n *\n * We originally consider to introduce new events like `pagemovemove` and `pagemouseup`\n * to resolve this issue. But some drawbacks of it is described in\n * https://github.com/ecomfe/zrender/pull/536#issuecomment-560286899\n *\n * Instead, we referenced the specifications:\n * https://www.w3.org/TR/touch-events/#the-touchmove-event\n * https://www.w3.org/TR/2014/WD-DOM-Level-3-Events-20140925/#event-type-mousemove\n * where the the mousemove/touchmove can be continue to fire if the user began a drag\n * operation and the pointer has left the boundary. (for the mouse event, browsers\n * only do it on `document` and when the pointer has left the boundary of the browser.)\n *\n * So the default `HandlerProxy` supports this feature similarly: if it is in the dragging\n * state (see `pointerCapture` in `HandlerProxy`), the `mousemove` and `mouseup` continue\n * to fire until release the pointer. That is implemented by listen to those event on\n * `document`.\n * If we implement some other `HandlerProxy` only for touch device, that would be easier.\n * The touch event support this feature by default.\n *\n * Note:\n * There might be some cases that the mouse event can not be\n * received on `document`. For example,\n * (A) `useCapture` is not supported and some user defined event listeners on the ancestor\n * of zr dom throw Error .\n * (B) `useCapture` is not supported Some user defined event listeners on the ancestor of\n * zr dom call `stopPropagation`.\n * In these cases, the `mousemove` event might be keep triggered event\n * if the mouse is released. We try to reduce the side-effect in those cases.\n * That is, do nothing (especially, `findHover`) in those cases. See `isOutsideBoundary`.\n *\n * Note:\n * If `HandlerProxy` listens to `document` with `useCapture`, `HandlerProxy` needs to\n * make sure `stopPropagation` and `preventDefault` doing nothing if and only if the event\n * target is not zrender dom. Becuase it is dangerous to enable users to call them in\n * `document` capture phase to prevent the propagation to any listener of the webpage.\n * But they are needed to work when the pointer inside the zrender dom.\n */\nvar SILENT = 'silent';\n\nfunction makeEventPacket(eveType, targetInfo, event) {\n  return {\n    type: eveType,\n    event: event,\n    // target can only be an element that is not silent.\n    target: targetInfo.target,\n    // topTarget can be a silent element.\n    topTarget: targetInfo.topTarget,\n    cancelBubble: false,\n    offsetX: event.zrX,\n    offsetY: event.zrY,\n    gestureEvent: event.gestureEvent,\n    pinchX: event.pinchX,\n    pinchY: event.pinchY,\n    pinchScale: event.pinchScale,\n    wheelDelta: event.zrDelta,\n    zrByTouch: event.zrByTouch,\n    which: event.which,\n    stop: stopEvent\n  };\n}\n\nfunction stopEvent() {\n  eventTool.stop(this.event);\n}\n\nfunction EmptyProxy() {}\n\nEmptyProxy.prototype.dispose = function () {};\n\nvar handlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n/**\n * @alias module:zrender/Handler\n * @constructor\n * @extends module:zrender/mixin/Eventful\n * @param {module:zrender/Storage} storage Storage instance.\n * @param {module:zrender/Painter} painter Painter instance.\n * @param {module:zrender/dom/HandlerProxy} proxy HandlerProxy instance.\n * @param {HTMLElement} painterRoot painter.root (not painter.getViewportRoot()).\n */\n\nvar Handler = function (storage, painter, proxy, painterRoot) {\n  Eventful.call(this);\n  this.storage = storage;\n  this.painter = painter;\n  this.painterRoot = painterRoot;\n  proxy = proxy || new EmptyProxy();\n  /**\n   * Proxy of event. can be Dom, WebGLSurface, etc.\n   */\n\n  this.proxy = null;\n  /**\n   * {target, topTarget, x, y}\n   * @private\n   * @type {Object}\n   */\n\n  this._hovered = {};\n  /**\n   * @private\n   * @type {Date}\n   */\n\n  this._lastTouchMoment;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._lastX;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._lastY;\n  /**\n   * @private\n   * @type {module:zrender/core/GestureMgr}\n   */\n\n  this._gestureMgr;\n  Draggable.call(this);\n  this.setHandlerProxy(proxy);\n};\n\nHandler.prototype = {\n  constructor: Handler,\n  setHandlerProxy: function (proxy) {\n    if (this.proxy) {\n      this.proxy.dispose();\n    }\n\n    if (proxy) {\n      util.each(handlerNames, function (name) {\n        proxy.on && proxy.on(name, this[name], this);\n      }, this); // Attach handler\n\n      proxy.handler = this;\n    }\n\n    this.proxy = proxy;\n  },\n  mousemove: function (event) {\n    var x = event.zrX;\n    var y = event.zrY;\n    var isOutside = isOutsideBoundary(this, x, y);\n    var lastHovered = this._hovered;\n    var lastHoveredTarget = lastHovered.target; // If lastHoveredTarget is removed from zr (detected by '__zr') by some API call\n    // (like 'setOption' or 'dispatchAction') in event handlers, we should find\n    // lastHovered again here. Otherwise 'mouseout' can not be triggered normally.\n    // See #6198.\n\n    if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n      lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n      lastHoveredTarget = lastHovered.target;\n    }\n\n    var hovered = this._hovered = isOutside ? {\n      x: x,\n      y: y\n    } : this.findHover(x, y);\n    var hoveredTarget = hovered.target;\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default'); // Mouse out on previous hovered element\n\n    if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(lastHovered, 'mouseout', event);\n    } // Mouse moving on one element\n\n\n    this.dispatchToElement(hovered, 'mousemove', event); // Mouse over on a new element\n\n    if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(hovered, 'mouseover', event);\n    }\n  },\n  mouseout: function (event) {\n    var eventControl = event.zrEventControl;\n    var zrIsToLocalDOM = event.zrIsToLocalDOM;\n\n    if (eventControl !== 'only_globalout') {\n      this.dispatchToElement(this._hovered, 'mouseout', event);\n    }\n\n    if (eventControl !== 'no_globalout') {\n      // FIXME: if the pointer moving from the extra doms to realy \"outside\",\n      // the `globalout` should have been triggered. But currently not.\n      !zrIsToLocalDOM && this.trigger('globalout', {\n        type: 'globalout',\n        event: event\n      });\n    }\n  },\n\n  /**\n   * Resize\n   */\n  resize: function (event) {\n    this._hovered = {};\n  },\n\n  /**\n   * Dispatch event\n   * @param {string} eventName\n   * @param {event=} eventArgs\n   */\n  dispatch: function (eventName, eventArgs) {\n    var handler = this[eventName];\n    handler && handler.call(this, eventArgs);\n  },\n\n  /**\n   * Dispose\n   */\n  dispose: function () {\n    this.proxy.dispose();\n    this.storage = this.proxy = this.painter = null;\n  },\n\n  /**\n   * 设置默认的cursor style\n   * @param {string} [cursorStyle='default'] 例如 crosshair\n   */\n  setCursorStyle: function (cursorStyle) {\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(cursorStyle);\n  },\n\n  /**\n   * 事件分发代理\n   *\n   * @private\n   * @param {Object} targetInfo {target, topTarget} 目标图形元素\n   * @param {string} eventName 事件名称\n   * @param {Object} event 事件对象\n   */\n  dispatchToElement: function (targetInfo, eventName, event) {\n    targetInfo = targetInfo || {};\n    var el = targetInfo.target;\n\n    if (el && el.silent) {\n      return;\n    }\n\n    var eventHandler = 'on' + eventName;\n    var eventPacket = makeEventPacket(eventName, targetInfo, event);\n\n    while (el) {\n      el[eventHandler] && (eventPacket.cancelBubble = el[eventHandler].call(el, eventPacket));\n      el.trigger(eventName, eventPacket);\n      el = el.parent;\n\n      if (eventPacket.cancelBubble) {\n        break;\n      }\n    }\n\n    if (!eventPacket.cancelBubble) {\n      // 冒泡到顶级 zrender 对象\n      this.trigger(eventName, eventPacket); // 分发事件到用户自定义层\n      // 用户有可能在全局 click 事件中 dispose，所以需要判断下 painter 是否存在\n\n      this.painter && this.painter.eachOtherLayer(function (layer) {\n        if (typeof layer[eventHandler] === 'function') {\n          layer[eventHandler].call(layer, eventPacket);\n        }\n\n        if (layer.trigger) {\n          layer.trigger(eventName, eventPacket);\n        }\n      });\n    }\n  },\n\n  /**\n   * @private\n   * @param {number} x\n   * @param {number} y\n   * @param {module:zrender/graphic/Displayable} exclude\n   * @return {model:zrender/Element}\n   * @method\n   */\n  findHover: function (x, y, exclude) {\n    var list = this.storage.getDisplayList();\n    var out = {\n      x: x,\n      y: y\n    };\n\n    for (var i = list.length - 1; i >= 0; i--) {\n      var hoverCheckResult;\n\n      if (list[i] !== exclude // getDisplayList may include ignored item in VML mode\n      && !list[i].ignore && (hoverCheckResult = isHover(list[i], x, y))) {\n        !out.topTarget && (out.topTarget = list[i]);\n\n        if (hoverCheckResult !== SILENT) {\n          out.target = list[i];\n          break;\n        }\n      }\n    }\n\n    return out;\n  },\n  processGesture: function (event, stage) {\n    if (!this._gestureMgr) {\n      this._gestureMgr = new GestureMgr();\n    }\n\n    var gestureMgr = this._gestureMgr;\n    stage === 'start' && gestureMgr.clear();\n    var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n    stage === 'end' && gestureMgr.clear(); // Do not do any preventDefault here. Upper application do that if necessary.\n\n    if (gestureInfo) {\n      var type = gestureInfo.type;\n      event.gestureEvent = type;\n      this.dispatchToElement({\n        target: gestureInfo.target\n      }, type, gestureInfo.event);\n    }\n  }\n}; // Common handlers\n\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n  Handler.prototype[name] = function (event) {\n    var x = event.zrX;\n    var y = event.zrY;\n    var isOutside = isOutsideBoundary(this, x, y);\n    var hovered;\n    var hoveredTarget;\n\n    if (name !== 'mouseup' || !isOutside) {\n      // Find hover again to avoid click event is dispatched manually. Or click is triggered without mouseover\n      hovered = this.findHover(x, y);\n      hoveredTarget = hovered.target;\n    }\n\n    if (name === 'mousedown') {\n      this._downEl = hoveredTarget;\n      this._downPoint = [event.zrX, event.zrY]; // In case click triggered before mouseup\n\n      this._upEl = hoveredTarget;\n    } else if (name === 'mouseup') {\n      this._upEl = hoveredTarget;\n    } else if (name === 'click') {\n      if (this._downEl !== this._upEl // Original click event is triggered on the whole canvas element,\n      // including the case that `mousedown` - `mousemove` - `mouseup`,\n      // which should be filtered, otherwise it will bring trouble to\n      // pan and zoom.\n      || !this._downPoint // Arbitrary value\n      || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n        return;\n      }\n\n      this._downPoint = null;\n    }\n\n    this.dispatchToElement(hovered, name, event);\n  };\n});\n\nfunction isHover(displayable, x, y) {\n  if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n    var el = displayable;\n    var isSilent;\n\n    while (el) {\n      // If clipped by ancestor.\n      // FIXME: If clipPath has neither stroke nor fill,\n      // el.clipPath.contain(x, y) will always return false.\n      if (el.clipPath && !el.clipPath.contain(x, y)) {\n        return false;\n      }\n\n      if (el.silent) {\n        isSilent = true;\n      }\n\n      el = el.parent;\n    }\n\n    return isSilent ? SILENT : true;\n  }\n\n  return false;\n}\n/**\n * See [Drag outside].\n */\n\n\nfunction isOutsideBoundary(handlerInstance, x, y) {\n  var painter = handlerInstance.painter;\n  return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\n\nutil.mixin(Handler, Eventful);\nutil.mixin(Handler, Draggable);\nvar _default = Handler;\nmodule.exports = _default;","var env = require(\"../core/env\");\n\nvar urn = 'urn:schemas-microsoft-com:vml';\nvar win = typeof window === 'undefined' ? null : window;\nvar vmlInited = false;\nvar doc = win && win.document;\n\nfunction createNode(tagName) {\n  return doCreateNode(tagName);\n} // Avoid assign to an exported variable, for transforming to cjs.\n\n\nvar doCreateNode;\n\nif (doc && !env.canvasSupported) {\n  try {\n    !doc.namespaces.zrvml && doc.namespaces.add('zrvml', urn);\n\n    doCreateNode = function (tagName) {\n      return doc.createElement('<zrvml:' + tagName + ' class=\"zrvml\">');\n    };\n  } catch (e) {\n    doCreateNode = function (tagName) {\n      return doc.createElement('<' + tagName + ' xmlns=\"' + urn + '\" class=\"zrvml\">');\n    };\n  }\n} // From raphael\n\n\nfunction initVML() {\n  if (vmlInited || !doc) {\n    return;\n  }\n\n  vmlInited = true;\n  var styleSheets = doc.styleSheets;\n\n  if (styleSheets.length < 31) {\n    doc.createStyleSheet().addRule('.zrvml', 'behavior:url(#default#VML)');\n  } else {\n    // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx\n    styleSheets[0].addRule('.zrvml', 'behavior:url(#default#VML)');\n  }\n}\n\nexports.doc = doc;\nexports.createNode = createNode;\nexports.initVML = initVML;","var Path = require(\"../Path\");\n\nvar polyHelper = require(\"../helper/poly\");\n\n/**\n * @module zrender/graphic/shape/Polyline\n */\nvar _default = Path.extend({\n  type: 'polyline',\n  shape: {\n    points: null,\n    smooth: false,\n    smoothConstraint: null\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    polyHelper.buildPath(ctx, shape, false);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"./Path\");\n\n// CompoundPath to improve performance\nvar _default = Path.extend({\n  type: 'compound',\n  shape: {\n    paths: null\n  },\n  _updatePathDirty: function () {\n    var dirtyPath = this.__dirtyPath;\n    var paths = this.shape.paths;\n\n    for (var i = 0; i < paths.length; i++) {\n      // Mark as dirty if any subpath is dirty\n      dirtyPath = dirtyPath || paths[i].__dirtyPath;\n    }\n\n    this.__dirtyPath = dirtyPath;\n    this.__dirty = this.__dirty || dirtyPath;\n  },\n  beforeBrush: function () {\n    this._updatePathDirty();\n\n    var paths = this.shape.paths || [];\n    var scale = this.getGlobalScale(); // Update path scale\n\n    for (var i = 0; i < paths.length; i++) {\n      if (!paths[i].path) {\n        paths[i].createPathProxy();\n      }\n\n      paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n    }\n  },\n  buildPath: function (ctx, shape) {\n    var paths = shape.paths || [];\n\n    for (var i = 0; i < paths.length; i++) {\n      paths[i].buildPath(ctx, paths[i].shape, true);\n    }\n  },\n  afterBrush: function () {\n    var paths = this.shape.paths || [];\n\n    for (var i = 0; i < paths.length; i++) {\n      paths[i].__dirtyPath = false;\n    }\n  },\n  getBoundingRect: function () {\n    this._updatePathDirty();\n\n    return Path.prototype.getBoundingRect.call(this);\n  }\n});\n\nmodule.exports = _default;","// Simple LRU cache use doubly linked list\n// @module zrender/core/LRU\n\n/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n */\nvar LinkedList = function () {\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n  this.head = null;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.tail = null;\n  this._len = 0;\n};\n\nvar linkedListProto = LinkedList.prototype;\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {module:zrender/core/LRU~Entry}\n */\n\nlinkedListProto.insert = function (val) {\n  var entry = new Entry(val);\n  this.insertEntry(entry);\n  return entry;\n};\n/**\n * Insert an entry at the tail\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.insertEntry = function (entry) {\n  if (!this.head) {\n    this.head = this.tail = entry;\n  } else {\n    this.tail.next = entry;\n    entry.prev = this.tail;\n    entry.next = null;\n    this.tail = entry;\n  }\n\n  this._len++;\n};\n/**\n * Remove entry.\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.remove = function (entry) {\n  var prev = entry.prev;\n  var next = entry.next;\n\n  if (prev) {\n    prev.next = next;\n  } else {\n    // Is head\n    this.head = next;\n  }\n\n  if (next) {\n    next.prev = prev;\n  } else {\n    // Is tail\n    this.tail = prev;\n  }\n\n  entry.next = entry.prev = null;\n  this._len--;\n};\n/**\n * @return {number}\n */\n\n\nlinkedListProto.len = function () {\n  return this._len;\n};\n/**\n * Clear list\n */\n\n\nlinkedListProto.clear = function () {\n  this.head = this.tail = null;\n  this._len = 0;\n};\n/**\n * @constructor\n * @param {} val\n */\n\n\nvar Entry = function (val) {\n  /**\n   * @type {}\n   */\n  this.value = val;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.next;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.prev;\n};\n/**\n * LRU Cache\n * @constructor\n * @alias module:zrender/core/LRU\n */\n\n\nvar LRU = function (maxSize) {\n  this._list = new LinkedList();\n  this._map = {};\n  this._maxSize = maxSize || 10;\n  this._lastRemovedEntry = null;\n};\n\nvar LRUProto = LRU.prototype;\n/**\n * @param  {string} key\n * @param  {} value\n * @return {} Removed value\n */\n\nLRUProto.put = function (key, value) {\n  var list = this._list;\n  var map = this._map;\n  var removed = null;\n\n  if (map[key] == null) {\n    var len = list.len(); // Reuse last removed entry\n\n    var entry = this._lastRemovedEntry;\n\n    if (len >= this._maxSize && len > 0) {\n      // Remove the least recently used\n      var leastUsedEntry = list.head;\n      list.remove(leastUsedEntry);\n      delete map[leastUsedEntry.key];\n      removed = leastUsedEntry.value;\n      this._lastRemovedEntry = leastUsedEntry;\n    }\n\n    if (entry) {\n      entry.value = value;\n    } else {\n      entry = new Entry(value);\n    }\n\n    entry.key = key;\n    list.insertEntry(entry);\n    map[key] = entry;\n  }\n\n  return removed;\n};\n/**\n * @param  {string} key\n * @return {}\n */\n\n\nLRUProto.get = function (key) {\n  var entry = this._map[key];\n  var list = this._list;\n\n  if (entry != null) {\n    // Put the latest used entry in the tail\n    if (entry !== list.tail) {\n      list.remove(entry);\n      list.insertEntry(entry);\n    }\n\n    return entry.value;\n  }\n};\n/**\n * Clear the cache\n */\n\n\nLRUProto.clear = function () {\n  this._list.clear();\n\n  this._map = {};\n};\n\nvar _default = LRU;\nmodule.exports = _default;","var guid = require(\"./core/guid\");\n\nvar Eventful = require(\"./mixin/Eventful\");\n\nvar Transformable = require(\"./mixin/Transformable\");\n\nvar Animatable = require(\"./mixin/Animatable\");\n\nvar zrUtil = require(\"./core/util\");\n\n/**\n * @alias module:zrender/Element\n * @constructor\n * @extends {module:zrender/mixin/Animatable}\n * @extends {module:zrender/mixin/Transformable}\n * @extends {module:zrender/mixin/Eventful}\n */\nvar Element = function (opts) {\n  // jshint ignore:line\n  Transformable.call(this, opts);\n  Eventful.call(this, opts);\n  Animatable.call(this, opts);\n  /**\n   * 画布元素ID\n   * @type {string}\n   */\n\n  this.id = opts.id || guid();\n};\n\nElement.prototype = {\n  /**\n   * 元素类型\n   * Element type\n   * @type {string}\n   */\n  type: 'element',\n\n  /**\n   * 元素名字\n   * Element name\n   * @type {string}\n   */\n  name: '',\n\n  /**\n   * ZRender 实例对象，会在 element 添加到 zrender 实例中后自动赋值\n   * ZRender instance will be assigned when element is associated with zrender\n   * @name module:/zrender/Element#__zr\n   * @type {module:zrender/ZRender}\n   */\n  __zr: null,\n\n  /**\n   * 图形是否忽略，为true时忽略图形的绘制以及事件触发\n   * If ignore drawing and events of the element object\n   * @name module:/zrender/Element#ignore\n   * @type {boolean}\n   * @default false\n   */\n  ignore: false,\n\n  /**\n   * 用于裁剪的路径(shape)，所有 Group 内的路径在绘制时都会被这个路径裁剪\n   * 该路径会继承被裁减对象的变换\n   * @type {module:zrender/graphic/Path}\n   * @see http://www.w3.org/TR/2dcontext/#clipping-region\n   * @readOnly\n   */\n  clipPath: null,\n\n  /**\n   * 是否是 Group\n   * @type {boolean}\n   */\n  isGroup: false,\n\n  /**\n   * Drift element\n   * @param  {number} dx dx on the global space\n   * @param  {number} dy dy on the global space\n   */\n  drift: function (dx, dy) {\n    switch (this.draggable) {\n      case 'horizontal':\n        dy = 0;\n        break;\n\n      case 'vertical':\n        dx = 0;\n        break;\n    }\n\n    var m = this.transform;\n\n    if (!m) {\n      m = this.transform = [1, 0, 0, 1, 0, 0];\n    }\n\n    m[4] += dx;\n    m[5] += dy;\n    this.decomposeTransform();\n    this.dirty(false);\n  },\n\n  /**\n   * Hook before update\n   */\n  beforeUpdate: function () {},\n\n  /**\n   * Hook after update\n   */\n  afterUpdate: function () {},\n\n  /**\n   * Update each frame\n   */\n  update: function () {\n    this.updateTransform();\n  },\n\n  /**\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {},\n\n  /**\n   * @protected\n   */\n  attrKV: function (key, value) {\n    if (key === 'position' || key === 'scale' || key === 'origin') {\n      // Copy the array\n      if (value) {\n        var target = this[key];\n\n        if (!target) {\n          target = this[key] = [];\n        }\n\n        target[0] = value[0];\n        target[1] = value[1];\n      }\n    } else {\n      this[key] = value;\n    }\n  },\n\n  /**\n   * Hide the element\n   */\n  hide: function () {\n    this.ignore = true;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * Show the element\n   */\n  show: function () {\n    this.ignore = false;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * @param {string|Object} key\n   * @param {*} value\n   */\n  attr: function (key, value) {\n    if (typeof key === 'string') {\n      this.attrKV(key, value);\n    } else if (zrUtil.isObject(key)) {\n      for (var name in key) {\n        if (key.hasOwnProperty(name)) {\n          this.attrKV(name, key[name]);\n        }\n      }\n    }\n\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * @param {module:zrender/graphic/Path} clipPath\n   */\n  setClipPath: function (clipPath) {\n    var zr = this.__zr;\n\n    if (zr) {\n      clipPath.addSelfToZr(zr);\n    } // Remove previous clip path\n\n\n    if (this.clipPath && this.clipPath !== clipPath) {\n      this.removeClipPath();\n    }\n\n    this.clipPath = clipPath;\n    clipPath.__zr = zr;\n    clipPath.__clipTarget = this;\n    this.dirty(false);\n  },\n\n  /**\n   */\n  removeClipPath: function () {\n    var clipPath = this.clipPath;\n\n    if (clipPath) {\n      if (clipPath.__zr) {\n        clipPath.removeSelfFromZr(clipPath.__zr);\n      }\n\n      clipPath.__zr = null;\n      clipPath.__clipTarget = null;\n      this.clipPath = null;\n      this.dirty(false);\n    }\n  },\n\n  /**\n   * Add self from zrender instance.\n   * Not recursively because it will be invoked when element added to storage.\n   * @param {module:zrender/ZRender} zr\n   */\n  addSelfToZr: function (zr) {\n    this.__zr = zr; // 添加动画\n\n    var animators = this.animators;\n\n    if (animators) {\n      for (var i = 0; i < animators.length; i++) {\n        zr.animation.addAnimator(animators[i]);\n      }\n    }\n\n    if (this.clipPath) {\n      this.clipPath.addSelfToZr(zr);\n    }\n  },\n\n  /**\n   * Remove self from zrender instance.\n   * Not recursively because it will be invoked when element added to storage.\n   * @param {module:zrender/ZRender} zr\n   */\n  removeSelfFromZr: function (zr) {\n    this.__zr = null; // 移除动画\n\n    var animators = this.animators;\n\n    if (animators) {\n      for (var i = 0; i < animators.length; i++) {\n        zr.animation.removeAnimator(animators[i]);\n      }\n    }\n\n    if (this.clipPath) {\n      this.clipPath.removeSelfFromZr(zr);\n    }\n  }\n};\nzrUtil.mixin(Element, Animatable);\nzrUtil.mixin(Element, Transformable);\nzrUtil.mixin(Element, Eventful);\nvar _default = Element;\nmodule.exports = _default;","var PathProxy = require(\"../core/PathProxy\");\n\nvar line = require(\"./line\");\n\nvar cubic = require(\"./cubic\");\n\nvar quadratic = require(\"./quadratic\");\n\nvar arc = require(\"./arc\");\n\nvar _util = require(\"./util\");\n\nvar normalizeRadian = _util.normalizeRadian;\n\nvar curve = require(\"../core/curve\");\n\nvar windingLine = require(\"./windingLine\");\n\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\n\nfunction isAroundEqual(a, b) {\n  return Math.abs(a - b) < EPSILON;\n} // 临时数组\n\n\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\n\nfunction swapExtrema() {\n  var tmp = extrema[0];\n  extrema[0] = extrema[1];\n  extrema[1] = tmp;\n}\n\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n  // Quick reject\n  if (y > y0 && y > y1 && y > y2 && y > y3 || y < y0 && y < y1 && y < y2 && y < y3) {\n    return 0;\n  }\n\n  var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n\n  if (nRoots === 0) {\n    return 0;\n  } else {\n    var w = 0;\n    var nExtrema = -1;\n    var y0_;\n    var y1_;\n\n    for (var i = 0; i < nRoots; i++) {\n      var t = roots[i]; // Avoid winding error when intersection point is the connect point of two line of polygon\n\n      var unit = t === 0 || t === 1 ? 0.5 : 1;\n      var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n\n      if (x_ < x) {\n        // Quick reject\n        continue;\n      }\n\n      if (nExtrema < 0) {\n        nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n\n        if (extrema[1] < extrema[0] && nExtrema > 1) {\n          swapExtrema();\n        }\n\n        y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n\n        if (nExtrema > 1) {\n          y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n        }\n      }\n\n      if (nExtrema === 2) {\n        // 分成三段单调函数\n        if (t < extrema[0]) {\n          w += y0_ < y0 ? unit : -unit;\n        } else if (t < extrema[1]) {\n          w += y1_ < y0_ ? unit : -unit;\n        } else {\n          w += y3 < y1_ ? unit : -unit;\n        }\n      } else {\n        // 分成两段单调函数\n        if (t < extrema[0]) {\n          w += y0_ < y0 ? unit : -unit;\n        } else {\n          w += y3 < y0_ ? unit : -unit;\n        }\n      }\n    }\n\n    return w;\n  }\n}\n\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n  // Quick reject\n  if (y > y0 && y > y1 && y > y2 || y < y0 && y < y1 && y < y2) {\n    return 0;\n  }\n\n  var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n\n  if (nRoots === 0) {\n    return 0;\n  } else {\n    var t = curve.quadraticExtremum(y0, y1, y2);\n\n    if (t >= 0 && t <= 1) {\n      var w = 0;\n      var y_ = curve.quadraticAt(y0, y1, y2, t);\n\n      for (var i = 0; i < nRoots; i++) {\n        // Remove one endpoint.\n        var unit = roots[i] === 0 || roots[i] === 1 ? 0.5 : 1;\n        var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n\n        if (x_ < x) {\n          // Quick reject\n          continue;\n        }\n\n        if (roots[i] < t) {\n          w += y_ < y0 ? unit : -unit;\n        } else {\n          w += y2 < y_ ? unit : -unit;\n        }\n      }\n\n      return w;\n    } else {\n      // Remove one endpoint.\n      var unit = roots[0] === 0 || roots[0] === 1 ? 0.5 : 1;\n      var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n\n      if (x_ < x) {\n        // Quick reject\n        return 0;\n      }\n\n      return y2 < y0 ? unit : -unit;\n    }\n  }\n} // TODO\n// Arc 旋转\n\n\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n  y -= cy;\n\n  if (y > r || y < -r) {\n    return 0;\n  }\n\n  var tmp = Math.sqrt(r * r - y * y);\n  roots[0] = -tmp;\n  roots[1] = tmp;\n  var diff = Math.abs(startAngle - endAngle);\n\n  if (diff < 1e-4) {\n    return 0;\n  }\n\n  if (diff % PI2 < 1e-4) {\n    // Is a circle\n    startAngle = 0;\n    endAngle = PI2;\n    var dir = anticlockwise ? 1 : -1;\n\n    if (x >= roots[0] + cx && x <= roots[1] + cx) {\n      return dir;\n    } else {\n      return 0;\n    }\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var w = 0;\n\n  for (var i = 0; i < 2; i++) {\n    var x_ = roots[i];\n\n    if (x_ + cx > x) {\n      var angle = Math.atan2(y, x_);\n      var dir = anticlockwise ? 1 : -1;\n\n      if (angle < 0) {\n        angle = PI2 + angle;\n      }\n\n      if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {\n        if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n          dir = -dir;\n        }\n\n        w += dir;\n      }\n    }\n  }\n\n  return w;\n}\n\nfunction containPath(data, lineWidth, isStroke, x, y) {\n  var w = 0;\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n\n  for (var i = 0; i < data.length;) {\n    var cmd = data[i++]; // Begin a new subpath\n\n    if (cmd === CMD.M && i > 1) {\n      // Close previous subpath\n      if (!isStroke) {\n        w += windingLine(xi, yi, x0, y0, x, y);\n      } // 如果被任何一个 subpath 包含\n      // if (w !== 0) {\n      //     return true;\n      // }\n\n    }\n\n    if (i === 1) {\n      // 如果第一个命令是 L, C, Q\n      // 则 previous point 同绘制命令的第一个 point\n      //\n      // 第一个命令为 Arc 的情况下会在后面特殊处理\n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n    }\n\n    switch (cmd) {\n      case CMD.M:\n        // moveTo 命令重新创建一个新的 subpath, 并且更新新的起点\n        // 在 closePath 的时候使用\n        x0 = data[i++];\n        y0 = data[i++];\n        xi = x0;\n        yi = y0;\n        break;\n\n      case CMD.L:\n        if (isStroke) {\n          if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // NOTE 在第一个命令为 L, C, Q 的时候会计算出 NaN\n          w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.C:\n        if (isStroke) {\n          if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.Q:\n        if (isStroke) {\n          if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.A:\n        // TODO Arc 判断的开销比较大\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++]; // TODO Arc 旋转\n\n        i += 1;\n        var anticlockwise = 1 - data[i++];\n        var x1 = Math.cos(theta) * rx + cx;\n        var y1 = Math.sin(theta) * ry + cy; // 不是直接使用 arc 命令\n\n        if (i > 1) {\n          w += windingLine(xi, yi, x1, y1, x, y);\n        } else {\n          // 第一个命令起点还未定义\n          x0 = x1;\n          y0 = y1;\n        } // zr 使用scale来模拟椭圆, 这里也对x做一定的缩放\n\n\n        var _x = (x - cx) * ry / rx + cx;\n\n        if (isStroke) {\n          if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n            return true;\n          }\n        } else {\n          w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n        }\n\n        xi = Math.cos(theta + dTheta) * rx + cx;\n        yi = Math.sin(theta + dTheta) * ry + cy;\n        break;\n\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        var width = data[i++];\n        var height = data[i++];\n        var x1 = x0 + width;\n        var y1 = y0 + height;\n\n        if (isStroke) {\n          if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y) || line.containStroke(x1, y0, x1, y1, lineWidth, x, y) || line.containStroke(x1, y1, x0, y1, lineWidth, x, y) || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // FIXME Clockwise ?\n          w += windingLine(x1, y0, x1, y1, x, y);\n          w += windingLine(x0, y1, x0, y0, x, y);\n        }\n\n        break;\n\n      case CMD.Z:\n        if (isStroke) {\n          if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // Close a subpath\n          w += windingLine(xi, yi, x0, y0, x, y); // 如果被任何一个 subpath 包含\n          // FIXME subpaths may overlap\n          // if (w !== 0) {\n          //     return true;\n          // }\n        }\n\n        xi = x0;\n        yi = y0;\n        break;\n    }\n  }\n\n  if (!isStroke && !isAroundEqual(yi, y0)) {\n    w += windingLine(xi, yi, x0, y0, x, y) || 0;\n  }\n\n  return w !== 0;\n}\n\nfunction contain(pathData, x, y) {\n  return containPath(pathData, 0, false, x, y);\n}\n\nfunction containStroke(pathData, lineWidth, x, y) {\n  return containPath(pathData, lineWidth, true, x, y);\n}\n\nexports.contain = contain;\nexports.containStroke = containStroke;","var Path = require(\"../Path\");\n\n/**\n * 圆形\n * @module zrender/shape/Circle\n */\nvar _default = Path.extend({\n  type: 'circle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    // Better stroking in ShapeBundle\n    // Always do it may have performence issue ( fill may be 2x more cost)\n    if (inBundle) {\n      ctx.moveTo(shape.cx + shape.r, shape.cy);\n    } // else {\n    //     if (ctx.allocate && !ctx.data.length) {\n    //         ctx.allocate(ctx.CMD_MEM_SIZE.A);\n    //     }\n    // }\n    // Better stroking in ShapeBundle\n    // ctx.moveTo(shape.cx + shape.r, shape.cy);\n\n\n    ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2, true);\n  }\n});\n\nmodule.exports = _default;","var _core = require(\"./core\");\n\nvar createElement = _core.createElement;\n\nvar util = require(\"../core/util\");\n\nvar logError = require(\"../core/log\");\n\nvar Path = require(\"../graphic/Path\");\n\nvar ZImage = require(\"../graphic/Image\");\n\nvar ZText = require(\"../graphic/Text\");\n\nvar arrayDiff = require(\"../core/arrayDiff2\");\n\nvar GradientManager = require(\"./helper/GradientManager\");\n\nvar ClippathManager = require(\"./helper/ClippathManager\");\n\nvar ShadowManager = require(\"./helper/ShadowManager\");\n\nvar _graphic = require(\"./graphic\");\n\nvar svgPath = _graphic.path;\nvar svgImage = _graphic.image;\nvar svgText = _graphic.text;\n\n/**\n * SVG Painter\n * @module zrender/svg/Painter\n */\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n\nfunction getSvgProxy(el) {\n  if (el instanceof Path) {\n    return svgPath;\n  } else if (el instanceof ZImage) {\n    return svgImage;\n  } else if (el instanceof ZText) {\n    return svgText;\n  } else {\n    return svgPath;\n  }\n}\n\nfunction checkParentAvailable(parent, child) {\n  return child && parent && child.parentNode !== parent;\n}\n\nfunction insertAfter(parent, child, prevSibling) {\n  if (checkParentAvailable(parent, child) && prevSibling) {\n    var nextSibling = prevSibling.nextSibling;\n    nextSibling ? parent.insertBefore(child, nextSibling) : parent.appendChild(child);\n  }\n}\n\nfunction prepend(parent, child) {\n  if (checkParentAvailable(parent, child)) {\n    var firstChild = parent.firstChild;\n    firstChild ? parent.insertBefore(child, firstChild) : parent.appendChild(child);\n  }\n} // function append(parent, child) {\n//     if (checkParentAvailable(parent, child)) {\n//         parent.appendChild(child);\n//     }\n// }\n\n\nfunction remove(parent, child) {\n  if (child && parent && child.parentNode === parent) {\n    parent.removeChild(child);\n  }\n}\n\nfunction getTextSvgElement(displayable) {\n  return displayable.__textSvgEl;\n}\n\nfunction getSvgElement(displayable) {\n  return displayable.__svgEl;\n}\n/**\n * @alias module:zrender/svg/Painter\n * @constructor\n * @param {HTMLElement} root 绘图容器\n * @param {module:zrender/Storage} storage\n * @param {Object} opts\n */\n\n\nvar SVGPainter = function (root, storage, opts, zrId) {\n  this.root = root;\n  this.storage = storage;\n  this._opts = opts = util.extend({}, opts || {});\n  var svgDom = createElement('svg');\n  svgDom.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n  svgDom.setAttribute('version', '1.1');\n  svgDom.setAttribute('baseProfile', 'full');\n  svgDom.style.cssText = 'user-select:none;position:absolute;left:0;top:0;';\n  var bgRoot = createElement('g');\n  svgDom.appendChild(bgRoot);\n  var svgRoot = createElement('g');\n  svgDom.appendChild(svgRoot);\n  this.gradientManager = new GradientManager(zrId, svgRoot);\n  this.clipPathManager = new ClippathManager(zrId, svgRoot);\n  this.shadowManager = new ShadowManager(zrId, svgRoot);\n  var viewport = document.createElement('div');\n  viewport.style.cssText = 'overflow:hidden;position:relative';\n  this._svgDom = svgDom;\n  this._svgRoot = svgRoot;\n  this._backgroundRoot = bgRoot;\n  this._viewport = viewport;\n  root.appendChild(viewport);\n  viewport.appendChild(svgDom);\n  this.resize(opts.width, opts.height);\n  this._visibleList = [];\n};\n\nSVGPainter.prototype = {\n  constructor: SVGPainter,\n  getType: function () {\n    return 'svg';\n  },\n  getViewportRoot: function () {\n    return this._viewport;\n  },\n  getSvgDom: function () {\n    return this._svgDom;\n  },\n  getSvgRoot: function () {\n    return this._svgRoot;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n  refresh: function () {\n    var list = this.storage.getDisplayList(true);\n\n    this._paintList(list);\n  },\n  setBackgroundColor: function (backgroundColor) {\n    // TODO gradient\n    // Insert a bg rect instead of setting background to viewport.\n    // Otherwise, the exported SVG don't have background.\n    if (this._backgroundRoot && this._backgroundNode) {\n      this._backgroundRoot.removeChild(this._backgroundNode);\n    }\n\n    var bgNode = createElement('rect');\n    bgNode.setAttribute('width', this.getWidth());\n    bgNode.setAttribute('height', this.getHeight());\n    bgNode.setAttribute('x', 0);\n    bgNode.setAttribute('y', 0);\n    bgNode.setAttribute('id', 0);\n    bgNode.style.fill = backgroundColor;\n\n    this._backgroundRoot.appendChild(bgNode);\n\n    this._backgroundNode = bgNode;\n  },\n  _paintList: function (list) {\n    this.gradientManager.markAllUnused();\n    this.clipPathManager.markAllUnused();\n    this.shadowManager.markAllUnused();\n    var svgRoot = this._svgRoot;\n    var visibleList = this._visibleList;\n    var listLen = list.length;\n    var newVisibleList = [];\n    var i;\n\n    for (i = 0; i < listLen; i++) {\n      var displayable = list[i];\n      var svgProxy = getSvgProxy(displayable);\n      var svgElement = getSvgElement(displayable) || getTextSvgElement(displayable);\n\n      if (!displayable.invisible) {\n        if (displayable.__dirty) {\n          svgProxy && svgProxy.brush(displayable); // Update clipPath\n\n          this.clipPathManager.update(displayable); // Update gradient and shadow\n\n          if (displayable.style) {\n            this.gradientManager.update(displayable.style.fill);\n            this.gradientManager.update(displayable.style.stroke);\n            this.shadowManager.update(svgElement, displayable);\n          }\n\n          displayable.__dirty = false;\n        }\n\n        newVisibleList.push(displayable);\n      }\n    }\n\n    var diff = arrayDiff(visibleList, newVisibleList);\n    var prevSvgElement; // First do remove, in case element moved to the head and do remove\n    // after add\n\n    for (i = 0; i < diff.length; i++) {\n      var item = diff[i];\n\n      if (item.removed) {\n        for (var k = 0; k < item.count; k++) {\n          var displayable = visibleList[item.indices[k]];\n          var svgElement = getSvgElement(displayable);\n          var textSvgElement = getTextSvgElement(displayable);\n          remove(svgRoot, svgElement);\n          remove(svgRoot, textSvgElement);\n        }\n      }\n    }\n\n    for (i = 0; i < diff.length; i++) {\n      var item = diff[i];\n\n      if (item.added) {\n        for (var k = 0; k < item.count; k++) {\n          var displayable = newVisibleList[item.indices[k]];\n          var svgElement = getSvgElement(displayable);\n          var textSvgElement = getTextSvgElement(displayable);\n          prevSvgElement ? insertAfter(svgRoot, svgElement, prevSvgElement) : prepend(svgRoot, svgElement);\n\n          if (svgElement) {\n            insertAfter(svgRoot, textSvgElement, svgElement);\n          } else if (prevSvgElement) {\n            insertAfter(svgRoot, textSvgElement, prevSvgElement);\n          } else {\n            prepend(svgRoot, textSvgElement);\n          } // Insert text\n\n\n          insertAfter(svgRoot, textSvgElement, svgElement);\n          prevSvgElement = textSvgElement || svgElement || prevSvgElement; // zrender.Text only create textSvgElement.\n\n          this.gradientManager.addWithoutUpdate(svgElement || textSvgElement, displayable);\n          this.shadowManager.addWithoutUpdate(svgElement || textSvgElement, displayable);\n          this.clipPathManager.markUsed(displayable);\n        }\n      } else if (!item.removed) {\n        for (var k = 0; k < item.count; k++) {\n          var displayable = newVisibleList[item.indices[k]];\n          var svgElement = getSvgElement(displayable);\n          var textSvgElement = getTextSvgElement(displayable);\n          var svgElement = getSvgElement(displayable);\n          var textSvgElement = getTextSvgElement(displayable);\n          this.gradientManager.markUsed(displayable);\n          this.gradientManager.addWithoutUpdate(svgElement || textSvgElement, displayable);\n          this.shadowManager.markUsed(displayable);\n          this.shadowManager.addWithoutUpdate(svgElement || textSvgElement, displayable);\n          this.clipPathManager.markUsed(displayable);\n\n          if (textSvgElement) {\n            // Insert text.\n            insertAfter(svgRoot, textSvgElement, svgElement);\n          }\n\n          prevSvgElement = svgElement || textSvgElement || prevSvgElement;\n        }\n      }\n    }\n\n    this.gradientManager.removeUnused();\n    this.clipPathManager.removeUnused();\n    this.shadowManager.removeUnused();\n    this._visibleList = newVisibleList;\n  },\n  _getDefs: function (isForceCreating) {\n    var svgRoot = this._svgDom;\n    var defs = svgRoot.getElementsByTagName('defs');\n\n    if (defs.length === 0) {\n      // Not exist\n      if (isForceCreating) {\n        var defs = svgRoot.insertBefore(createElement('defs'), // Create new tag\n        svgRoot.firstChild // Insert in the front of svg\n        );\n\n        if (!defs.contains) {\n          // IE doesn't support contains method\n          defs.contains = function (el) {\n            var children = defs.children;\n\n            if (!children) {\n              return false;\n            }\n\n            for (var i = children.length - 1; i >= 0; --i) {\n              if (children[i] === el) {\n                return true;\n              }\n            }\n\n            return false;\n          };\n        }\n\n        return defs;\n      } else {\n        return null;\n      }\n    } else {\n      return defs[0];\n    }\n  },\n  resize: function (width, height) {\n    var viewport = this._viewport; // FIXME Why ?\n\n    viewport.style.display = 'none'; // Save input w/h\n\n    var opts = this._opts;\n    width != null && (opts.width = width);\n    height != null && (opts.height = height);\n    width = this._getSize(0);\n    height = this._getSize(1);\n    viewport.style.display = '';\n\n    if (this._width !== width || this._height !== height) {\n      this._width = width;\n      this._height = height;\n      var viewportStyle = viewport.style;\n      viewportStyle.width = width + 'px';\n      viewportStyle.height = height + 'px';\n      var svgRoot = this._svgDom; // Set width by 'svgRoot.width = width' is invalid\n\n      svgRoot.setAttribute('width', width);\n      svgRoot.setAttribute('height', height);\n    }\n\n    if (this._backgroundNode) {\n      this._backgroundNode.setAttribute('width', width);\n\n      this._backgroundNode.setAttribute('height', height);\n    }\n  },\n\n  /**\n   * 获取绘图区域宽度\n   */\n  getWidth: function () {\n    return this._width;\n  },\n\n  /**\n   * 获取绘图区域高度\n   */\n  getHeight: function () {\n    return this._height;\n  },\n  _getSize: function (whIdx) {\n    var opts = this._opts;\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n      return parseFloat(opts[wh]);\n    }\n\n    var root = this.root; // IE8 does not support getComputedStyle, but it use VML.\n\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;\n  },\n  dispose: function () {\n    this.root.innerHTML = '';\n    this._svgRoot = this._backgroundRoot = this._svgDom = this._backgroundNode = this._viewport = this.storage = null;\n  },\n  clear: function () {\n    if (this._viewport) {\n      this.root.removeChild(this._viewport);\n    }\n  },\n  toDataURL: function () {\n    this.refresh();\n    var html = encodeURIComponent(this._svgDom.outerHTML.replace(/></g, '>\\n\\r<'));\n    return 'data:image/svg+xml;charset=UTF-8,' + html;\n  }\n}; // Not supported methods\n\nfunction createMethodNotSupport(method) {\n  return function () {\n    logError('In SVG mode painter not support method \"' + method + '\"');\n  };\n} // Unsuppoted methods\n\n\nutil.each(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'pathToImage'], function (name) {\n  SVGPainter.prototype[name] = createMethodNotSupport(name);\n});\nvar _default = SVGPainter;\nmodule.exports = _default;","var Pattern = function (image, repeat) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {image: ...}`, where this constructor will not be called.\n  this.image = image;\n  this.repeat = repeat; // Can be cloned\n\n  this.type = 'pattern';\n};\n\nPattern.prototype.getCanvasPattern = function (ctx) {\n  return ctx.createPattern(this.image, this.repeat || 'repeat');\n};\n\nvar _default = Pattern;\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Gradient = require(\"./Gradient\");\n\n/**\n * x, y, r are all percent from 0 to 1\n * @param {number} [x=0.5]\n * @param {number} [y=0.5]\n * @param {number} [r=0.5]\n * @param {Array.<Object>} [colorStops]\n * @param {boolean} [globalCoord=false]\n */\nvar RadialGradient = function (x, y, r, colorStops, globalCoord) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {type: 'radial', colorStops: ...}`, where\n  // this constructor will not be called.\n  this.x = x == null ? 0.5 : x;\n  this.y = y == null ? 0.5 : y;\n  this.r = r == null ? 0.5 : r; // Can be cloned\n\n  this.type = 'radial'; // If use global coord\n\n  this.global = globalCoord || false;\n  Gradient.call(this, colorStops);\n};\n\nRadialGradient.prototype = {\n  constructor: RadialGradient\n};\nzrUtil.inherits(RadialGradient, Gradient);\nvar _default = RadialGradient;\nmodule.exports = _default;","/**\n * zrender: 生成唯一id\n *\n * @author errorrik (errorrik@gmail.com)\n */\nvar idStart = 0x0907;\n\nfunction _default() {\n  return idStart++;\n}\n\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Element = require(\"../Element\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\n/**\n * Group是一个容器，可以插入子节点，Group的变换也会被应用到子节点上\n * @module zrender/graphic/Group\n * @example\n *     var Group = require('zrender/container/Group');\n *     var Circle = require('zrender/graphic/shape/Circle');\n *     var g = new Group();\n *     g.position[0] = 100;\n *     g.position[1] = 100;\n *     g.add(new Circle({\n *         style: {\n *             x: 100,\n *             y: 100,\n *             r: 20,\n *         }\n *     }));\n *     zr.add(g);\n */\n\n/**\n * @alias module:zrender/graphic/Group\n * @constructor\n * @extends module:zrender/mixin/Transformable\n * @extends module:zrender/mixin/Eventful\n */\nvar Group = function (opts) {\n  opts = opts || {};\n  Element.call(this, opts);\n\n  for (var key in opts) {\n    if (opts.hasOwnProperty(key)) {\n      this[key] = opts[key];\n    }\n  }\n\n  this._children = [];\n  this.__storage = null;\n  this.__dirty = true;\n};\n\nGroup.prototype = {\n  constructor: Group,\n  isGroup: true,\n\n  /**\n   * @type {string}\n   */\n  type: 'group',\n\n  /**\n   * 所有子孙元素是否响应鼠标事件\n   * @name module:/zrender/container/Group#silent\n   * @type {boolean}\n   * @default false\n   */\n  silent: false,\n\n  /**\n   * @return {Array.<module:zrender/Element>}\n   */\n  children: function () {\n    return this._children.slice();\n  },\n\n  /**\n   * 获取指定 index 的儿子节点\n   * @param  {number} idx\n   * @return {module:zrender/Element}\n   */\n  childAt: function (idx) {\n    return this._children[idx];\n  },\n\n  /**\n   * 获取指定名字的儿子节点\n   * @param  {string} name\n   * @return {module:zrender/Element}\n   */\n  childOfName: function (name) {\n    var children = this._children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].name === name) {\n        return children[i];\n      }\n    }\n  },\n\n  /**\n   * @return {number}\n   */\n  childCount: function () {\n    return this._children.length;\n  },\n\n  /**\n   * 添加子节点到最后\n   * @param {module:zrender/Element} child\n   */\n  add: function (child) {\n    if (child && child !== this && child.parent !== this) {\n      this._children.push(child);\n\n      this._doAdd(child);\n    }\n\n    return this;\n  },\n\n  /**\n   * 添加子节点在 nextSibling 之前\n   * @param {module:zrender/Element} child\n   * @param {module:zrender/Element} nextSibling\n   */\n  addBefore: function (child, nextSibling) {\n    if (child && child !== this && child.parent !== this && nextSibling && nextSibling.parent === this) {\n      var children = this._children;\n      var idx = children.indexOf(nextSibling);\n\n      if (idx >= 0) {\n        children.splice(idx, 0, child);\n\n        this._doAdd(child);\n      }\n    }\n\n    return this;\n  },\n  _doAdd: function (child) {\n    if (child.parent) {\n      child.parent.remove(child);\n    }\n\n    child.parent = this;\n    var storage = this.__storage;\n    var zr = this.__zr;\n\n    if (storage && storage !== child.__storage) {\n      storage.addToStorage(child);\n\n      if (child instanceof Group) {\n        child.addChildrenToStorage(storage);\n      }\n    }\n\n    zr && zr.refresh();\n  },\n\n  /**\n   * 移除子节点\n   * @param {module:zrender/Element} child\n   */\n  remove: function (child) {\n    var zr = this.__zr;\n    var storage = this.__storage;\n    var children = this._children;\n    var idx = zrUtil.indexOf(children, child);\n\n    if (idx < 0) {\n      return this;\n    }\n\n    children.splice(idx, 1);\n    child.parent = null;\n\n    if (storage) {\n      storage.delFromStorage(child);\n\n      if (child instanceof Group) {\n        child.delChildrenFromStorage(storage);\n      }\n    }\n\n    zr && zr.refresh();\n    return this;\n  },\n\n  /**\n   * 移除所有子节点\n   */\n  removeAll: function () {\n    var children = this._children;\n    var storage = this.__storage;\n    var child;\n    var i;\n\n    for (i = 0; i < children.length; i++) {\n      child = children[i];\n\n      if (storage) {\n        storage.delFromStorage(child);\n\n        if (child instanceof Group) {\n          child.delChildrenFromStorage(storage);\n        }\n      }\n\n      child.parent = null;\n    }\n\n    children.length = 0;\n    return this;\n  },\n\n  /**\n   * 遍历所有子节点\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  eachChild: function (cb, context) {\n    var children = this._children;\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n      cb.call(context, child, i);\n    }\n\n    return this;\n  },\n\n  /**\n   * 深度优先遍历所有子孙节点\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      cb.call(context, child);\n\n      if (child.type === 'group') {\n        child.traverse(cb, context);\n      }\n    }\n\n    return this;\n  },\n  addChildrenToStorage: function (storage) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      storage.addToStorage(child);\n\n      if (child instanceof Group) {\n        child.addChildrenToStorage(storage);\n      }\n    }\n  },\n  delChildrenFromStorage: function (storage) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      storage.delFromStorage(child);\n\n      if (child instanceof Group) {\n        child.delChildrenFromStorage(storage);\n      }\n    }\n  },\n  dirty: function () {\n    this.__dirty = true;\n    this.__zr && this.__zr.refresh();\n    return this;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function (includeChildren) {\n    // TODO Caching\n    var rect = null;\n    var tmpRect = new BoundingRect(0, 0, 0, 0);\n    var children = includeChildren || this._children;\n    var tmpMat = [];\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n\n      if (child.ignore || child.invisible) {\n        continue;\n      }\n\n      var childRect = child.getBoundingRect();\n      var transform = child.getLocalTransform(tmpMat); // TODO\n      // The boundingRect cacluated by transforming original\n      // rect may be bigger than the actual bundingRect when rotation\n      // is used. (Consider a circle rotated aginst its center, where\n      // the actual boundingRect should be the same as that not be\n      // rotated.) But we can not find better approach to calculate\n      // actual boundingRect yet, considering performance.\n\n      if (transform) {\n        tmpRect.copy(childRect);\n        tmpRect.applyTransform(transform);\n        rect = rect || tmpRect.clone();\n        rect.union(tmpRect);\n      } else {\n        rect = rect || childRect.clone();\n        rect.union(childRect);\n      }\n    }\n\n    return rect || tmpRect;\n  }\n};\nzrUtil.inherits(Group, Element);\nvar _default = Group;\nmodule.exports = _default;","var vec2 = require(\"./vector\");\n\nvar curve = require(\"./curve\");\n\n/**\n * @author Yi Shen(https://github.com/pissang)\n */\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\n/**\n * 从顶点数组中计算出最小包围盒，写入`min`和`max`中\n * @module zrender/core/bbox\n * @param {Array<Object>} points 顶点数组\n * @param {number} min\n * @param {number} max\n */\n\nfunction fromPoints(points, min, max) {\n  if (points.length === 0) {\n    return;\n  }\n\n  var p = points[0];\n  var left = p[0];\n  var right = p[0];\n  var top = p[1];\n  var bottom = p[1];\n  var i;\n\n  for (i = 1; i < points.length; i++) {\n    p = points[i];\n    left = mathMin(left, p[0]);\n    right = mathMax(right, p[0]);\n    top = mathMin(top, p[1]);\n    bottom = mathMax(bottom, p[1]);\n  }\n\n  min[0] = left;\n  min[1] = top;\n  max[0] = right;\n  max[1] = bottom;\n}\n/**\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromLine(x0, y0, x1, y1, min, max) {\n  min[0] = mathMin(x0, x1);\n  min[1] = mathMin(y0, y1);\n  max[0] = mathMax(x0, x1);\n  max[1] = mathMax(y0, y1);\n}\n\nvar xDim = [];\nvar yDim = [];\n/**\n * 从三阶贝塞尔曲线(p0, p1, p2, p3)中计算出最小包围盒，写入`min`和`max`中\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x3\n * @param {number} y3\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\nfunction fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n  var cubicExtrema = curve.cubicExtrema;\n  var cubicAt = curve.cubicAt;\n  var i;\n  var n = cubicExtrema(x0, x1, x2, x3, xDim);\n  min[0] = Infinity;\n  min[1] = Infinity;\n  max[0] = -Infinity;\n  max[1] = -Infinity;\n\n  for (i = 0; i < n; i++) {\n    var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n    min[0] = mathMin(x, min[0]);\n    max[0] = mathMax(x, max[0]);\n  }\n\n  n = cubicExtrema(y0, y1, y2, y3, yDim);\n\n  for (i = 0; i < n; i++) {\n    var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n    min[1] = mathMin(y, min[1]);\n    max[1] = mathMax(y, max[1]);\n  }\n\n  min[0] = mathMin(x0, min[0]);\n  max[0] = mathMax(x0, max[0]);\n  min[0] = mathMin(x3, min[0]);\n  max[0] = mathMax(x3, max[0]);\n  min[1] = mathMin(y0, min[1]);\n  max[1] = mathMax(y0, max[1]);\n  min[1] = mathMin(y3, min[1]);\n  max[1] = mathMax(y3, max[1]);\n}\n/**\n * 从二阶贝塞尔曲线(p0, p1, p2)中计算出最小包围盒，写入`min`和`max`中\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n  var quadraticExtremum = curve.quadraticExtremum;\n  var quadraticAt = curve.quadraticAt; // Find extremities, where derivative in x dim or y dim is zero\n\n  var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n  var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n  var x = quadraticAt(x0, x1, x2, tx);\n  var y = quadraticAt(y0, y1, y2, ty);\n  min[0] = mathMin(x0, x2, x);\n  min[1] = mathMin(y0, y2, y);\n  max[0] = mathMax(x0, x2, x);\n  max[1] = mathMax(y0, y2, y);\n}\n/**\n * 从圆弧中计算出最小包围盒，写入`min`和`max`中\n * @method\n * @memberOf module:zrender/core/bbox\n * @param {number} x\n * @param {number} y\n * @param {number} rx\n * @param {number} ry\n * @param {number} startAngle\n * @param {number} endAngle\n * @param {number} anticlockwise\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n  var vec2Min = vec2.min;\n  var vec2Max = vec2.max;\n  var diff = Math.abs(startAngle - endAngle);\n\n  if (diff % PI2 < 1e-4 && diff > 1e-4) {\n    // Is a circle\n    min[0] = x - rx;\n    min[1] = y - ry;\n    max[0] = x + rx;\n    max[1] = y + ry;\n    return;\n  }\n\n  start[0] = mathCos(startAngle) * rx + x;\n  start[1] = mathSin(startAngle) * ry + y;\n  end[0] = mathCos(endAngle) * rx + x;\n  end[1] = mathSin(endAngle) * ry + y;\n  vec2Min(min, start, end);\n  vec2Max(max, start, end); // Thresh to [0, Math.PI * 2]\n\n  startAngle = startAngle % PI2;\n\n  if (startAngle < 0) {\n    startAngle = startAngle + PI2;\n  }\n\n  endAngle = endAngle % PI2;\n\n  if (endAngle < 0) {\n    endAngle = endAngle + PI2;\n  }\n\n  if (startAngle > endAngle && !anticlockwise) {\n    endAngle += PI2;\n  } else if (startAngle < endAngle && anticlockwise) {\n    startAngle += PI2;\n  }\n\n  if (anticlockwise) {\n    var tmp = endAngle;\n    endAngle = startAngle;\n    startAngle = tmp;\n  } // var number = 0;\n  // var step = (anticlockwise ? -Math.PI : Math.PI) / 2;\n\n\n  for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n    if (angle > startAngle) {\n      extremity[0] = mathCos(angle) * rx + x;\n      extremity[1] = mathSin(angle) * ry + y;\n      vec2Min(min, extremity, min);\n      vec2Max(max, extremity, max);\n    }\n  }\n}\n\nexports.fromPoints = fromPoints;\nexports.fromLine = fromLine;\nexports.fromCubic = fromCubic;\nexports.fromQuadratic = fromQuadratic;\nexports.fromArc = fromArc;","var curve = require(\"../core/curve\");\n\n/**\n * 三次贝塞尔曲线描边包含判断\n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  x2\n * @param  {number}  y2\n * @param  {number}  x3\n * @param  {number}  y3\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l) {\n    return false;\n  }\n\n  var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n  return d <= _l / 2;\n}\n\nexports.containStroke = containStroke;","var BoundingRect = require(\"../core/BoundingRect\");\n\nvar imageHelper = require(\"../graphic/helper/image\");\n\nvar _util = require(\"../core/util\");\n\nvar getContext = _util.getContext;\nvar extend = _util.extend;\nvar retrieve2 = _util.retrieve2;\nvar retrieve3 = _util.retrieve3;\nvar trim = _util.trim;\nvar textWidthCache = {};\nvar textWidthCacheCounter = 0;\nvar TEXT_CACHE_MAX = 5000;\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nvar DEFAULT_FONT = '12px sans-serif'; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  methods[name] = fn;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {number} width\n */\n\n\nfunction getWidth(text, font) {\n  font = font || DEFAULT_FONT;\n  var key = text + ':' + font;\n\n  if (textWidthCache[key]) {\n    return textWidthCache[key];\n  }\n\n  var textLines = (text + '').split('\\n');\n  var width = 0;\n\n  for (var i = 0, l = textLines.length; i < l; i++) {\n    // textContain.measureText may be overrided in SVG or VML\n    width = Math.max(measureText(textLines[i], font).width, width);\n  }\n\n  if (textWidthCacheCounter > TEXT_CACHE_MAX) {\n    textWidthCacheCounter = 0;\n    textWidthCache = {};\n  }\n\n  textWidthCacheCounter++;\n  textWidthCache[key] = width;\n  return width;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {string} [textAlign='left']\n * @param {string} [textVerticalAlign='top']\n * @param {Array.<number>} [textPadding]\n * @param {Object} [rich]\n * @param {Object} [truncate]\n * @return {Object} {x, y, width, height, lineHeight}\n */\n\n\nfunction getBoundingRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) {\n  return rich ? getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) : getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, truncate);\n}\n\nfunction getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, truncate) {\n  var contentBlock = parsePlainText(text, font, textPadding, textLineHeight, truncate);\n  var outerWidth = getWidth(text, font);\n\n  if (textPadding) {\n    outerWidth += textPadding[1] + textPadding[3];\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  var rect = new BoundingRect(x, y, outerWidth, outerHeight);\n  rect.lineHeight = contentBlock.lineHeight;\n  return rect;\n}\n\nfunction getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) {\n  var contentBlock = parseRichText(text, {\n    rich: rich,\n    truncate: truncate,\n    font: font,\n    textAlign: textAlign,\n    textPadding: textPadding,\n    textLineHeight: textLineHeight\n  });\n  var outerWidth = contentBlock.outerWidth;\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  return new BoundingRect(x, y, outerWidth, outerHeight);\n}\n/**\n * @public\n * @param {number} x\n * @param {number} width\n * @param {string} [textAlign='left']\n * @return {number} Adjusted x.\n */\n\n\nfunction adjustTextX(x, width, textAlign) {\n  // FIXME Right to left language\n  if (textAlign === 'right') {\n    x -= width;\n  } else if (textAlign === 'center') {\n    x -= width / 2;\n  }\n\n  return x;\n}\n/**\n * @public\n * @param {number} y\n * @param {number} height\n * @param {string} [textVerticalAlign='top']\n * @return {number} Adjusted y.\n */\n\n\nfunction adjustTextY(y, height, textVerticalAlign) {\n  if (textVerticalAlign === 'middle') {\n    y -= height / 2;\n  } else if (textVerticalAlign === 'bottom') {\n    y -= height;\n  }\n\n  return y;\n}\n/**\n * Follow same interface to `Displayable.prototype.calculateTextPosition`.\n * @public\n * @param {Obejct} [out] Prepared out object. If not input, auto created in the method.\n * @param {module:zrender/graphic/Style} style where `textPosition` and `textDistance` are visited.\n * @param {Object} rect {x, y, width, height} Rect of the host elment, according to which the text positioned.\n * @return {Object} The input `out`. Set: {x, y, textAlign, textVerticalAlign}\n */\n\n\nfunction calculateTextPosition(out, style, rect) {\n  var textPosition = style.textPosition;\n  var distance = style.textDistance;\n  var x = rect.x;\n  var y = rect.y;\n  distance = distance || 0;\n  var height = rect.height;\n  var width = rect.width;\n  var halfHeight = height / 2;\n  var textAlign = 'left';\n  var textVerticalAlign = 'top';\n\n  switch (textPosition) {\n    case 'left':\n      x -= distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'right':\n      x += distance + width;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'top':\n      x += width / 2;\n      y -= distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'bottom':\n      x += width / 2;\n      y += height + distance;\n      textAlign = 'center';\n      break;\n\n    case 'inside':\n      x += width / 2;\n      y += halfHeight;\n      textAlign = 'center';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideLeft':\n      x += distance;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideRight':\n      x += width - distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideTop':\n      x += width / 2;\n      y += distance;\n      textAlign = 'center';\n      break;\n\n    case 'insideBottom':\n      x += width / 2;\n      y += height - distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideTopLeft':\n      x += distance;\n      y += distance;\n      break;\n\n    case 'insideTopRight':\n      x += width - distance;\n      y += distance;\n      textAlign = 'right';\n      break;\n\n    case 'insideBottomLeft':\n      x += distance;\n      y += height - distance;\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideBottomRight':\n      x += width - distance;\n      y += height - distance;\n      textAlign = 'right';\n      textVerticalAlign = 'bottom';\n      break;\n  }\n\n  out = out || {};\n  out.x = x;\n  out.y = y;\n  out.textAlign = textAlign;\n  out.textVerticalAlign = textVerticalAlign;\n  return out;\n}\n/**\n * To be removed. But still do not remove in case that some one has imported it.\n * @deprecated\n * @public\n * @param {stirng} textPosition\n * @param {Object} rect {x, y, width, height}\n * @param {number} distance\n * @return {Object} {x, y, textAlign, textVerticalAlign}\n */\n\n\nfunction adjustTextPositionOnRect(textPosition, rect, distance) {\n  var dummyStyle = {\n    textPosition: textPosition,\n    textDistance: distance\n  };\n  return calculateTextPosition({}, dummyStyle, rect);\n}\n/**\n * Show ellipsis if overflow.\n *\n * @public\n * @param  {string} text\n * @param  {string} containerWidth\n * @param  {string} font\n * @param  {number} [ellipsis='...']\n * @param  {Object} [options]\n * @param  {number} [options.maxIterations=3]\n * @param  {number} [options.minChar=0] If truncate result are less\n *                  then minChar, ellipsis will not show, which is\n *                  better for user hint in some cases.\n * @param  {number} [options.placeholder=''] When all truncated, use the placeholder.\n * @return {string}\n */\n\n\nfunction truncateText(text, containerWidth, font, ellipsis, options) {\n  if (!containerWidth) {\n    return '';\n  }\n\n  var textLines = (text + '').split('\\n');\n  options = prepareTruncateOptions(containerWidth, font, ellipsis, options); // FIXME\n  // It is not appropriate that every line has '...' when truncate multiple lines.\n\n  for (var i = 0, len = textLines.length; i < len; i++) {\n    textLines[i] = truncateSingleLine(textLines[i], options);\n  }\n\n  return textLines.join('\\n');\n}\n\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n  options = extend({}, options);\n  options.font = font;\n  var ellipsis = retrieve2(ellipsis, '...');\n  options.maxIterations = retrieve2(options.maxIterations, 2);\n  var minChar = options.minChar = retrieve2(options.minChar, 0); // FIXME\n  // Other languages?\n\n  options.cnCharWidth = getWidth('国', font); // FIXME\n  // Consider proportional font?\n\n  var ascCharWidth = options.ascCharWidth = getWidth('a', font);\n  options.placeholder = retrieve2(options.placeholder, ''); // Example 1: minChar: 3, text: 'asdfzxcv', truncate result: 'asdf', but not: 'a...'.\n  // Example 2: minChar: 3, text: '维度', truncate result: '维', but not: '...'.\n\n  var contentWidth = containerWidth = Math.max(0, containerWidth - 1); // Reserve some gap.\n\n  for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n    contentWidth -= ascCharWidth;\n  }\n\n  var ellipsisWidth = getWidth(ellipsis, font);\n\n  if (ellipsisWidth > contentWidth) {\n    ellipsis = '';\n    ellipsisWidth = 0;\n  }\n\n  contentWidth = containerWidth - ellipsisWidth;\n  options.ellipsis = ellipsis;\n  options.ellipsisWidth = ellipsisWidth;\n  options.contentWidth = contentWidth;\n  options.containerWidth = containerWidth;\n  return options;\n}\n\nfunction truncateSingleLine(textLine, options) {\n  var containerWidth = options.containerWidth;\n  var font = options.font;\n  var contentWidth = options.contentWidth;\n\n  if (!containerWidth) {\n    return '';\n  }\n\n  var lineWidth = getWidth(textLine, font);\n\n  if (lineWidth <= containerWidth) {\n    return textLine;\n  }\n\n  for (var j = 0;; j++) {\n    if (lineWidth <= contentWidth || j >= options.maxIterations) {\n      textLine += options.ellipsis;\n      break;\n    }\n\n    var subLength = j === 0 ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth) : lineWidth > 0 ? Math.floor(textLine.length * contentWidth / lineWidth) : 0;\n    textLine = textLine.substr(0, subLength);\n    lineWidth = getWidth(textLine, font);\n  }\n\n  if (textLine === '') {\n    textLine = options.placeholder;\n  }\n\n  return textLine;\n}\n\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n  var width = 0;\n  var i = 0;\n\n  for (var len = text.length; i < len && width < contentWidth; i++) {\n    var charCode = text.charCodeAt(i);\n    width += 0 <= charCode && charCode <= 127 ? ascCharWidth : cnCharWidth;\n  }\n\n  return i;\n}\n/**\n * @public\n * @param {string} font\n * @return {number} line height\n */\n\n\nfunction getLineHeight(font) {\n  // FIXME A rough approach.\n  return getWidth('国', font);\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {Object} width\n */\n\n\nfunction measureText(text, font) {\n  return methods.measureText(text, font);\n} // Avoid assign to an exported variable, for transforming to cjs.\n\n\nmethods.measureText = function (text, font) {\n  var ctx = getContext();\n  ctx.font = font || DEFAULT_FONT;\n  return ctx.measureText(text);\n};\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {Object} [truncate]\n * @return {Object} block: {lineHeight, lines, height, outerHeight, canCacheByTextString}\n *  Notice: for performance, do not calculate outerWidth util needed.\n *  `canCacheByTextString` means the result `lines` is only determined by the input `text`.\n *  Thus we can simply comparing the `input` text to determin whether the result changed,\n *  without travel the result `lines`.\n */\n\n\nfunction parsePlainText(text, font, padding, textLineHeight, truncate) {\n  text != null && (text += '');\n  var lineHeight = retrieve2(textLineHeight, getLineHeight(font));\n  var lines = text ? text.split('\\n') : [];\n  var height = lines.length * lineHeight;\n  var outerHeight = height;\n  var canCacheByTextString = true;\n\n  if (padding) {\n    outerHeight += padding[0] + padding[2];\n  }\n\n  if (text && truncate) {\n    canCacheByTextString = false;\n    var truncOuterHeight = truncate.outerHeight;\n    var truncOuterWidth = truncate.outerWidth;\n\n    if (truncOuterHeight != null && outerHeight > truncOuterHeight) {\n      text = '';\n      lines = [];\n    } else if (truncOuterWidth != null) {\n      var options = prepareTruncateOptions(truncOuterWidth - (padding ? padding[1] + padding[3] : 0), font, truncate.ellipsis, {\n        minChar: truncate.minChar,\n        placeholder: truncate.placeholder\n      }); // FIXME\n      // It is not appropriate that every line has '...' when truncate multiple lines.\n\n      for (var i = 0, len = lines.length; i < len; i++) {\n        lines[i] = truncateSingleLine(lines[i], options);\n      }\n    }\n  }\n\n  return {\n    lines: lines,\n    height: height,\n    outerHeight: outerHeight,\n    lineHeight: lineHeight,\n    canCacheByTextString: canCacheByTextString\n  };\n}\n/**\n * For example: 'some text {a|some text}other text{b|some text}xxx{c|}xxx'\n * Also consider 'bbbb{a|xxx\\nzzz}xxxx\\naaaa'.\n *\n * @public\n * @param {string} text\n * @param {Object} style\n * @return {Object} block\n * {\n *      width,\n *      height,\n *      lines: [{\n *          lineHeight,\n *          width,\n *          tokens: [[{\n *              styleName,\n *              text,\n *              width,      // include textPadding\n *              height,     // include textPadding\n *              textWidth, // pure text width\n *              textHeight, // pure text height\n *              lineHeihgt,\n *              font,\n *              textAlign,\n *              textVerticalAlign\n *          }], [...], ...]\n *      }, ...]\n * }\n * If styleName is undefined, it is plain text.\n */\n\n\nfunction parseRichText(text, style) {\n  var contentBlock = {\n    lines: [],\n    width: 0,\n    height: 0\n  };\n  text != null && (text += '');\n\n  if (!text) {\n    return contentBlock;\n  }\n\n  var lastIndex = STYLE_REG.lastIndex = 0;\n  var result;\n\n  while ((result = STYLE_REG.exec(text)) != null) {\n    var matchedIndex = result.index;\n\n    if (matchedIndex > lastIndex) {\n      pushTokens(contentBlock, text.substring(lastIndex, matchedIndex));\n    }\n\n    pushTokens(contentBlock, result[2], result[1]);\n    lastIndex = STYLE_REG.lastIndex;\n  }\n\n  if (lastIndex < text.length) {\n    pushTokens(contentBlock, text.substring(lastIndex, text.length));\n  }\n\n  var lines = contentBlock.lines;\n  var contentHeight = 0;\n  var contentWidth = 0; // For `textWidth: 100%`\n\n  var pendingList = [];\n  var stlPadding = style.textPadding;\n  var truncate = style.truncate;\n  var truncateWidth = truncate && truncate.outerWidth;\n  var truncateHeight = truncate && truncate.outerHeight;\n\n  if (stlPadding) {\n    truncateWidth != null && (truncateWidth -= stlPadding[1] + stlPadding[3]);\n    truncateHeight != null && (truncateHeight -= stlPadding[0] + stlPadding[2]);\n  } // Calculate layout info of tokens.\n\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    var lineHeight = 0;\n    var lineWidth = 0;\n\n    for (var j = 0; j < line.tokens.length; j++) {\n      var token = line.tokens[j];\n      var tokenStyle = token.styleName && style.rich[token.styleName] || {}; // textPadding should not inherit from style.\n\n      var textPadding = token.textPadding = tokenStyle.textPadding; // textFont has been asigned to font by `normalizeStyle`.\n\n      var font = token.font = tokenStyle.font || style.font; // textHeight can be used when textVerticalAlign is specified in token.\n\n      var tokenHeight = token.textHeight = retrieve2( // textHeight should not be inherited, consider it can be specified\n      // as box height of the block.\n      tokenStyle.textHeight, getLineHeight(font));\n      textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n      token.height = tokenHeight;\n      token.lineHeight = retrieve3(tokenStyle.textLineHeight, style.textLineHeight, tokenHeight);\n      token.textAlign = tokenStyle && tokenStyle.textAlign || style.textAlign;\n      token.textVerticalAlign = tokenStyle && tokenStyle.textVerticalAlign || 'middle';\n\n      if (truncateHeight != null && contentHeight + token.lineHeight > truncateHeight) {\n        return {\n          lines: [],\n          width: 0,\n          height: 0\n        };\n      }\n\n      token.textWidth = getWidth(token.text, font);\n      var tokenWidth = tokenStyle.textWidth;\n      var tokenWidthNotSpecified = tokenWidth == null || tokenWidth === 'auto'; // Percent width, can be `100%`, can be used in drawing separate\n      // line when box width is needed to be auto.\n\n      if (typeof tokenWidth === 'string' && tokenWidth.charAt(tokenWidth.length - 1) === '%') {\n        token.percentWidth = tokenWidth;\n        pendingList.push(token);\n        tokenWidth = 0; // Do not truncate in this case, because there is no user case\n        // and it is too complicated.\n      } else {\n        if (tokenWidthNotSpecified) {\n          tokenWidth = token.textWidth; // FIXME: If image is not loaded and textWidth is not specified, calling\n          // `getBoundingRect()` will not get correct result.\n\n          var textBackgroundColor = tokenStyle.textBackgroundColor;\n          var bgImg = textBackgroundColor && textBackgroundColor.image; // Use cases:\n          // (1) If image is not loaded, it will be loaded at render phase and call\n          // `dirty()` and `textBackgroundColor.image` will be replaced with the loaded\n          // image, and then the right size will be calculated here at the next tick.\n          // See `graphic/helper/text.js`.\n          // (2) If image loaded, and `textBackgroundColor.image` is image src string,\n          // use `imageHelper.findExistImage` to find cached image.\n          // `imageHelper.findExistImage` will always be called here before\n          // `imageHelper.createOrUpdateImage` in `graphic/helper/text.js#renderRichText`\n          // which ensures that image will not be rendered before correct size calcualted.\n\n          if (bgImg) {\n            bgImg = imageHelper.findExistImage(bgImg);\n\n            if (imageHelper.isImageReady(bgImg)) {\n              tokenWidth = Math.max(tokenWidth, bgImg.width * tokenHeight / bgImg.height);\n            }\n          }\n        }\n\n        var paddingW = textPadding ? textPadding[1] + textPadding[3] : 0;\n        tokenWidth += paddingW;\n        var remianTruncWidth = truncateWidth != null ? truncateWidth - lineWidth : null;\n\n        if (remianTruncWidth != null && remianTruncWidth < tokenWidth) {\n          if (!tokenWidthNotSpecified || remianTruncWidth < paddingW) {\n            token.text = '';\n            token.textWidth = tokenWidth = 0;\n          } else {\n            token.text = truncateText(token.text, remianTruncWidth - paddingW, font, truncate.ellipsis, {\n              minChar: truncate.minChar\n            });\n            token.textWidth = getWidth(token.text, font);\n            tokenWidth = token.textWidth + paddingW;\n          }\n        }\n      }\n\n      lineWidth += token.width = tokenWidth;\n      tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n    }\n\n    line.width = lineWidth;\n    line.lineHeight = lineHeight;\n    contentHeight += lineHeight;\n    contentWidth = Math.max(contentWidth, lineWidth);\n  }\n\n  contentBlock.outerWidth = contentBlock.width = retrieve2(style.textWidth, contentWidth);\n  contentBlock.outerHeight = contentBlock.height = retrieve2(style.textHeight, contentHeight);\n\n  if (stlPadding) {\n    contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n    contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n  }\n\n  for (var i = 0; i < pendingList.length; i++) {\n    var token = pendingList[i];\n    var percentWidth = token.percentWidth; // Should not base on outerWidth, because token can not be placed out of padding.\n\n    token.width = parseInt(percentWidth, 10) / 100 * contentWidth;\n  }\n\n  return contentBlock;\n}\n\nfunction pushTokens(block, str, styleName) {\n  var isEmptyStr = str === '';\n  var strs = str.split('\\n');\n  var lines = block.lines;\n\n  for (var i = 0; i < strs.length; i++) {\n    var text = strs[i];\n    var token = {\n      styleName: styleName,\n      text: text,\n      isLineHolder: !text && !isEmptyStr\n    }; // The first token should be appended to the last line.\n\n    if (!i) {\n      var tokens = (lines[lines.length - 1] || (lines[0] = {\n        tokens: []\n      })).tokens; // Consider cases:\n      // (1) ''.split('\\n') => ['', '\\n', ''], the '' at the first item\n      // (which is a placeholder) should be replaced by new token.\n      // (2) A image backage, where token likes {a|}.\n      // (3) A redundant '' will affect textAlign in line.\n      // (4) tokens with the same tplName should not be merged, because\n      // they should be displayed in different box (with border and padding).\n\n      var tokensLen = tokens.length;\n      tokensLen === 1 && tokens[0].isLineHolder ? tokens[0] = token : // Consider text is '', only insert when it is the \"lineHolder\" or\n      // \"emptyStr\". Otherwise a redundant '' will affect textAlign in line.\n      (text || !tokensLen || isEmptyStr) && tokens.push(token);\n    } // Other tokens always start a new line.\n    else {\n        // If there is '', insert it as a placeholder.\n        lines.push({\n          tokens: [token]\n        });\n      }\n  }\n}\n\nfunction makeFont(style) {\n  // FIXME in node-canvas fontWeight is before fontStyle\n  // Use `fontSize` `fontFamily` to check whether font properties are defined.\n  var font = (style.fontSize || style.fontFamily) && [style.fontStyle, style.fontWeight, (style.fontSize || 12) + 'px', // If font properties are defined, `fontFamily` should not be ignored.\n  style.fontFamily || 'sans-serif'].join(' ');\n  return font && trim(font) || style.textFont || style.font;\n}\n\nexports.DEFAULT_FONT = DEFAULT_FONT;\nexports.$override = $override;\nexports.getWidth = getWidth;\nexports.getBoundingRect = getBoundingRect;\nexports.adjustTextX = adjustTextX;\nexports.adjustTextY = adjustTextY;\nexports.calculateTextPosition = calculateTextPosition;\nexports.adjustTextPositionOnRect = adjustTextPositionOnRect;\nexports.truncateText = truncateText;\nexports.getLineHeight = getLineHeight;\nexports.measureText = measureText;\nexports.parsePlainText = parsePlainText;\nexports.parseRichText = parseRichText;\nexports.makeFont = makeFont;","var logError = require(\"../core/log\");\n\nvar vmlCore = require(\"./core\");\n\nvar _util = require(\"../core/util\");\n\nvar each = _util.each;\n\n/**\n * VML Painter.\n *\n * @module zrender/vml/Painter\n */\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n/**\n * @alias module:zrender/vml/Painter\n */\n\n\nfunction VMLPainter(root, storage) {\n  vmlCore.initVML();\n  this.root = root;\n  this.storage = storage;\n  var vmlViewport = document.createElement('div');\n  var vmlRoot = document.createElement('div');\n  vmlViewport.style.cssText = 'display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;';\n  vmlRoot.style.cssText = 'position:absolute;left:0;top:0;';\n  root.appendChild(vmlViewport);\n  this._vmlRoot = vmlRoot;\n  this._vmlViewport = vmlViewport;\n  this.resize(); // Modify storage\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n\n    if (el) {\n      el.onRemove && el.onRemove(vmlRoot);\n    }\n  };\n\n  storage.addToStorage = function (el) {\n    // Displayable already has a vml node\n    el.onAdd && el.onAdd(vmlRoot);\n    oldAddToStorage.call(storage, el);\n  };\n\n  this._firstPaint = true;\n}\n\nVMLPainter.prototype = {\n  constructor: VMLPainter,\n  getType: function () {\n    return 'vml';\n  },\n\n  /**\n   * @return {HTMLDivElement}\n   */\n  getViewportRoot: function () {\n    return this._vmlViewport;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n\n  /**\n   * 刷新\n   */\n  refresh: function () {\n    var list = this.storage.getDisplayList(true, true);\n\n    this._paintList(list);\n  },\n  _paintList: function (list) {\n    var vmlRoot = this._vmlRoot;\n\n    for (var i = 0; i < list.length; i++) {\n      var el = list[i];\n\n      if (el.invisible || el.ignore) {\n        if (!el.__alreadyNotVisible) {\n          el.onRemove(vmlRoot);\n        } // Set as already invisible\n\n\n        el.__alreadyNotVisible = true;\n      } else {\n        if (el.__alreadyNotVisible) {\n          el.onAdd(vmlRoot);\n        }\n\n        el.__alreadyNotVisible = false;\n\n        if (el.__dirty) {\n          el.beforeBrush && el.beforeBrush();\n          (el.brushVML || el.brush).call(el, vmlRoot);\n          el.afterBrush && el.afterBrush();\n        }\n      }\n\n      el.__dirty = false;\n    }\n\n    if (this._firstPaint) {\n      // Detached from document at first time\n      // to avoid page refreshing too many times\n      // FIXME 如果每次都先 removeChild 可能会导致一些填充和描边的效果改变\n      this._vmlViewport.appendChild(vmlRoot);\n\n      this._firstPaint = false;\n    }\n  },\n  resize: function (width, height) {\n    var width = width == null ? this._getWidth() : width;\n    var height = height == null ? this._getHeight() : height;\n\n    if (this._width !== width || this._height !== height) {\n      this._width = width;\n      this._height = height;\n      var vmlViewportStyle = this._vmlViewport.style;\n      vmlViewportStyle.width = width + 'px';\n      vmlViewportStyle.height = height + 'px';\n    }\n  },\n  dispose: function () {\n    this.root.innerHTML = '';\n    this._vmlRoot = this._vmlViewport = this.storage = null;\n  },\n  getWidth: function () {\n    return this._width;\n  },\n  getHeight: function () {\n    return this._height;\n  },\n  clear: function () {\n    if (this._vmlViewport) {\n      this.root.removeChild(this._vmlViewport);\n    }\n  },\n  _getWidth: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientWidth || parseInt10(stl.width)) - parseInt10(stl.paddingLeft) - parseInt10(stl.paddingRight) | 0;\n  },\n  _getHeight: function () {\n    var root = this.root;\n    var stl = root.currentStyle;\n    return (root.clientHeight || parseInt10(stl.height)) - parseInt10(stl.paddingTop) - parseInt10(stl.paddingBottom) | 0;\n  }\n}; // Not supported methods\n\nfunction createMethodNotSupport(method) {\n  return function () {\n    logError('In IE8.0 VML mode painter not support method \"' + method + '\"');\n  };\n} // Unsupported methods\n\n\neach(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'toDataURL', 'pathToImage'], function (name) {\n  VMLPainter.prototype[name] = createMethodNotSupport(name);\n});\nvar _default = VMLPainter;\nmodule.exports = _default;","var _config = require(\"./config\");\n\nvar devicePixelRatio = _config.devicePixelRatio;\n\nvar util = require(\"./core/util\");\n\nvar logError = require(\"./core/log\");\n\nvar BoundingRect = require(\"./core/BoundingRect\");\n\nvar timsort = require(\"./core/timsort\");\n\nvar Layer = require(\"./Layer\");\n\nvar requestAnimationFrame = require(\"./animation/requestAnimationFrame\");\n\nvar Image = require(\"./graphic/Image\");\n\nvar env = require(\"./core/env\");\n\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\n\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n\nfunction isLayerValid(layer) {\n  if (!layer) {\n    return false;\n  }\n\n  if (layer.__builtin__) {\n    return true;\n  }\n\n  if (typeof layer.resize !== 'function' || typeof layer.refresh !== 'function') {\n    return false;\n  }\n\n  return true;\n}\n\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\n\nfunction isDisplayableCulled(el, width, height) {\n  tmpRect.copy(el.getBoundingRect());\n\n  if (el.transform) {\n    tmpRect.applyTransform(el.transform);\n  }\n\n  viewRect.width = width;\n  viewRect.height = height;\n  return !tmpRect.intersect(viewRect);\n}\n\nfunction isClipPathChanged(clipPaths, prevClipPaths) {\n  // displayable.__clipPaths can only be `null`/`undefined` or an non-empty array.\n  if (clipPaths === prevClipPaths) {\n    return false;\n  }\n\n  if (!clipPaths || !prevClipPaths || clipPaths.length !== prevClipPaths.length) {\n    return true;\n  }\n\n  for (var i = 0; i < clipPaths.length; i++) {\n    if (clipPaths[i] !== prevClipPaths[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction doClip(clipPaths, ctx) {\n  for (var i = 0; i < clipPaths.length; i++) {\n    var clipPath = clipPaths[i];\n    clipPath.setTransform(ctx);\n    ctx.beginPath();\n    clipPath.buildPath(ctx, clipPath.shape);\n    ctx.clip(); // Transform back\n\n    clipPath.restoreTransform(ctx);\n  }\n}\n\nfunction createRoot(width, height) {\n  var domRoot = document.createElement('div'); // domRoot.onselectstart = returnFalse; // Avoid page selected\n\n  domRoot.style.cssText = ['position:relative', // IOS13 safari probably has a compositing bug (z order of the canvas and the consequent\n  // dom does not act as expected) when some of the parent dom has\n  // `-webkit-overflow-scrolling: touch;` and the webpage is longer than one screen and\n  // the canvas is not at the top part of the page.\n  // Check `https://bugs.webkit.org/show_bug.cgi?id=203681` for more details. We remove\n  // this `overflow:hidden` to avoid the bug.\n  // 'overflow:hidden',\n  'width:' + width + 'px', 'height:' + height + 'px', 'padding:0', 'margin:0', 'border-width:0'].join(';') + ';';\n  return domRoot;\n}\n/**\n * @alias module:zrender/Painter\n * @constructor\n * @param {HTMLElement} root 绘图容器\n * @param {module:zrender/Storage} storage\n * @param {Object} opts\n */\n\n\nvar Painter = function (root, storage, opts) {\n  this.type = 'canvas'; // In node environment using node-canvas\n\n  var singleCanvas = !root.nodeName // In node ?\n  || root.nodeName.toUpperCase() === 'CANVAS';\n  this._opts = opts = util.extend({}, opts || {});\n  /**\n   * @type {number}\n   */\n\n  this.dpr = opts.devicePixelRatio || devicePixelRatio;\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._singleCanvas = singleCanvas;\n  /**\n   * 绘图容器\n   * @type {HTMLElement}\n   */\n\n  this.root = root;\n  var rootStyle = root.style;\n\n  if (rootStyle) {\n    rootStyle['-webkit-tap-highlight-color'] = 'transparent';\n    rootStyle['-webkit-user-select'] = rootStyle['user-select'] = rootStyle['-webkit-touch-callout'] = 'none';\n    root.innerHTML = '';\n  }\n  /**\n   * @type {module:zrender/Storage}\n   */\n\n\n  this.storage = storage;\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n\n  var zlevelList = this._zlevelList = [];\n  /**\n   * @type {Object.<string, module:zrender/Layer>}\n   * @private\n   */\n\n  var layers = this._layers = {};\n  /**\n   * @type {Object.<string, Object>}\n   * @private\n   */\n\n  this._layerConfig = {};\n  /**\n   * zrender will do compositing when root is a canvas and have multiple zlevels.\n   */\n\n  this._needsManuallyCompositing = false;\n\n  if (!singleCanvas) {\n    this._width = this._getSize(0);\n    this._height = this._getSize(1);\n    var domRoot = this._domRoot = createRoot(this._width, this._height);\n    root.appendChild(domRoot);\n  } else {\n    var width = root.width;\n    var height = root.height;\n\n    if (opts.width != null) {\n      width = opts.width;\n    }\n\n    if (opts.height != null) {\n      height = opts.height;\n    }\n\n    this.dpr = opts.devicePixelRatio || 1; // Use canvas width and height directly\n\n    root.width = width * this.dpr;\n    root.height = height * this.dpr;\n    this._width = width;\n    this._height = height; // Create layer if only one given canvas\n    // Device can be specified to create a high dpi image.\n\n    var mainLayer = new Layer(root, this, this.dpr);\n    mainLayer.__builtin__ = true;\n    mainLayer.initContext(); // FIXME Use canvas width and height\n    // mainLayer.resize(width, height);\n\n    layers[CANVAS_ZLEVEL] = mainLayer;\n    mainLayer.zlevel = CANVAS_ZLEVEL; // Not use common zlevel.\n\n    zlevelList.push(CANVAS_ZLEVEL);\n    this._domRoot = root;\n  }\n  /**\n   * @type {module:zrender/Layer}\n   * @private\n   */\n\n\n  this._hoverlayer = null;\n  this._hoverElements = [];\n};\n\nPainter.prototype = {\n  constructor: Painter,\n  getType: function () {\n    return 'canvas';\n  },\n\n  /**\n   * If painter use a single canvas\n   * @return {boolean}\n   */\n  isSingleCanvas: function () {\n    return this._singleCanvas;\n  },\n\n  /**\n   * @return {HTMLDivElement}\n   */\n  getViewportRoot: function () {\n    return this._domRoot;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n\n  /**\n   * 刷新\n   * @param {boolean} [paintAll=false] 强制绘制所有displayable\n   */\n  refresh: function (paintAll) {\n    var list = this.storage.getDisplayList(true);\n    var zlevelList = this._zlevelList;\n    this._redrawId = Math.random();\n\n    this._paintList(list, paintAll, this._redrawId); // Paint custum layers\n\n\n    for (var i = 0; i < zlevelList.length; i++) {\n      var z = zlevelList[i];\n      var layer = this._layers[z];\n\n      if (!layer.__builtin__ && layer.refresh) {\n        var clearColor = i === 0 ? this._backgroundColor : null;\n        layer.refresh(clearColor);\n      }\n    }\n\n    this.refreshHover();\n    return this;\n  },\n  addHover: function (el, hoverStyle) {\n    if (el.__hoverMir) {\n      return;\n    }\n\n    var elMirror = new el.constructor({\n      style: el.style,\n      shape: el.shape,\n      z: el.z,\n      z2: el.z2,\n      silent: el.silent\n    });\n    elMirror.__from = el;\n    el.__hoverMir = elMirror;\n    hoverStyle && elMirror.setStyle(hoverStyle);\n\n    this._hoverElements.push(elMirror);\n\n    return elMirror;\n  },\n  removeHover: function (el) {\n    var elMirror = el.__hoverMir;\n    var hoverElements = this._hoverElements;\n    var idx = util.indexOf(hoverElements, elMirror);\n\n    if (idx >= 0) {\n      hoverElements.splice(idx, 1);\n    }\n\n    el.__hoverMir = null;\n  },\n  clearHover: function (el) {\n    var hoverElements = this._hoverElements;\n\n    for (var i = 0; i < hoverElements.length; i++) {\n      var from = hoverElements[i].__from;\n\n      if (from) {\n        from.__hoverMir = null;\n      }\n    }\n\n    hoverElements.length = 0;\n  },\n  refreshHover: function () {\n    var hoverElements = this._hoverElements;\n    var len = hoverElements.length;\n    var hoverLayer = this._hoverlayer;\n    hoverLayer && hoverLayer.clear();\n\n    if (!len) {\n      return;\n    }\n\n    timsort(hoverElements, this.storage.displayableSortFunc); // Use a extream large zlevel\n    // FIXME?\n\n    if (!hoverLayer) {\n      hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n    }\n\n    var scope = {};\n    hoverLayer.ctx.save();\n\n    for (var i = 0; i < len;) {\n      var el = hoverElements[i];\n      var originalEl = el.__from; // Original el is removed\n      // PENDING\n\n      if (!(originalEl && originalEl.__zr)) {\n        hoverElements.splice(i, 1);\n        originalEl.__hoverMir = null;\n        len--;\n        continue;\n      }\n\n      i++; // Use transform\n      // FIXME style and shape ?\n\n      if (!originalEl.invisible) {\n        el.transform = originalEl.transform;\n        el.invTransform = originalEl.invTransform;\n        el.__clipPaths = originalEl.__clipPaths; // el.\n\n        this._doPaintEl(el, hoverLayer, true, scope);\n      }\n    }\n\n    hoverLayer.ctx.restore();\n  },\n  getHoverLayer: function () {\n    return this.getLayer(HOVER_LAYER_ZLEVEL);\n  },\n  _paintList: function (list, paintAll, redrawId) {\n    if (this._redrawId !== redrawId) {\n      return;\n    }\n\n    paintAll = paintAll || false;\n\n    this._updateLayerStatus(list);\n\n    var finished = this._doPaintList(list, paintAll);\n\n    if (this._needsManuallyCompositing) {\n      this._compositeManually();\n    }\n\n    if (!finished) {\n      var self = this;\n      requestAnimationFrame(function () {\n        self._paintList(list, paintAll, redrawId);\n      });\n    }\n  },\n  _compositeManually: function () {\n    var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n    var width = this._domRoot.width;\n    var height = this._domRoot.height;\n    ctx.clearRect(0, 0, width, height); // PENDING, If only builtin layer?\n\n    this.eachBuiltinLayer(function (layer) {\n      if (layer.virtual) {\n        ctx.drawImage(layer.dom, 0, 0, width, height);\n      }\n    });\n  },\n  _doPaintList: function (list, paintAll) {\n    var layerList = [];\n\n    for (var zi = 0; zi < this._zlevelList.length; zi++) {\n      var zlevel = this._zlevelList[zi];\n      var layer = this._layers[zlevel];\n\n      if (layer.__builtin__ && layer !== this._hoverlayer && (layer.__dirty || paintAll)) {\n        layerList.push(layer);\n      }\n    }\n\n    var finished = true;\n\n    for (var k = 0; k < layerList.length; k++) {\n      var layer = layerList[k];\n      var ctx = layer.ctx;\n      var scope = {};\n      ctx.save();\n      var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n      var useTimer = !paintAll && layer.incremental && Date.now;\n      var startTime = useTimer && Date.now();\n      var clearColor = layer.zlevel === this._zlevelList[0] ? this._backgroundColor : null; // All elements in this layer are cleared.\n\n      if (layer.__startIndex === layer.__endIndex) {\n        layer.clear(false, clearColor);\n      } else if (start === layer.__startIndex) {\n        var firstEl = list[start];\n\n        if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n          layer.clear(false, clearColor);\n        }\n      }\n\n      if (start === -1) {\n        console.error('For some unknown reason. drawIndex is -1');\n        start = layer.__startIndex;\n      }\n\n      for (var i = start; i < layer.__endIndex; i++) {\n        var el = list[i];\n\n        this._doPaintEl(el, layer, paintAll, scope);\n\n        el.__dirty = el.__dirtyText = false;\n\n        if (useTimer) {\n          // Date.now can be executed in 13,025,305 ops/second.\n          var dTime = Date.now() - startTime; // Give 15 millisecond to draw.\n          // The rest elements will be drawn in the next frame.\n\n          if (dTime > 15) {\n            break;\n          }\n        }\n      }\n\n      layer.__drawIndex = i;\n\n      if (layer.__drawIndex < layer.__endIndex) {\n        finished = false;\n      }\n\n      if (scope.prevElClipPaths) {\n        // Needs restore the state. If last drawn element is in the clipping area.\n        ctx.restore();\n      }\n\n      ctx.restore();\n    }\n\n    if (env.wxa) {\n      // Flush for weixin application\n      util.each(this._layers, function (layer) {\n        if (layer && layer.ctx && layer.ctx.draw) {\n          layer.ctx.draw();\n        }\n      });\n    }\n\n    return finished;\n  },\n  _doPaintEl: function (el, currentLayer, forcePaint, scope) {\n    var ctx = currentLayer.ctx;\n    var m = el.transform;\n\n    if ((currentLayer.__dirty || forcePaint) && // Ignore invisible element\n    !el.invisible // Ignore transparent element\n    && el.style.opacity !== 0 // Ignore scale 0 element, in some environment like node-canvas\n    // Draw a scale 0 element can cause all following draw wrong\n    // And setTransform with scale 0 will cause set back transform failed.\n    && !(m && !m[0] && !m[3]) // Ignore culled element\n    && !(el.culling && isDisplayableCulled(el, this._width, this._height))) {\n      var clipPaths = el.__clipPaths;\n      var prevElClipPaths = scope.prevElClipPaths; // Optimize when clipping on group with several elements\n\n      if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        // If has previous clipping state, restore from it\n        if (prevElClipPaths) {\n          ctx.restore();\n          scope.prevElClipPaths = null; // Reset prevEl since context has been restored\n\n          scope.prevEl = null;\n        } // New clipping state\n\n\n        if (clipPaths) {\n          ctx.save();\n          doClip(clipPaths, ctx);\n          scope.prevElClipPaths = clipPaths;\n        }\n      }\n\n      el.beforeBrush && el.beforeBrush(ctx);\n      el.brush(ctx, scope.prevEl || null);\n      scope.prevEl = el;\n      el.afterBrush && el.afterBrush(ctx);\n    }\n  },\n\n  /**\n   * 获取 zlevel 所在层，如果不存在则会创建一个新的层\n   * @param {number} zlevel\n   * @param {boolean} virtual Virtual layer will not be inserted into dom.\n   * @return {module:zrender/Layer}\n   */\n  getLayer: function (zlevel, virtual) {\n    if (this._singleCanvas && !this._needsManuallyCompositing) {\n      zlevel = CANVAS_ZLEVEL;\n    }\n\n    var layer = this._layers[zlevel];\n\n    if (!layer) {\n      // Create a new layer\n      layer = new Layer('zr_' + zlevel, this, this.dpr);\n      layer.zlevel = zlevel;\n      layer.__builtin__ = true;\n\n      if (this._layerConfig[zlevel]) {\n        util.merge(layer, this._layerConfig[zlevel], true);\n      } // TODO Remove EL_AFTER_INCREMENTAL_INC magic number\n      else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n          util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n        }\n\n      if (virtual) {\n        layer.virtual = virtual;\n      }\n\n      this.insertLayer(zlevel, layer); // Context is created after dom inserted to document\n      // Or excanvas will get 0px clientWidth and clientHeight\n\n      layer.initContext();\n    }\n\n    return layer;\n  },\n  insertLayer: function (zlevel, layer) {\n    var layersMap = this._layers;\n    var zlevelList = this._zlevelList;\n    var len = zlevelList.length;\n    var prevLayer = null;\n    var i = -1;\n    var domRoot = this._domRoot;\n\n    if (layersMap[zlevel]) {\n      logError('ZLevel ' + zlevel + ' has been used already');\n      return;\n    } // Check if is a valid layer\n\n\n    if (!isLayerValid(layer)) {\n      logError('Layer of zlevel ' + zlevel + ' is not valid');\n      return;\n    }\n\n    if (len > 0 && zlevel > zlevelList[0]) {\n      for (i = 0; i < len - 1; i++) {\n        if (zlevelList[i] < zlevel && zlevelList[i + 1] > zlevel) {\n          break;\n        }\n      }\n\n      prevLayer = layersMap[zlevelList[i]];\n    }\n\n    zlevelList.splice(i + 1, 0, zlevel);\n    layersMap[zlevel] = layer; // Vitual layer will not directly show on the screen.\n    // (It can be a WebGL layer and assigned to a ZImage element)\n    // But it still under management of zrender.\n\n    if (!layer.virtual) {\n      if (prevLayer) {\n        var prevDom = prevLayer.dom;\n\n        if (prevDom.nextSibling) {\n          domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n        } else {\n          domRoot.appendChild(layer.dom);\n        }\n      } else {\n        if (domRoot.firstChild) {\n          domRoot.insertBefore(layer.dom, domRoot.firstChild);\n        } else {\n          domRoot.appendChild(layer.dom);\n        }\n      }\n    }\n  },\n  // Iterate each layer\n  eachLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      cb.call(context, this._layers[z], z);\n    }\n  },\n  // Iterate each buildin layer\n  eachBuiltinLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var layer;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      layer = this._layers[z];\n\n      if (layer.__builtin__) {\n        cb.call(context, layer, z);\n      }\n    }\n  },\n  // Iterate each other layer except buildin layer\n  eachOtherLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var layer;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      layer = this._layers[z];\n\n      if (!layer.__builtin__) {\n        cb.call(context, layer, z);\n      }\n    }\n  },\n\n  /**\n   * 获取所有已创建的层\n   * @param {Array.<module:zrender/Layer>} [prevLayer]\n   */\n  getLayers: function () {\n    return this._layers;\n  },\n  _updateLayerStatus: function (list) {\n    this.eachBuiltinLayer(function (layer, z) {\n      layer.__dirty = layer.__used = false;\n    });\n\n    function updatePrevLayer(idx) {\n      if (prevLayer) {\n        if (prevLayer.__endIndex !== idx) {\n          prevLayer.__dirty = true;\n        }\n\n        prevLayer.__endIndex = idx;\n      }\n    }\n\n    if (this._singleCanvas) {\n      for (var i = 1; i < list.length; i++) {\n        var el = list[i];\n\n        if (el.zlevel !== list[i - 1].zlevel || el.incremental) {\n          this._needsManuallyCompositing = true;\n          break;\n        }\n      }\n    }\n\n    var prevLayer = null;\n    var incrementalLayerCount = 0;\n    var prevZlevel;\n\n    for (var i = 0; i < list.length; i++) {\n      var el = list[i];\n      var zlevel = el.zlevel;\n      var layer;\n\n      if (prevZlevel !== zlevel) {\n        prevZlevel = zlevel;\n        incrementalLayerCount = 0;\n      } // TODO Not use magic number on zlevel.\n      // Each layer with increment element can be separated to 3 layers.\n      //          (Other Element drawn after incremental element)\n      // -----------------zlevel + EL_AFTER_INCREMENTAL_INC--------------------\n      //                      (Incremental element)\n      // ----------------------zlevel + INCREMENTAL_INC------------------------\n      //              (Element drawn before incremental element)\n      // --------------------------------zlevel--------------------------------\n\n\n      if (el.incremental) {\n        layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n        layer.incremental = true;\n        incrementalLayerCount = 1;\n      } else {\n        layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n      }\n\n      if (!layer.__builtin__) {\n        logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n      }\n\n      if (layer !== prevLayer) {\n        layer.__used = true;\n\n        if (layer.__startIndex !== i) {\n          layer.__dirty = true;\n        }\n\n        layer.__startIndex = i;\n\n        if (!layer.incremental) {\n          layer.__drawIndex = i;\n        } else {\n          // Mark layer draw index needs to update.\n          layer.__drawIndex = -1;\n        }\n\n        updatePrevLayer(i);\n        prevLayer = layer;\n      }\n\n      if (el.__dirty) {\n        layer.__dirty = true;\n\n        if (layer.incremental && layer.__drawIndex < 0) {\n          // Start draw from the first dirty element.\n          layer.__drawIndex = i;\n        }\n      }\n    }\n\n    updatePrevLayer(i);\n    this.eachBuiltinLayer(function (layer, z) {\n      // Used in last frame but not in this frame. Needs clear\n      if (!layer.__used && layer.getElementCount() > 0) {\n        layer.__dirty = true;\n        layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n      } // For incremental layer. In case start index changed and no elements are dirty.\n\n\n      if (layer.__dirty && layer.__drawIndex < 0) {\n        layer.__drawIndex = layer.__startIndex;\n      }\n    });\n  },\n\n  /**\n   * 清除hover层外所有内容\n   */\n  clear: function () {\n    this.eachBuiltinLayer(this._clearLayer);\n    return this;\n  },\n  _clearLayer: function (layer) {\n    layer.clear();\n  },\n  setBackgroundColor: function (backgroundColor) {\n    this._backgroundColor = backgroundColor;\n  },\n\n  /**\n   * 修改指定zlevel的绘制参数\n   *\n   * @param {string} zlevel\n   * @param {Object} config 配置对象\n   * @param {string} [config.clearColor=0] 每次清空画布的颜色\n   * @param {string} [config.motionBlur=false] 是否开启动态模糊\n   * @param {number} [config.lastFrameAlpha=0.7]\n   *                 在开启动态模糊的时候使用，与上一帧混合的alpha值，值越大尾迹越明显\n   */\n  configLayer: function (zlevel, config) {\n    if (config) {\n      var layerConfig = this._layerConfig;\n\n      if (!layerConfig[zlevel]) {\n        layerConfig[zlevel] = config;\n      } else {\n        util.merge(layerConfig[zlevel], config, true);\n      }\n\n      for (var i = 0; i < this._zlevelList.length; i++) {\n        var _zlevel = this._zlevelList[i]; // TODO Remove EL_AFTER_INCREMENTAL_INC magic number\n\n        if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n          var layer = this._layers[_zlevel];\n          util.merge(layer, layerConfig[zlevel], true);\n        }\n      }\n    }\n  },\n\n  /**\n   * 删除指定层\n   * @param {number} zlevel 层所在的zlevel\n   */\n  delLayer: function (zlevel) {\n    var layers = this._layers;\n    var zlevelList = this._zlevelList;\n    var layer = layers[zlevel];\n\n    if (!layer) {\n      return;\n    }\n\n    layer.dom.parentNode.removeChild(layer.dom);\n    delete layers[zlevel];\n    zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n  },\n\n  /**\n   * 区域大小变化后重绘\n   */\n  resize: function (width, height) {\n    if (!this._domRoot.style) {\n      // Maybe in node or worker\n      if (width == null || height == null) {\n        return;\n      }\n\n      this._width = width;\n      this._height = height;\n      this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n    } else {\n      var domRoot = this._domRoot; // FIXME Why ?\n\n      domRoot.style.display = 'none'; // Save input w/h\n\n      var opts = this._opts;\n      width != null && (opts.width = width);\n      height != null && (opts.height = height);\n      width = this._getSize(0);\n      height = this._getSize(1);\n      domRoot.style.display = ''; // 优化没有实际改变的resize\n\n      if (this._width !== width || height !== this._height) {\n        domRoot.style.width = width + 'px';\n        domRoot.style.height = height + 'px';\n\n        for (var id in this._layers) {\n          if (this._layers.hasOwnProperty(id)) {\n            this._layers[id].resize(width, height);\n          }\n        }\n\n        util.each(this._progressiveLayers, function (layer) {\n          layer.resize(width, height);\n        });\n        this.refresh(true);\n      }\n\n      this._width = width;\n      this._height = height;\n    }\n\n    return this;\n  },\n\n  /**\n   * 清除单独的一个层\n   * @param {number} zlevel\n   */\n  clearLayer: function (zlevel) {\n    var layer = this._layers[zlevel];\n\n    if (layer) {\n      layer.clear();\n    }\n  },\n\n  /**\n   * 释放\n   */\n  dispose: function () {\n    this.root.innerHTML = '';\n    this.root = this.storage = this._domRoot = this._layers = null;\n  },\n\n  /**\n   * Get canvas which has all thing rendered\n   * @param {Object} opts\n   * @param {string} [opts.backgroundColor]\n   * @param {number} [opts.pixelRatio]\n   */\n  getRenderedCanvas: function (opts) {\n    opts = opts || {};\n\n    if (this._singleCanvas && !this._compositeManually) {\n      return this._layers[CANVAS_ZLEVEL].dom;\n    }\n\n    var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n    imageLayer.initContext();\n    imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n\n    if (opts.pixelRatio <= this.dpr) {\n      this.refresh();\n      var width = imageLayer.dom.width;\n      var height = imageLayer.dom.height;\n      var ctx = imageLayer.ctx;\n      this.eachLayer(function (layer) {\n        if (layer.__builtin__) {\n          ctx.drawImage(layer.dom, 0, 0, width, height);\n        } else if (layer.renderToCanvas) {\n          imageLayer.ctx.save();\n          layer.renderToCanvas(imageLayer.ctx);\n          imageLayer.ctx.restore();\n        }\n      });\n    } else {\n      // PENDING, echarts-gl and incremental rendering.\n      var scope = {};\n      var displayList = this.storage.getDisplayList(true);\n\n      for (var i = 0; i < displayList.length; i++) {\n        var el = displayList[i];\n\n        this._doPaintEl(el, imageLayer, true, scope);\n      }\n    }\n\n    return imageLayer.dom;\n  },\n\n  /**\n   * 获取绘图区域宽度\n   */\n  getWidth: function () {\n    return this._width;\n  },\n\n  /**\n   * 获取绘图区域高度\n   */\n  getHeight: function () {\n    return this._height;\n  },\n  _getSize: function (whIdx) {\n    var opts = this._opts;\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n      return parseFloat(opts[wh]);\n    }\n\n    var root = this.root; // IE8 does not support getComputedStyle, but it use VML.\n\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;\n  },\n  pathToImage: function (path, dpr) {\n    dpr = dpr || this.dpr;\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var rect = path.getBoundingRect();\n    var style = path.style;\n    var shadowBlurSize = style.shadowBlur * dpr;\n    var shadowOffsetX = style.shadowOffsetX * dpr;\n    var shadowOffsetY = style.shadowOffsetY * dpr;\n    var lineWidth = style.hasStroke() ? style.lineWidth : 0;\n    var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\n    var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\n    var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\n    var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\n    var width = rect.width + leftMargin + rightMargin;\n    var height = rect.height + topMargin + bottomMargin;\n    canvas.width = width * dpr;\n    canvas.height = height * dpr;\n    ctx.scale(dpr, dpr);\n    ctx.clearRect(0, 0, width, height);\n    ctx.dpr = dpr;\n    var pathTransform = {\n      position: path.position,\n      rotation: path.rotation,\n      scale: path.scale\n    };\n    path.position = [leftMargin - rect.x, topMargin - rect.y];\n    path.rotation = 0;\n    path.scale = [1, 1];\n    path.updateTransform();\n\n    if (path) {\n      path.brush(ctx);\n    }\n\n    var ImageShape = Image;\n    var imgShape = new ImageShape({\n      style: {\n        x: 0,\n        y: 0,\n        image: canvas\n      }\n    });\n\n    if (pathTransform.position != null) {\n      imgShape.position = path.position = pathTransform.position;\n    }\n\n    if (pathTransform.rotation != null) {\n      imgShape.rotation = path.rotation = pathTransform.rotation;\n    }\n\n    if (pathTransform.scale != null) {\n      imgShape.scale = path.scale = pathTransform.scale;\n    }\n\n    return imgShape;\n  }\n};\nvar _default = Painter;\nmodule.exports = _default;","var PathProxy = require(\"../core/PathProxy\");\n\nvar _vector = require(\"../core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\n\nfunction _default(path, m) {\n  var data = path.data;\n  var cmd;\n  var nPoint;\n  var i;\n  var j;\n  var k;\n  var p;\n  var M = CMD.M;\n  var C = CMD.C;\n  var L = CMD.L;\n  var R = CMD.R;\n  var A = CMD.A;\n  var Q = CMD.Q;\n\n  for (i = 0, j = 0; i < data.length;) {\n    cmd = data[i++];\n    j = i;\n    nPoint = 0;\n\n    switch (cmd) {\n      case M:\n        nPoint = 1;\n        break;\n\n      case L:\n        nPoint = 1;\n        break;\n\n      case C:\n        nPoint = 3;\n        break;\n\n      case Q:\n        nPoint = 2;\n        break;\n\n      case A:\n        var x = m[4];\n        var y = m[5];\n        var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n        var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n        var angle = mathAtan2(-m[1] / sy, m[0] / sx); // cx\n\n        data[i] *= sx;\n        data[i++] += x; // cy\n\n        data[i] *= sy;\n        data[i++] += y; // Scale rx and ry\n        // FIXME Assume psi is 0 here\n\n        data[i++] *= sx;\n        data[i++] *= sy; // Start angle\n\n        data[i++] += angle; // end angle\n\n        data[i++] += angle; // FIXME psi\n\n        i += 2;\n        j = i;\n        break;\n\n      case R:\n        // x0, y0\n        p[0] = data[i++];\n        p[1] = data[i++];\n        v2ApplyTransform(p, p, m);\n        data[j++] = p[0];\n        data[j++] = p[1]; // x1, y1\n\n        p[0] += data[i++];\n        p[1] += data[i++];\n        v2ApplyTransform(p, p, m);\n        data[j++] = p[0];\n        data[j++] = p[1];\n    }\n\n    for (k = 0; k < nPoint; k++) {\n      var p = points[k];\n      p[0] = data[i++];\n      p[1] = data[i++];\n      v2ApplyTransform(p, p, m); // Write back\n\n      data[j++] = p[0];\n      data[j++] = p[1];\n    }\n  }\n}\n\nmodule.exports = _default;","require(\"./graphic\");\n\nvar _zrender = require(\"../zrender\");\n\nvar registerPainter = _zrender.registerPainter;\n\nvar Painter = require(\"./Painter\");\n\nregisterPainter('vml', Painter);"],"sourceRoot":""}